(("undefined"!==typeof self?self:this)["webpackChunkharvester_1_6_0"]=("undefined"!==typeof self?self:this)["webpackChunkharvester_1_6_0"]||[]).push([[332],{78386:function(e,t,a){"use strict";a.d(t,{A:function(){return m}});var r=a(9274);const s=["aria-label"],l=["alt"];function o(e,t,a,o,n,c){return a.text?((0,r.openBlock)(),(0,r.createElementBlock)("a",(0,r.mergeProps)({key:0,class:["copy-to-clipboard-text",{copied:n.copied,plain:a.plain}],role:"button",href:"#","aria-label":e.t("generic.copyToClipboard")},e.$attrs,{onClick:t[0]||(t[0]=(...e)=>c.clicked&&c.clicked(...e)),onKeyup:t[1]||(t[1]=(0,r.withKeys)(((...e)=>c.clicked&&c.clicked(...e)),["space"]))}),[(0,r.createTextVNode)((0,r.toDisplayString)(a.text)+" ",1),(0,r.createElementVNode)("i",{class:(0,r.normalizeClass)(["icon",{"icon-copy":!n.copied,"icon-checkmark":n.copied}]),alt:n.copied?e.t("generic.copiedToClipboard"):e.t("generic.copyToClipboard")},null,10,l)],16,s)):(0,r.createCommentVNode)("",!0)}var n=a(48881),c=a(99726),i={emits:["error"],props:{text:{type:String,required:!0},plain:{type:Boolean,default:!1}},data(){return{copied:!1}},methods:{clicked(e){this.copied||(e.preventDefault(),(0,n.e)(this.text).then((()=>{this.copied=!0;let t=e.target;"I"===t.tagName&&(t=t.parentElement||t),setTimeout((()=>{this.copied=!1}),500)})).catch((e=>{this.$emit("error",(0,c.rz)(e))})))}}},d=(a(55168),a(47433));const u=(0,d.A)(i,[["render",o],["__scopeId","data-v-d7ed0a12"]]);var m=u},84403:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return pa}});var r=a(9274);const s={key:1},l={key:0,class:"row mb-20"},o={class:"col span-12"},n={class:"mt-5"};function c(e,t,a,c,i,d){const u=(0,r.resolveComponent)("Loading"),m=(0,r.resolveComponent)("Banner"),v=(0,r.resolveComponent)("Basic"),p=(0,r.resolveComponent)("Tab"),h=(0,r.resolveComponent)("Instance"),k=(0,r.resolveComponent)("VlanStatus"),b=(0,r.resolveComponent)("InfoBox"),y=(0,r.resolveComponent)("Tag"),g=(0,r.resolveComponent)("LabelValue"),N=(0,r.resolveComponent)("Disk"),V=(0,r.resolveComponent)("ArrayListGrouped"),f=(0,r.resolveComponent)("HarvesterKsmtuned"),w=(0,r.resolveComponent)("HarvesterSeeder"),E=(0,r.resolveComponent)("SortableTable"),C=(0,r.resolveComponent)("Tabbed"),S=(0,r.resolveDirective)("clean-html");return e.$fetchState.pending?((0,r.openBlock)(),(0,r.createBlock)(u,{key:0})):((0,r.openBlock)(),(0,r.createElementBlock)("div",s,["disabled"===d.ntpSyncedStatus.status?((0,r.openBlock)(),(0,r.createBlock)(m,{key:0,color:"warning"},{default:(0,r.withCtx)((()=>[(0,r.withDirectives)((0,r.createElementVNode)("span",null,null,512),[[S,e.t(d.ntpSyncedStatus.warning.key)]])])),_:1})):(0,r.createCommentVNode)("",!0),"unsynced"===d.ntpSyncedStatus.status?((0,r.openBlock)(),(0,r.createBlock)(m,{key:1,color:"warning"},{default:(0,r.withCtx)((()=>[(0,r.withDirectives)((0,r.createElementVNode)("span",null,null,512),[[S,e.t(d.ntpSyncedStatus.warning.key,{current:d.ntpSyncedStatus.warning.current},!0)]])])),_:1})):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(C,(0,r.mergeProps)(e.$attrs,{class:"mt-15","side-tabs":!0,onChanged:d.tabChange}),{default:(0,r.withCtx)((()=>[(0,r.createVNode)(p,{name:"basics",label:e.t("harvester.host.tabs.basics"),weight:4,class:"bordered-table"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(v,{value:a.value,metrics:i.metrics,mode:i.mode},null,8,["value","metrics","mode"])])),_:1},8,["label"]),(0,r.createVNode)(p,{name:"instance",label:e.t("harvester.host.tabs.instance"),weight:3,class:"bordered-table"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(h,{node:a.value},null,8,["node"])])),_:1},8,["label"]),d.hasHostNetworksSchema&&d.vlanStatuses.length>0?((0,r.openBlock)(),(0,r.createBlock)(p,{key:0,name:"network",label:e.t("harvester.host.tabs.network"),weight:2,class:"bordered-table"},{default:(0,r.withCtx)((()=>[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(d.vlanStatuses,((e,t)=>((0,r.openBlock)(),(0,r.createBlock)(b,{key:t},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(k,{value:e,mode:i.mode},null,8,["value","mode"])])),_:2},1024)))),128))])),_:1},8,["label"])):(0,r.createCommentVNode)("",!0),d.hasBlockDevicesSchema?((0,r.openBlock)(),(0,r.createBlock)(p,{key:1,name:"disk",weight:1,label:e.t("harvester.host.tabs.storage")},{default:(0,r.withCtx)((()=>[d.longhornNode?((0,r.openBlock)(),(0,r.createElementBlock)("div",l,[(0,r.createElementVNode)("div",o,[d.longhornNode.spec.tags.length?((0,r.openBlock)(),(0,r.createBlock)(g,{key:0,name:e.t("harvester.host.tags.label")},{value:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",n,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(d.longhornNode.spec.tags,((e,t)=>((0,r.openBlock)(),(0,r.createBlock)(y,{key:t},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e),1)])),_:2},1024)))),128))])])),_:1},8,["name"])):(0,r.createCommentVNode)("",!0)])])):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(V,{value:i.newDisks,"onUpdate:value":t[0]||(t[0]=e=>i.newDisks=e),mode:i.mode,"can-remove":!1,"initial-empty-row":!1},{default:(0,r.withCtx)((e=>[(0,r.createVNode)(N,{value:e.row.value,"onUpdate:value":t=>e.row.value=t,class:"mb-20",mode:i.mode,disks:i.disks},null,8,["value","onUpdate:value","mode","disks"])])),_:1},8,["value","mode"])])),_:1},8,["label"])):(0,r.createCommentVNode)("",!0),d.hasKsmtunedSchema?((0,r.openBlock)(),(0,r.createBlock)(p,{key:2,name:"ksmtuned",weight:0,"show-header":!1,label:e.t("harvester.host.tabs.ksmtuned")},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(f,{mode:i.mode,node:a.value},null,8,["mode","node"])])),_:1},8,["label"])):(0,r.createCommentVNode)("",!0),d.seederEnabled?((0,r.openBlock)(),(0,r.createBlock)(p,{key:3,name:"seeder",weight:-1,label:e.t("harvester.host.tabs.seeder")},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(w,{mode:i.mode,node:a.value,inventory:i.inventory},null,8,["mode","node","inventory"])])),_:1},8,["label"])):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(p,{"label-key":"harvester.virtualMachine.detail.tabs.events",name:"events",weight:-99},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(E,{rows:d.events,headers:d.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,"default-sort-by":"date"},null,8,["rows","headers"])])),_:1})])),_:1},16,["onChanged"])]))}var i=a(65359),d=a(8529),u=a(19485),m=a(49584),v=a(26962),p=a(39412),h=a(31097),k=a(87619),b=a(81023),y=a(53701),g=a(84757),N=a(52799),V=a(35664),f=a(2602),w=a(88339),E=a(95799),C=a(68851),S=a(76978),B=a(92043),A=a(32766);const T={class:"host-detail"},x={class:"row mb-20"},_={class:"col span-6"},M={class:"col span-6"},$={class:"row mb-20"},D={class:"col span-6"},O={class:"col span-6"},R={class:"role"},P={key:0,class:"text-warning ml-20"},I={class:"row mb-20"},L={class:"col span-6"},U={class:"col span-6"},H={class:"row mb-20"},K={key:0,class:"col span-6"},j={class:"col span-6"},F=["href"],q={key:1},J={class:"row mb-20"},G={key:0,class:"col span-4"},z={class:"row mb-20"},Q={class:"col span-4"},W={class:"col span-4"},Y={class:"col span-4"},X={key:2,class:"row mb-20"},Z={key:0,class:"col span-4"},ee={key:1,class:"col span-4"},te={key:2,class:"col span-4"};function ae(e,t,a,s,l,o){const n=(0,r.resolveComponent)("Banner"),c=(0,r.resolveComponent)("LabelValue"),i=(0,r.resolveComponent)("HarvesterCPUUsed"),d=(0,r.resolveComponent)("HarvesterMemoryUsed"),u=(0,r.resolveComponent)("HarvesterStorageUsed");return(0,r.openBlock)(),(0,r.createElementBlock)("div",T,[a.value.isKVMDisable?((0,r.openBlock)(),(0,r.createBlock)(n,{key:0,color:"error","label-key":"harvester.host.detail.kvm.disableMessage"})):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.t("harvester.host.tabs.overview")),1),(0,r.createElementVNode)("div",x,[(0,r.createElementVNode)("div",_,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.customName"),value:o.customName},null,8,["name","value"])]),(0,r.createElementVNode)("div",M,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.hostIP"),value:a.value.internalIp},null,8,["name","value"])])]),(0,r.createElementVNode)("div",$,[(0,r.createElementVNode)("div",D,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.os"),value:a.value.status.nodeInfo.osImage},null,8,["name","value"])]),(0,r.createElementVNode)("div",O,[(0,r.createElementVNode)("div",R,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.role")},{value:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(o.nodeType)+" ",1),o.nodeRoleState?((0,r.openBlock)(),(0,r.createElementBlock)("span",P,(0,r.toDisplayString)(o.nodeRoleState),1)):(0,r.createCommentVNode)("",!0)])),_:1},8,["name"])])])]),(0,r.createElementVNode)("div",I,[(0,r.createElementVNode)("div",L,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.create"),value:a.value.metadata.creationTimestamp},null,8,["name","value"])]),(0,r.createElementVNode)("div",U,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.update"),value:o.lastUpdateTime},null,8,["name","value"])])]),(0,r.createElementVNode)("div",H,[!a.value.isEtcd&&a.value.cpuPinningFeatureEnabled?((0,r.openBlock)(),(0,r.createElementBlock)("div",K,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.cpuManager"),value:o.cpuManagerStatus},null,8,["name","value"])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",j,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.consoleUrl"),value:o.consoleUrl.value},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("a",{slot:"value",href:o.consoleUrl.value,target:"_blank"},(0,r.toDisplayString)(o.consoleUrl.display),9,F)])),_:1},8,["name","value"])])]),o.hasMetricNodeSchema?((0,r.openBlock)(),(0,r.createElementBlock)("div",q,[t[0]||(t[0]=(0,r.createElementVNode)("hr",{class:"divider"},null,-1)),(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.t("harvester.host.tabs.monitor")),1),(0,r.createElementVNode)("div",J,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["col",{"span-4":o.hasLonghornSchema,"span-6":!o.hasLonghornSchema}])},[(0,r.createVNode)(i,{row:a.value,"resource-name":e.t("node.detail.glance.consumptionGauge.cpu"),"show-used":!0},null,8,["row","resource-name"])],2),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["col",{"span-4":o.hasLonghornSchema,"span-6":!o.hasLonghornSchema}])},[(0,r.createVNode)(d,{row:a.value,"resource-name":e.t("node.detail.glance.consumptionGauge.memory"),"show-used":!0},null,8,["row","resource-name"])],2),o.hasLonghornSchema?((0,r.openBlock)(),(0,r.createElementBlock)("div",G,[(0,r.createVNode)(u,{row:a.value,"resource-name":e.t("harvester.host.detail.storage"),"show-allocated":!0},null,8,["row","resource-name"])])):(0,r.createCommentVNode)("",!0)])])):(0,r.createCommentVNode)("",!0),t[1]||(t[1]=(0,r.createElementVNode)("hr",{class:"section-divider"},null,-1)),(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.t("harvester.host.detail.more")),1),(0,r.createElementVNode)("div",z,[(0,r.createElementVNode)("div",Q,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.uuid"),value:a.value.status.nodeInfo.systemUUID},null,8,["name","value"])]),(0,r.createElementVNode)("div",W,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.kernel"),value:a.value.status.nodeInfo.kernelVersion},null,8,["name","value"])]),(0,r.createElementVNode)("div",Y,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.containerRuntime"),value:a.value.status.nodeInfo.containerRuntimeVersion},null,8,["name","value"])])]),a.value.manufacturer||a.value.serialNumber||a.value.model?((0,r.openBlock)(),(0,r.createElementBlock)("div",X,[a.value.manufacturer?((0,r.openBlock)(),(0,r.createElementBlock)("div",Z,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.manufacturer"),value:a.value.manufacturer},null,8,["name","value"])])):(0,r.createCommentVNode)("",!0),a.value.serialNumber?((0,r.openBlock)(),(0,r.createElementBlock)("div",ee,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.serialNumber"),value:a.value.serialNumber},null,8,["name","value"])])):(0,r.createCommentVNode)("",!0),a.value.model?((0,r.openBlock)(),(0,r.createElementBlock)("div",te,[(0,r.createVNode)(c,{name:e.t("harvester.host.detail.model"),value:a.value.model},null,8,["name","value"])])):(0,r.createCommentVNode)("",!0)])):(0,r.createCommentVNode)("",!0)])}var re=a(9980),se=a(14290),le=a(79898),oe=a(46484);const ne="complete",ce="promoteRestart",ie="promoteSucceed";var de={name:"BasicNode",components:{Banner:re.l,LabelValue:p.A,HarvesterCPUUsed:se["default"],HarvesterMemoryUsed:le["default"],HarvesterStorageUsed:oe["default"]},props:{value:{type:Object,required:!0},metrics:{type:Object,required:!1,default:()=>null},mode:{type:String,required:!1,default:"view"}},computed:{customName(){return this.value.metadata?.annotations?.[f.r.HOST_CUSTOM_NAME]},cpuManagerStatus(){return this.value.isCPUManagerEnableInProgress?this.t("generic.loading"):this.t("generic."+(this.value.isCPUManagerEnabled?"enabled":"disabled"))},consoleUrl(){const e=this.value.metadata?.annotations?.[f.r.HOST_CONSOLE_URL];let t=e;return e?(e.startsWith("http://")||e.startsWith("https://")||(t=`http://${e}`),{display:e,value:t}):""},cpuTotal(){let e=0;return this.metrics&&(e=this.metrics.cpuCapacity),e},cpuUsage(){let e=0;return this.metrics&&(e=this.metrics.cpuUsage),e},memoryTotal(){let e=0;return this.metrics&&(e=this.metrics.memoryCapacity),e},memoryUsage(){let e=0;return this.metrics&&(e=this.metrics.memoryUsage),e},cpuUnits(){return"C"},memoryUnits(){const e=(0,E.$W)(this.memoryTotal,1024);return`${E.QN[e]}${g.jx}`},nodeType(){return this.value.isEtcd?this.t("harvester.host.detail.etcd"):this.value.isMaster?this.t("harvester.host.detail.management"):this.t("harvester.host.detail.compute")},lastUpdateTime(){return this.value.status?.conditions?.[0]?.lastHeartbeatTime},nodeRoleState(){if(!this.value.isEtcd){const e=this.value.metadata?.annotations?.[f.r.PROMOTE_STATUS];if(e===ne){const e=void 0!==this.value.metadata?.labels?.[f.r.NODE_ROLE_MASTER]||void 0!==this.value.metadata?.labels?.[f.r.NODE_ROLE_CONTROL_PLANE];return this.t(`harvester.host.promote.${e?ie:ce}`)}}return null},hasMetricNodeSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[`${e}/schemaFor`](V.$v.NODE)},hasLonghornSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[`${e}/schemaFor`](V.oe.NODES)}},methods:{memoryFormatter(e){const t=(0,E.$W)(this.memoryTotal,1024),a={addSuffix:!1,increment:1024,minExponent:t};return(0,E.Mo)(e,a)}}},ue=(a(211),a(47433));const me=(0,ue.A)(de,[["render",ae],["__scopeId","data-v-bc500e7c"]]);var ve=me;const pe={key:1,id:"host-instances",class:"row"},he={class:"col span-12"},ke={class:"state"};function be(e,t,a,s,l,o){const n=(0,r.resolveComponent)("Loading"),c=(0,r.resolveComponent)("HarvesterVmState"),i=(0,r.resolveComponent)("SortableTable");return e.$fetchState.pending?((0,r.openBlock)(),(0,r.createBlock)(n,{key:0})):((0,r.openBlock)(),(0,r.createElementBlock)("div",pe,[(0,r.createElementVNode)("div",he,[(0,r.createVNode)(i,(0,r.mergeProps)(e.$attrs,{headers:o.headers,"default-sort-by":"age",rows:o.rows,"key-field":"_key"}),{"cell:state":(0,r.withCtx)((e=>[(0,r.createElementVNode)("div",ke,[(0,r.createVNode)(c,{class:"vmstate",row:e.row,"all-cluster-network":o.allClusterNetwork},null,8,["row","all-cluster-network"])])])),_:1},16,["headers","rows"])])]))}var ye=a(68774),ge=a(2841),Ne=a(98993),Ve={name:"InstanceNode",components:{SortableTable:b.A,Loading:k.A,HarvesterVmState:Ne["default"]},props:{node:{type:Object,required:!0}},async fetch(){await(0,w.kR)({vms:this.$store.dispatch("harvester/findAll",{type:A.rk.VM}),vmis:this.$store.dispatch("harvester/findAll",{type:A.rk.VMI}),allClusterNetwork:this.$store.dispatch("harvester/findAll",{type:A.rk.CLUSTER_NETWORK})})},computed:{allClusterNetwork(){return this.$store.getters["harvester/all"](A.rk.CLUSTER_NETWORK)},rows(){const e=this.$store.getters["harvester/all"](A.rk.VM);return e.filter((e=>e.vmi?.status?.nodeName===this.node?.metadata?.labels?.[ge.yA]))},headers(){return[ye.c4,ye.o_,{name:"CPU",label:"CPU",sort:["displayCPU"],value:"displayCPU",align:"center",dashIfEmpty:!0},{name:"Memory",value:"displayMemory",sort:["memorySort"],align:"center",labelKey:"tableHeaders.memory",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"ip",label:"IP Address",labelKey:"harvester.tableHeaders.vm.ipAddress",value:"id",formatter:"HarvesterIpAddress"},{...ye.K,sort:"metadata.creationTimestamp:desc"}]}}};a(47216);const fe=(0,ue.A)(Ve,[["render",be],["__scopeId","data-v-6f0bc59b"]]);var we=fe;const Ee={key:1},Ce={class:"row"},Se={class:"col span-12"},Be={class:"mt-5"},Ae={class:"row mt-10"},Te={class:"col span-12"},xe={class:"pull-left"},_e={class:"pull-right"},Me={key:0,class:"row mt-30"},$e={class:"col span-4"},De={class:"col span-4"},Oe={class:"col span-4"},Re={class:"row mt-10"},Pe={class:"col span-4"},Ie={key:0,class:"col span-4"},Le={class:"col span-4"};function Ue(e,t,a,s,l,o){const n=(0,r.resolveComponent)("Banner"),c=(0,r.resolveComponent)("Tag"),i=(0,r.resolveComponent)("LabelValue"),d=(0,r.resolveComponent)("RadioGroup"),u=(0,r.resolveComponent)("BadgeState"),m=(0,r.resolveDirective)("clean-tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"disk","onUpdate:value":t[1]||(t[1]=(...e)=>o.update&&o.update(...e))},[o.mountedMessage?((0,r.openBlock)(),(0,r.createBlock)(n,{key:0,color:"error",label:o.mountedMessage},null,8,["label"])):(0,r.createCommentVNode)("",!0),a.value.isNew?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",Ee,[(0,r.createElementVNode)("div",Ce,[(0,r.createElementVNode)("div",Se,[a.value.tags.length?((0,r.openBlock)(),(0,r.createBlock)(i,{key:0,name:e.t("harvester.host.disk.tags.label")},{value:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",Be,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a.value.tags,((e,t)=>((0,r.openBlock)(),(0,r.createBlock)(c,{key:t},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e),1)])),_:2},1024)))),128))])])),_:1},8,["name"])):(0,r.createCommentVNode)("",!0)])]),(0,r.createElementVNode)("div",Ae,[(0,r.createElementVNode)("div",Te,[(0,r.createElementVNode)("div",xe,[(0,r.createVNode)(d,{value:a.value.allowScheduling,"onUpdate:value":t[0]||(t[0]=e=>a.value.allowScheduling=e),name:"diskScheduling",label:e.t("harvester.host.disk.allowScheduling.label"),mode:a.mode,options:o.allowSchedulingOptions,row:!0},null,8,["value","label","mode","options"])]),(0,r.createElementVNode)("div",_e,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("harvester.host.disk.conditions"))+": ",1),(0,r.withDirectives)((0,r.createVNode)(u,{color:"True"===e.readyCondition.status?"bg-success":"bg-error",icon:"True"===e.readyCondition.status?"icon-checkmark":"icon-warning",label:"Ready",class:"mr-10 ml-10 state"},null,8,["color","icon"]),[[m,e.readyCondition.message]]),(0,r.withDirectives)((0,r.createVNode)(u,{color:"True"===e.schedulableCondition.status&&o.targetDisk?.allowScheduling?"bg-success":"bg-error",icon:"True"===e.schedulableCondition.status&&o.targetDisk?.allowScheduling?"icon-checkmark":"icon-warning",label:"Schedulable",class:"mr-10 state"},null,8,["color","icon"]),[[m,o.schedulableTooltipMessage]]),o.provisionPhase.label?((0,r.openBlock)(),(0,r.createBlock)(u,{key:0,color:o.provisionPhase.color,icon:o.provisionPhase.icon,label:o.provisionPhase.label,class:"mr-10 state"},null,8,["color","icon","label"])):(0,r.createCommentVNode)("",!0)])])]),a.value.isNew?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",Me,[(0,r.createElementVNode)("div",$e,[(0,r.createVNode)(i,{name:e.t("harvester.host.disk.storageAvailable.label"),value:a.value.storageAvailable},null,8,["name","value"])]),(0,r.createElementVNode)("div",De,[(0,r.createVNode)(i,{name:e.t("harvester.host.disk.storageScheduled.label"),value:a.value.storageScheduled},null,8,["name","value"])]),(0,r.createElementVNode)("div",Oe,[(0,r.createVNode)(i,{name:e.t("harvester.host.disk.storageMaximum.label"),value:a.value.storageMaximum},null,8,["name","value"])])])),t[2]||(t[2]=(0,r.createElementVNode)("hr",{class:"mt-10"},null,-1))])),(0,r.createElementVNode)("div",Re,[(0,r.createElementVNode)("div",Pe,[(0,r.createVNode)(i,{name:e.t("generic.name"),value:a.value.displayName},null,8,["name","value"])]),a.value.path?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ie,[(0,r.createVNode)(i,{name:e.t("harvester.host.disk.path.label"),value:a.value.path},null,8,["name","value"])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",Le,[(0,r.createVNode)(i,{name:e.t("harvester.host.disk.provisioner"),value:o.provisioner},null,8,["name","value"])])])],32)}var He=a(41418),Ke=a(154),je=a(10196),Fe={emits:["update:value"],components:{LabelValue:p.A,BadgeState:He.j,Banner:re.l,Tag:d.A,RadioGroup:je.z},mixins:[Ke.A],props:{value:{type:Object,default:()=>({})},disks:{type:Array,default:()=>[]},mode:{type:String,default:"edit"}},data(){return{}},computed:{targetDisk(){return this.disks.find((e=>e.name===this.value.name))},schedulableTooltipMessage(){const{name:e,path:t}=this.value;return this.targetDisk&&!this.targetDisk.allowScheduling&&e&&t?this.t("harvester.host.disk.allowScheduling.tooltip",{name:e,path:t}):this.schedulableCondition.message},allowSchedulingOptions(){return[{label:this.t("generic.enabled"),value:!0},{label:this.t("generic.disabled"),value:!1}]},evictionRequestedOptions(){return[{label:this.t("generic.yes"),value:!0},{label:this.t("generic.no"),value:!1}]},provisionPhase(){return this.value?.blockDevice?.provisionPhase||{}},mountedMessage(){const e=this.value?.blockDevice?.metadata?.state||{};return e?.error?e?.message:""},provisioner(){let e=`harvester.host.disk.storage.longhorn.${V.Zd}.label`;return this.value?.blockDevice?.spec?.provisioner.longhorn&&(e=`harvester.host.disk.storage.longhorn.${this.value.blockDevice.spec.provisioner.longhorn.engineVersion}.label`),this.value?.blockDevice?.spec?.provisioner.lvm&&(e="harvester.host.disk.storage.lvm.label"),this.t(e)}},methods:{update(){this.$emit("update:value",this.value)},canEditPath(e){return!!this.mountedMessage||!(!e.isNew||!e.originPath)}}};a(91810);const qe=(0,ue.A)(Fe,[["render",Ue],["__scopeId","data-v-2f2890f0"]]);var Je=qe;const Ge={class:"row"},ze={class:"col span-12"},Qe={class:"pull-right"},We={class:"row mt-10"},Ye={class:"col span-6"},Xe={class:"col span-6"},Ze={class:"row mt-20"},et={class:"col span-12"};function tt(e,t,a,s,l,o){const n=(0,r.resolveComponent)("BadgeState"),c=(0,r.resolveComponent)("LabelValue"),i=(0,r.resolveComponent)("LinkStatus"),d=(0,r.resolveComponent)("ArrayListGrouped"),u=(0,r.resolveDirective)("clean-tooltip");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createElementVNode)("div",Ge,[(0,r.createElementVNode)("div",ze,[(0,r.createElementVNode)("div",Qe,[(0,r.createTextVNode)((0,r.toDisplayString)(e.t("resourceTabs.conditions.tab"))+": ",1),(0,r.withDirectives)((0,r.createVNode)(n,{color:"True"===o.readyCondition.status?"bg-success":"bg-error",icon:"True"===o.readyCondition.status?"icon-checkmark":"icon-warning",label:e.t("tableHeaders.ready"),class:"mr-10 ml-10 state"},null,8,["color","icon","label"]),[[u,o.readyCondition.message]])])])]),(0,r.createElementVNode)("div",We,[(0,r.createElementVNode)("div",Ye,[(0,r.createVNode)(c,{name:e.t("harvester.network.clusterNetwork.label"),value:a.value.status.clusterNetwork},null,8,["name","value"])]),(0,r.createElementVNode)("div",Xe,[(0,r.createVNode)(c,{name:e.t("harvester.vlanStatus.vlanConfig.label"),value:a.value.status.vlanConfig},null,8,["name","value"])])]),(0,r.createElementVNode)("div",Ze,[(0,r.createElementVNode)("div",et,[(0,r.createVNode)(d,{value:o.linkStatus,"onUpdate:value":t[0]||(t[0]=e=>o.linkStatus=e),mode:a.mode,"can-remove":!1},{default:(0,r.withCtx)((e=>[(0,r.createVNode)(i,{value:e.row.value,mode:a.mode},null,8,["value","mode"])])),_:1},8,["value","mode"])])])])}var at=a(14220);const rt={class:"row mt-10"},st={class:"col span-6"},lt={class:"col span-6"},ot={class:"row mt-10"},nt={class:"col span-6"},ct={class:"col span-6"},it={class:"row mt-10"},dt={key:0,class:"col span-6"};function ut(e,t,a,s,l,o){const n=(0,r.resolveComponent)("LabelValue");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createElementVNode)("div",rt,[(0,r.createElementVNode)("div",st,[(0,r.createVNode)(n,{name:e.t("generic.name"),value:a.value.name},null,8,["name","value"])]),(0,r.createElementVNode)("div",lt,[(0,r.createVNode)(n,{name:e.t("tableHeaders.state"),value:a.value.state},null,8,["name","value"])])]),(0,r.createElementVNode)("div",ot,[(0,r.createElementVNode)("div",nt,[(0,r.createVNode)(n,{name:e.t("tableHeaders.type"),value:a.value.type},null,8,["name","value"])]),(0,r.createElementVNode)("div",ct,[(0,r.createVNode)(n,{name:e.t("harvester.fields.macAddress"),value:a.value.mac},null,8,["name","value"])])]),(0,r.createElementVNode)("div",it,["true"===a.value.promiscuous?((0,r.openBlock)(),(0,r.createElementBlock)("div",dt,[(0,r.createVNode)(n,{name:e.t("harvester.fields.promiscuous"),value:a.value.promiscuous},{value:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)("true"===a.value.promiscuous?e.t("generic.yes"):e.t("generic.no")),1)])),_:1},8,["name","value"])])):(0,r.createCommentVNode)("",!0)])])}var mt={name:"LinkStatus",components:{LabelValue:p.A},props:{value:{type:Object,required:!0},mode:{type:String,default:at.YQ}}};const vt=(0,ue.A)(mt,[["render",ut]]);var pt=vt,ht={name:"HarvesterHostNetwork",components:{LabelValue:p.A,LinkStatus:pt,ArrayListGrouped:h.A,BadgeState:He.j},props:{value:{type:Object,required:!0},mode:{type:String,default:at.YQ}},computed:{conditions(){return this.value?.status?.conditions||[]},readyCondition(){return(0,C.jq)(this.conditions,"type","ready")||{}},linkStatus(){const e=this.value?.status?.linkMonitor,t=this.value?.status?.node,a=this.$store.getters["currentProduct"].inStore,r=this.$store.getters[`${a}/all`](A.rk.LINK_MONITOR),s=(r.filter((t=>t.id===e))||[])[0]||{};return s?.status?.linkStatus?.[t]||[]}}};const kt=(0,ue.A)(ht,[["render",tt]]);var bt=kt;const yt={class:"row mb-20"},gt={class:"col span-4"},Nt={key:0,class:"row mb-20"},Vt={class:"col span-4"},ft={class:"col span-4"},wt={class:"col span-4"},Et={key:1},Ct={class:"row mb-20"},St={class:"col span-4"},Bt={class:"col span-4"},At={class:"col span-4"},Tt={class:"row mb-20"},xt={class:"col span-4"},_t={class:"col span-4"},Mt={class:"row mb-20"},$t={class:"col span-4"},Dt={class:"col span-4"},Ot={class:"col span-4"},Rt={class:"row mb-20"},Pt={class:"col span-4"},It={class:"col span-4"},Lt={class:"col span-4"},Ut={class:"row mb-20"},Ht={class:"col span-4"},Kt={class:"col span-4"};function jt(e,t,a,s,l,o){const n=(0,r.resolveComponent)("LabelValue"),c=(0,r.resolveComponent)("t");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[l.ksmtuned.status?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(e.t("harvester.host.ksmtuned.configure")),1),(0,r.createElementVNode)("div",yt,[(0,r.createElementVNode)("div",gt,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.run"),value:o.runText},null,8,["name","value"])])]),o.showRunInformation?((0,r.openBlock)(),(0,r.createElementBlock)("div",Nt,[(0,r.createElementVNode)("div",Vt,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.thresCoef"),value:o.thresCoef},null,8,["name","value"])]),(0,r.createElementVNode)("div",ft,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.mode"),value:o.modeText},null,8,["name","value"])]),(0,r.createElementVNode)("div",wt,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.enableMergeNodes"),value:o.mergeNodesText},null,8,["name","value"])])])):(0,r.createCommentVNode)("",!0),o.showRunInformation?((0,r.openBlock)(),(0,r.createElementBlock)("div",Et,[t[0]||(t[0]=(0,r.createElementVNode)("hr",{class:"divider"},null,-1)),(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.t("harvester.host.ksmtuned.parameters.title")),1),(0,r.createElementVNode)("div",Ct,[(0,r.createElementVNode)("div",St,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.parameters.boost"),value:l.ksmtuned.spec.ksmtunedParameters.boost},null,8,["name","value"])]),(0,r.createElementVNode)("div",Bt,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.parameters.decay"),value:l.ksmtuned.spec.ksmtunedParameters.decay},null,8,["name","value"])]),(0,r.createElementVNode)("div",At,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.parameters.sleepMsec"),value:l.ksmtuned.spec.ksmtunedParameters.sleepMsec},null,8,["name","value"])])]),(0,r.createElementVNode)("div",Tt,[(0,r.createElementVNode)("div",xt,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.parameters.minPages"),value:l.ksmtuned.spec.ksmtunedParameters.minPages},null,8,["name","value"])]),(0,r.createElementVNode)("div",_t,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.parameters.maxPages"),value:l.ksmtuned.spec.ksmtunedParameters.maxPages},null,8,["name","value"])])])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",null,[t[1]||(t[1]=(0,r.createElementVNode)("hr",{class:"divider"},null,-1)),(0,r.createElementVNode)("h3",null,[(0,r.createVNode)(c,{k:"harvester.host.ksmtuned.statistics.title",raw:!0})]),(0,r.createElementVNode)("div",Mt,[(0,r.createElementVNode)("div",$t,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.ksmStatus")},{value:(0,r.withCtx)((()=>[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(o.ksmdPhaseTextColor)},(0,r.toDisplayString)(o.ksmdPhase),3)])),_:1},8,["name"])]),(0,r.createElementVNode)("div",Dt,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.sharing"),value:l.ksmtuned.status.sharing},null,8,["name","value"])]),(0,r.createElementVNode)("div",Ot,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.shared"),value:l.ksmtuned.status.shared},null,8,["name","value"])])]),(0,r.createElementVNode)("div",Rt,[(0,r.createElementVNode)("div",Pt,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.unshared"),value:l.ksmtuned.status.unshared},null,8,["name","value"])]),(0,r.createElementVNode)("div",It,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.volatile"),value:l.ksmtuned.status.volatile},null,8,["name","value"])]),(0,r.createElementVNode)("div",Lt,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.fullScans"),value:l.ksmtuned.status.fullScans},null,8,["name","value"])])]),(0,r.createElementVNode)("div",Ut,[(0,r.createElementVNode)("div",Ht,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.stableNodeDups"),value:l.ksmtuned.status.stableNodeDups},null,8,["name","value"])]),(0,r.createElementVNode)("div",Kt,[(0,r.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.stableNodeChains"),value:l.ksmtuned.status.stableNodeChains},null,8,["name","value"])])])])],64)):(0,r.createCommentVNode)("",!0)])}var Ft=a(27547),qt={name:"HarvesterKsmtuned",components:{LabelValue:p.A},props:{mode:{type:String,required:!0},node:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await this.$store.dispatch(`${e}/findAll`,{type:A.rk.KSTUNED});this.ksmtuned=t.find((e=>e.id===this.node.id))},data(){return{ksmtuned:{}}},computed:{modeText(){const e=this.ksmtuned.spec.mode;return Ft.ksmtunedMode.find((t=>t.value===e)).label},thresCoef(){return`${this.ksmtuned.spec.thresCoef} %`},runText(){const e=this.ksmtuned.spec.run;return Ft.ksmtunedRunOption.find((t=>t.value===e)).label},showRunInformation(){return"run"===this.ksmtuned.spec.run},mergeNodesText(){return this.ksmtuned.spec?.mergeAcrossNodes?this.t("harvester.host.ksmtuned.enable"):this.t("harvester.host.ksmtuned.disable")},ksmdPhase(){return this.ksmtuned?.status?.ksmdPhase},ksmdPhaseTextColor(){return"Running"===this.ksmdPhase?"text-success":"text-warning"}}};const Jt=(0,ue.A)(qt,[["render",jt]]);var Gt=Jt;const zt={key:0},Qt={key:1},Wt={class:"row mb-20"},Yt={class:"col span-6"},Xt={class:"col span-6"},Zt={class:"row"},ea={class:"col span-6"},ta={class:"col span-6"},aa={class:"row mt-20"},ra={class:"col span-6"},sa={key:0,class:"col span-6"},la={key:2,class:"row"},oa={class:"col span-6"};function na(e,t,a,s,l,o){const n=(0,r.resolveComponent)("Banner"),c=(0,r.resolveComponent)("LabelValue"),i=(0,r.resolveComponent)("RadioGroup");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[a.inventory.warningMessages.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",zt,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a.inventory.warningMessages,((e,t)=>((0,r.openBlock)(),(0,r.createBlock)(n,{key:t,color:"error",label:e.text},null,8,["label"])))),128))])):(0,r.createCommentVNode)("",!0),l.enableInventory?((0,r.openBlock)(),(0,r.createElementBlock)("div",Qt,[(0,r.createElementVNode)("div",Wt,[(0,r.createElementVNode)("div",Yt,[(0,r.createVNode)(c,{name:e.t("harvester.seeder.inventory.host.label"),value:l.value.spec.baseboardSpec.connection.host},null,8,["name","value"])]),(0,r.createElementVNode)("div",Xt,[(0,r.createVNode)(c,{name:e.t("harvester.seeder.inventory.port.label"),value:l.value.spec.baseboardSpec.connection.port},null,8,["name","value"])])]),(0,r.createElementVNode)("div",Zt,[(0,r.createElementVNode)("div",ea,[(0,r.createVNode)(c,{name:e.t("harvester.seeder.inventory.insecureTLS.label"),value:l.value.spec.baseboardSpec.connection.insecureTLS?e.t("generic.yes"):e.t("generic.no")},null,8,["name","value"])]),(0,r.createElementVNode)("div",ta,[(0,r.createVNode)(c,{name:e.t("harvester.seeder.inventory.secret.label"),value:o.selectedSecret},null,8,["name","value"])])]),(0,r.createElementVNode)("div",aa,[(0,r.createElementVNode)("div",ra,[(0,r.createVNode)(c,{name:e.t("harvester.seeder.inventory.event.label"),value:l.value.spec.events.enabled?e.t("generic.enabled"):e.t("generic.disabled")},null,8,["name","value"])]),l.value.spec.events.enabled?((0,r.openBlock)(),(0,r.createElementBlock)("div",sa,[(0,r.createVNode)(c,{name:e.t("harvester.seeder.inventory.pollingInterval.label"),value:l.value.spec.events.pollingInterval},null,8,["name","value"])])):(0,r.createCommentVNode)("",!0)])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",la,[(0,r.createElementVNode)("div",oa,[(0,r.createVNode)(i,{value:l.enableInventory,"onUpdate:value":t[0]||(t[0]=e=>l.enableInventory=e),options:[{label:e.t("generic.enabled"),value:!0},{label:e.t("generic.disabled"),value:!1}],mode:a.mode,name:"enableInventory"},null,8,["value","options","mode"])])]))])}var ca={name:"HarvesterSeeder",components:{RadioGroup:je.z,LabelValue:p.A,Banner:re.l},props:{mode:{type:String,required:!0},node:{type:Object,required:!0},inventory:{type:Object,required:!0}},data(){const e=!!this.inventory?.id;return{enableInventory:e,value:this.inventory}},computed:{selectedSecret(){const e=this.value.spec?.baseboardSpec?.connection?.authSecretRef?.namespace,t=this.value?.spec?.baseboardSpec?.connection?.authSecretRef?.name;return e&&t?`${e}/${t}`:"N/A"}}};const ia=(0,ue.A)(ca,[["render",na]]);var da=ia;const ua="longhorn-system";var ma={name:"DetailHost",components:{Tabbed:u.A,Tab:m.A,Tag:d.A,Basic:ve,Instance:we,ArrayListGrouped:h.A,Disk:Je,InfoBox:v.A,VlanStatus:bt,LabelValue:p.A,HarvesterKsmtuned:Gt,Loading:k.A,SortableTable:b.A,HarvesterSeeder:da,Banner:y.A},mixins:[N.A],props:{value:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={nodes:this.$store.dispatch("harvester/findAll",{type:V.NW}),pods:this.$store.dispatch(`${e}/findAll`,{type:V.Sm})};this.$store.getters["harvester/schemaFor"](A.rk.VLAN_STATUS)&&(t.hostNetworks=this.$store.dispatch("harvester/findAll",{type:A.rk.VLAN_STATUS})),this.$store.getters["harvester/schemaFor"](A.rk.BLOCK_DEVICE)&&(t.blockDevices=this.$store.dispatch("harvester/findAll",{type:A.rk.BLOCK_DEVICE})),this.$store.getters["harvester/schemaFor"](V.oe.NODES)&&(t.longhornNodes=this.$store.dispatch("harvester/findAll",{type:V.oe.NODES})),this.$store.getters["harvester/schemaFor"](A.rk.LINK_MONITOR)&&(t.linkMonitors=this.$store.dispatch("harvester/findAll",{type:A.rk.LINK_MONITOR})),this.$store.getters["harvester/schemaFor"](A.rk.ADD_ONS)&&(t.addons=this.$store.dispatch(`${e}/findAll`,{type:A.rk.ADD_ONS})),this.$store.getters["harvester/schemaFor"](A.rk.INVENTORY)&&(t.inventories=this.$store.dispatch(`${e}/findAll`,{type:A.rk.INVENTORY}));const a=await(0,w.kR)(t),r=(a.hostNetworks||[]).find((e=>this.value.id===e.attachNodeName));this.loadMetrics(),r&&(this.hostNetworkResource=r);const s=this.$store.getters[`${e}/all`](A.rk.BLOCK_DEVICE),l=s.filter((e=>{const t=e?.spec?.nodeName===this.value.id,a=(0,C.jq)(this.longhornDisks,"name",e.metadata.name);return e?.isProvisioned&&t&&!a})).map((e=>({isNew:!0,name:e?.metadata?.name,originPath:e?.spec?.fileSystem?.mountPoint,path:e?.spec?.fileSystem?.mountPoint,blockDevice:e,displayName:e?.displayName,forceFormatted:e?.spec?.fileSystem?.forceFormatted||!1}))),o=[...this.longhornDisks,...l];this.disks=o,this.newDisks=(0,S.o8)(o);const n=this.$store.getters[`${e}/all`](A.rk.ADD_ONS),c=n.find((e=>"harvester-system/harvester-seeder"===e.id)),i=!!c&&c?.spec?.enabled;if(i){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](A.rk.INVENTORY)||[],a=t.find((e=>e.id===`harvester-system/${this.value.id}`));a?this.inventory=a:(this.inventory=await this.$store.dispatch(`${e}/create`,{type:A.rk.INVENTORY,metadata:{name:this.value.id,namespace:"harvester-system"}}),this.inventory.applyDefaults())}},data(){return{metrics:null,mode:"view",hostNetworkResource:null,newDisks:[],disks:[],allEvents:[],didLoadEvents:!1,inventory:{}}},computed:{...(0,i.L8)({t:"i18n/t"}),longhornDisks(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/byId`](V.oe.NODES,`longhorn-system/${this.value.id}`),a=t?.status?.diskStatus||{},r=t?.spec?.disks||{},s={increment:1024,minExponent:3,maxExponent:3,maxPrecision:2,suffix:g.jx},l=Object.keys(a).map((t=>{const l=this.$store.getters[`${e}/byId`](A.rk.BLOCK_DEVICE,`longhorn-system/${t}`);return{...a[t],...r?.[t],name:t,isNew:!1,storageReserved:(0,E.Mo)(r[t]?.storageReserved,s),storageAvailable:(0,E.Mo)(a[t]?.storageAvailable,s),storageMaximum:(0,E.Mo)(a[t]?.storageMaximum,s),storageScheduled:(0,E.Mo)(a[t]?.storageScheduled,s),blockDevice:l,displayName:l?.displayName||t,forceFormatted:l?.spec?.fileSystem?.forceFormatted||!1,tags:r?.[t]?.tags||[]}}));return l},hasKsmtunedSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[`${e}/schemaFor`](A.rk.KSTUNED)},hasBlockDevicesSchema(){return!!this.$store.getters["harvester/schemaFor"](A.rk.BLOCK_DEVICE)},hasHostNetworksSchema(){return!!this.$store.getters["harvester/schemaFor"](A.rk.VLAN_STATUS)},vlanStatuses(){const e=this.$store.getters["currentProduct"].inStore,t=this.value.id,a=this.$store.getters[`${e}/all`](A.rk.VLAN_STATUS);return a.filter((e=>e?.status?.node===t))||[]},longhornNode(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](V.oe.NODES);return t.find((e=>e.id===`${ua}/${this.value.id}`))},events(){return this.allEvents.filter((e=>e.involvedObject?.uid===this.value?.metadata?.uid&&"SeederUpdated"!==e.reason)).map((e=>({reason:`${e.reason||this.t("generic.unknown")}${e.count>1?` (${e.count})`:""}`.trim(),message:e.message||this.t("generic.unknown"),date:e.lastTimestamp||e.firstTimestamp||e.metadata.creationTimestamp,eventType:e.eventType})))},eventHeaders(){return[{name:"reason",label:this.t("tableHeaders.reason"),value:"reason",sort:"reason"},{name:"message",label:this.t("tableHeaders.message"),value:"message",sort:"message"},{name:"date",label:this.t("tableHeaders.updated"),value:"date",sort:"date:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125}]},seederEnabled(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](A.rk.ADD_ONS),a=t.find((e=>"harvester-system/harvester-seeder"===e.id));return!!a&&a?.spec?.enabled},ntpSync(){const e=this.value.metadata?.annotations?.[f.r.NODE_NTP_SYNC_STATUS];let t=null;if(!e)return t;try{t=JSON.parse(e)}catch(a){this.$store.dispatch("growl/fromError",{title:this.t("generic.notification.title.error",{name:(0,B.ZD)(this.value.metadata.name)}),err:a},{root:!0})}return t},ntpSyncedStatus(){const e=this.ntpSync?.ntpSyncStatus;return"disabled"===e?{status:"disabled",warning:{key:"harvester.host.ntp.ntpSyncStatus.isDisabled"}}:"unsynced"===e?{status:"unsynced",warning:{key:"harvester.host.ntp.ntpSyncStatus.isUnsynced",current:this.ntpSync?.currentNtpServers?`<code>${this.ntpSync.currentNtpServers}</code>`:""}}:{}}},methods:{async loadMetrics(){const e=this.$store.getters["harvester/schemaFor"](V.$v.NODE);e&&(this.metrics=await this.$store.dispatch("harvester/find",{type:V.$v.NODE,id:this.value.id,opt:{force:!0,watch:!1}}),this.$forceUpdate())},tabChange(e){this.didLoadEvents||"events"!==e?.selectedName||this.$store.dispatch("harvester/findAll",{type:V.ll}).then((e=>{this.allEvents=e,this.didLoadEvents=!0}))}}};const va=(0,ue.A)(ma,[["render",c]]);var pa=va},39562:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var r=a(9274);const s={class:"mt-10"},l={class:"mt-10"};function o(e,t,a,o,n,c){const i=(0,r.resolveComponent)("Loading"),d=(0,r.resolveComponent)("CopyCode"),u=(0,r.resolveComponent)("Tab"),m=(0,r.resolveComponent)("ResourceTabs"),v=(0,r.resolveDirective)("clean-html");return e.$fetchState.pending?((0,r.openBlock)(),(0,r.createBlock)(i,{key:0})):((0,r.openBlock)(),(0,r.createBlock)(m,{key:1,value:a.value,"default-tab":c.defaultTab,onInput:t[0]||(t[0]=t=>e.$emit("input",t))},{default:(0,r.withCtx)((()=>[c.showRegistration?((0,r.openBlock)(),(0,r.createBlock)(u,{key:0,name:"registration",label:e.t("cluster.tabs.registration"),weight:2,class:"p-10"},{default:(0,r.withCtx)((()=>[(0,r.withDirectives)((0,r.createElementVNode)("h4",null,null,512),[[v,e.t("cluster.harvester.registration.step1",null,!0)]]),(0,r.withDirectives)((0,r.createElementVNode)("h4",s,null,512),[[v,e.t("cluster.harvester.registration.step2",null,!0)]]),(0,r.withDirectives)((0,r.createElementVNode)("h4",l,null,512),[[v,e.t("cluster.harvester.registration.step3",null,!0)]]),(0,r.createVNode)(d,{class:"m-10 p-10"},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(c.registrationURL),1)])),_:1})])),_:1},8,["label"])):(0,r.createCommentVNode)("",!0)])),_:1},8,["value","default-tab"]))}var n=a(87619),c=a(43870);function i(e,t,a,s,l,o){const n=(0,r.resolveDirective)("clean-tooltip");return(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("code",{class:"copy",onClick:t[0]||(t[0]=(0,r.withModifiers)(((...e)=>o.clicked&&o.clicked(...e)),["stop","prevent"]))},[(0,r.renderSlot)(e.$slots,"default",{},void 0,!0)])),[[n,o.tooltip]])}var d=a(68851),u=a(48881),m=a(99726);function v(e){return e.text?e.text:(0,d.cy)(e)?e.map(v).join(" "):e.children?(0,d.cy)(e.children)?e.children.map(v).join(" "):e.children:""}var p={emits:["copied","error"],data(){return{copied:!1}},methods:{clicked(e){e.stopPropagation(),e.preventDefault();const t=v(this.$slots.default()).trim();(0,u.e)(t).then((()=>{this.copied=!0,setTimeout((()=>{this.copied=!1}),2e3),this.$emit("copied")})).catch((e=>{this.$emit("error",(0,m.rz)(e))}))}},computed:{tooltip(){const e=this.copied?"Copied!":"Click to Copy";return{content:e,hideOnTargetClick:!1}}}},h=(a(25635),a(47433));const k=(0,h.A)(p,[["render",i],["__scopeId","data-v-2163c48c"]]);var b=k,y=a(49584),g=a(88339),N={emits:["input"],components:{Loading:n.A,ResourceTabs:c.A,Tab:y.A,CopyCode:b},props:{value:{type:Object,default:()=>({})}},async fetch(){await this.value.waitForProvisioner();const e={clusterToken:this.value.getOrCreateToken()},t=await(0,g.kR)(e);this.allNodes=t.allNodes||[],this.allNodePools=t.allNodePools||[],this.clusterToken=t.clusterToken},data(){return{clusterToken:null}},computed:{defaultTab(){return this.showRegistration&&!this.machines?.length?"registration":""},showRegistration(){return!!this.clusterToken&&(!!this.value.isImported&&!this.value.mgmt?.isReady)},registrationURL(){return(this.clusterToken?.command||"").replace("kubectl apply -f ","")}}};const V=(0,h.A)(N,[["render",o]]);var f=V},1948:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var r=a(9274);const s={class:"row"},l={class:"col span-6 mb-20"},o={class:"col span-6 mb-20"},n={class:"row"},c={class:"col span-6 mb-20"},i={class:"col span-6 mb-20"},d={class:"row"},u={class:"col span-6 mb-20"},m={class:"col span-6 mb-20"};function v(e,t,a,v,p,h){const k=(0,r.resolveComponent)("LabelValue"),b=(0,r.resolveComponent)("Tab"),y=(0,r.resolveComponent)("BackupList"),g=(0,r.resolveComponent)("SnapshotList"),N=(0,r.resolveComponent)("Tabbed");return(0,r.openBlock)(),(0,r.createBlock)(N,(0,r.mergeProps)(e.$attrs,{class:"mt-15","side-tabs":!0}),{default:(0,r.withCtx)((()=>[(0,r.createVNode)(b,{name:"basic",label:e.t("harvester.virtualMachine.detail.tabs.basics"),class:"bordered-table",weight:99},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",l,[(0,r.createVNode)(k,{name:e.t("harvester.schedule.detail.namespace"),value:a.value.metadata.namespace},null,8,["name","value"])]),(0,r.createElementVNode)("div",o,[(0,r.createVNode)(k,{name:e.t("harvester.schedule.detail.sourceVM"),value:a.value.spec.vmbackup.source.name},null,8,["name","value"])])]),(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",c,[(0,r.createVNode)(k,{name:e.t("harvester.schedule.cron"),value:h.cronExpression},null,8,["name","value"])]),(0,r.createElementVNode)("div",i,[(0,r.createVNode)(k,{name:e.t("harvester.schedule.scheduleType"),value:a.value.spec.vmbackup.type},null,8,["name","value"])])]),(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("div",u,[(0,r.createVNode)(k,{name:e.t("harvester.schedule.retain.label"),value:a.value.spec.retain},null,8,["name","value"])]),(0,r.createElementVNode)("div",m,[(0,r.createVNode)(k,{name:e.t("harvester.schedule.maxFailure.label"),value:a.value.spec.maxFailure},null,8,["name","value"])])])])),_:1},8,["label"]),h.isBackup?((0,r.openBlock)(),(0,r.createBlock)(b,{key:0,name:"backups",label:e.t("harvester.schedule.tabs.backups"),weight:89,class:"bordered-table"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(y,{id:a.value.id},null,8,["id"])])),_:1},8,["label"])):(0,r.createCommentVNode)("",!0),h.isSnapshot?((0,r.openBlock)(),(0,r.createBlock)(b,{key:1,name:"snapshots",label:e.t("harvester.schedule.tabs.snapshots"),weight:79,class:"bordered-table"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(g,{id:a.value.id},null,8,["id"])])),_:1},8,["label"])):(0,r.createCommentVNode)("",!0)])),_:1},16)}var p=a(39412),h=a(19485),k=a(49584),b=a(41837);const y={key:1};function g(e,t,a,s,l,o){const n=(0,r.resolveComponent)("router-link"),c=(0,r.resolveComponent)("ResourceTable");return(0,r.openBlock)(),(0,r.createBlock)(c,(0,r.mergeProps)(e.$attrs,{headers:o.headers,groupable:!1,rows:o.filteredRows,schema:l.schema,"key-field":"_key","default-sort-by":"age"}),{"col:name":(0,r.withCtx)((({row:e})=>[(0,r.createElementVNode)("td",null,[(0,r.createElementVNode)("span",null,[e?.status?.source?((0,r.openBlock)(),(0,r.createBlock)(n,{key:0,to:e.detailLocation},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e.nameDisplay),1)])),_:2},1032,["to"])):((0,r.openBlock)(),(0,r.createElementBlock)("span",y,(0,r.toDisplayString)(e.nameDisplay),1))])])])),_:1},16,["headers","rows","schema"])}var N=a(71680),V=a(68774),f=a(5662),w=a(32766),E=a(2602),C={name:"BackupList",components:{ResourceTable:N.A},props:{id:{type:String,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await(0,f.v)({backups:this.$store.dispatch(`${e}/findAll`,{type:w.rk.BACKUP})});this.rows=t.backups},data(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/schemaFor`](w.rk.BACKUP);return{rows:[],schema:t}},computed:{headers(){const e=[V.c4,{...V.o_,width:400},{name:"targetVM",labelKey:"tableHeaders.targetVm",value:"attachVM",align:"left",sort:"attachVM",formatter:"AttachVMWithName"},{name:"backupTarget",labelKey:"tableHeaders.backupTarget",value:"backupTarget",sort:"backupTarget",align:"left",formatter:"HarvesterBackupTargetValidation"},{name:"readyToUse",labelKey:"tableHeaders.readyToUse",value:"status.readyToUse",sort:"status.readyToUse",align:"center",formatter:"Checked"}];return this.hasBackupProgresses&&e.push({name:"backupProgress",labelKey:"tableHeaders.progress",value:"backupProgress",sort:"backupProgress",align:"left",formatter:"HarvesterBackupProgressBar"}),e.push(V.K),e},hasBackupProgresses(){return!!this.rows.find((e=>void 0!==e.status?.progress))},filteredRows(){let e=this.rows.filter((e=>e.spec?.type===b.aS.BACKUP));return this.id&&(e=e.filter((e=>e.metadata.annotations?.[E.r.SVM_BACKUP_ID]===this.id))),e}}},S=a(47433);const B=(0,S.A)(C,[["render",g]]);var A=B;const T={key:1};function x(e,t,a,s,l,o){const n=(0,r.resolveComponent)("router-link"),c=(0,r.resolveComponent)("ResourceTable");return(0,r.openBlock)(),(0,r.createBlock)(c,(0,r.mergeProps)(e.$attrs,{headers:o.headers,groupable:!1,rows:o.filteredRows,schema:l.schema,"key-field":"_key","default-sort-by":"age"}),{"col:name":(0,r.withCtx)((({row:e})=>[(0,r.createElementVNode)("td",null,[(0,r.createElementVNode)("span",null,[e?.status?.source?((0,r.openBlock)(),(0,r.createBlock)(n,{key:0,to:e.detailLocation},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(e.nameDisplay),1)])),_:2},1032,["to"])):((0,r.openBlock)(),(0,r.createElementBlock)("span",T,(0,r.toDisplayString)(e.nameDisplay),1))])])])),_:1},16,["headers","rows","schema"])}var _=a(61117),M={name:"SnapshotList",components:{ResourceTable:N.A},props:{id:{type:String,required:!0}},async fetch(){const e=await(0,f.v)({backups:this.$store.dispatch("harvester/findAll",{type:w.rk.BACKUP})});this.rows=e.backups},data(){return{rows:[],schema:_.schema}},computed:{headers(){return[V.c4,V.o_,{name:"targetVM",labelKey:"tableHeaders.targetVm",value:"attachVM",align:"left",formatter:"AttachVMWithName"},{name:"readyToUse",labelKey:"tableHeaders.readyToUse",value:"status.readyToUse",align:"center",formatter:"Checked"},V.K]},filteredRows(){let e=this.rows.filter((e=>e.spec?.type===b.aS.SNAPSHOT));return this.id&&(e=e.filter((e=>e.metadata.annotations?.[E.r.SVM_BACKUP_ID]===this.id))),e}}};const $=(0,S.A)(M,[["render",x]]);var D=$,O=a(37021),R=a.n(O),P={name:"ScheduleVmBackupDetail",components:{BackupList:A,SnapshotList:D,Tab:k.A,Tabbed:h.A,LabelValue:p.A},props:{value:{type:Object,required:!0}},computed:{isBackup(){return this.value.spec.vmbackup.type===b.aS.BACKUP},isSnapshot(){return this.value.spec.vmbackup.type===b.aS.SNAPSHOT},cronExpression(){let e="";try{e=R().toString(this.value.spec.cron,{verbose:!0})}catch(t){e=this.t("generic.invalidCron")}return e?`${this.value.spec.cron} (${e})`:this.value.spec.cron}}};a(27270);const I=(0,S.A)(P,[["render",v],["__scopeId","data-v-3a89cf31"]]);var L=I},84735:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return $}});var r=a(9274);const s={key:0,class:"row"},l={class:"col span-12"},o={class:"row mt-20"},n={class:"col span-6"},c={class:"col span-6"},i={key:1,class:"row"},d={class:"col span-6"},u={class:"col span-6"},m={key:2,class:"row"},v={class:"col span-6"},p={class:"col span-6"},h={key:3,class:"row"},k={class:"col span-6"},b={class:"col span-6"},y={key:4},g={key:0},N={class:"m-20 text-center"};function V(e,t,a,V,f,w){const E=(0,r.resolveComponent)("DetailText"),C=(0,r.resolveComponent)("Tab"),S=(0,r.resolveComponent)("ResourceTabs"),B=(0,r.resolveDirective)("t");return(0,r.openBlock)(),(0,r.createBlock)(S,{value:a.value,"need-events":!1,"need-related":!1,mode:e.mode,"onUpdate:value":t[0]||(t[0]=t=>e.$emit("input",t))},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(C,{name:"data",label:w.dataLabel},{default:(0,r.withCtx)((()=>[w.isRegistry||w.isBasicAuth?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[w.isRegistry?((0,r.openBlock)(),(0,r.createElementBlock)("div",s,[(0,r.createElementVNode)("div",l,[(0,r.createVNode)(E,{value:f.registryUrl,"label-key":"secret.registry.domainName"},null,8,["value"])])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",o,[(0,r.createElementVNode)("div",n,[(0,r.createVNode)(E,{value:f.username,"label-key":"secret.registry.username"},null,8,["value"])]),(0,r.createElementVNode)("div",c,[(0,r.createVNode)(E,{value:f.password,"label-key":"secret.registry.password",conceal:!0},null,8,["value"])])])],64)):w.isCertificate?((0,r.openBlock)(),(0,r.createElementBlock)("div",i,[(0,r.createElementVNode)("div",d,[(0,r.createVNode)(E,{value:f.key,"label-key":"secret.certificate.privateKey",conceal:!0},null,8,["value"])]),(0,r.createElementVNode)("div",u,[(0,r.createVNode)(E,{value:f.crt,"label-key":"secret.certificate.certificate"},null,8,["value"])])])):w.isSvcAcctToken?((0,r.openBlock)(),(0,r.createElementBlock)("div",m,[(0,r.createElementVNode)("div",v,[(0,r.createVNode)(E,{value:f.crt,"label-key":"secret.serviceAcct.ca"},null,8,["value"])]),(0,r.createElementVNode)("div",p,[(0,r.createVNode)(E,{value:f.key,"label-key":"secret.serviceAcct.token",conceal:!0},null,8,["value"])])])):w.isSsh?((0,r.openBlock)(),(0,r.createElementBlock)("div",h,[(0,r.createElementVNode)("div",k,[(0,r.createVNode)(E,{value:f.username,"label-key":"secret.ssh.public"},null,8,["value"])]),(0,r.createElementVNode)("div",b,[(0,r.createVNode)(E,{value:f.password,"label-key":"secret.ssh.private",conceal:!0},null,8,["value"])])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",y,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(w.parsedRows,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"entry"},[(0,r.createVNode)(E,{value:e.value,label:e.key,conceal:!0},null,8,["value","label"])])))),128)),w.parsedRows.length?(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",g,[(0,r.withDirectives)((0,r.createElementVNode)("div",N,null,512),[[B,"sortableTable.noRows"]])]))]))])),_:1},8,["label"])])),_:1},8,["value","mode"])}var f=a(17259),w=a(4514),E=a(91825),C=a(43870),S=a(67243),B=a(49584);const A=[f.J.OPAQUE,f.J.DOCKER_JSON,f.J.TLS,f.J.SSH,f.J.BASIC],T=["DockerHub","Quay.io","Artifactory","Custom"];var x={emits:["input"],components:{ResourceTabs:C.A,DetailText:S.A,Tab:B.A},mixins:[E.A],props:{value:{type:Object,default:()=>({})}},data(){let e,t,a,r,s,l="Custom";if(this.value._type===f.J.DOCKER_JSON){const r=(0,w.u)(this.value.data[".dockerconfigjson"]),{auths:s}=JSON.parse(r);a=Object.keys(s)[0],"index.docker.io/v1/"===a?l="DockerHub":"quay.io"===a?l="Quay.io":a.includes("artifactory")&&(l="Artifactory"),e=s[a].username,t=s[a].password}const o=this.value?.data||{};return this.value._type===f.J.TLS&&(r="edit"===this.mode?"":(0,w.u)(o["tls.key"]),s=(0,w.u)(o["tls.crt"])),this.value._type===f.J.SERVICE_ACCT&&(r=(0,w.u)(o["token"]),s=(0,w.u)(o["ca.crt"])),this.value._type===f.J.BASIC&&(e=(0,w.u)(o.username||""),t=(0,w.u)(o.password||"")),this.value._type===f.J.SSH&&(e=(0,w.u)(o["ssh-publickey"]||""),t=(0,w.u)(o["ssh-privatekey"]||"")),this.value._type||(this.value["_type"]=f.J.OPAQUE),{types:A,registryAddresses:T,registryProvider:l,username:e,password:t,registryUrl:a,key:r,crt:s,relatedServices:[]}},computed:{isCertificate(){return this.value._type===f.J.TLS},isSvcAcctToken(){return this.value._type===f.J.SERVICE_ACCT},isRegistry(){return this.value._type===f.J.DOCKER_JSON},isSsh(){return this.value._type===f.J.SSH},isBasicAuth(){return this.value._type===f.J.BASIC},parsedRows(){const e=[],{data:t={}}=this.value;return Object.keys(t).forEach((a=>{const r=(0,w.u)(t[a]);e.push({key:a,value:r})})),e},dataLabel(){switch(this.value._type){case f.J.TLS:return this.t("secret.certificate.certificate");case f.J.SSH:return this.t("secret.ssh.keys");case f.J.BASIC:return this.t("secret.authentication");default:return this.t("secret.data")}}}},_=(a(98326),a(47433));const M=(0,_.A)(x,[["render",V],["__scopeId","data-v-16758c8a"]]);var $=M},13077:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var r=a(9274);const s={class:"row"},l={class:"col span-6 mb-20"},o={class:"col span-6 mb-20"},n={class:"row"},c={class:"col span-6 mb-20"},i={class:"col span-6 mb-20"},d={class:"mb-20"},u={class:"row"},m={class:"col span-6 mb-20"},v={class:"col span-6 mb-20"},p={key:0},h={key:1};function k(e,t,a,k,b,y){const g=(0,r.resolveComponent)("Loading"),N=(0,r.resolveComponent)("LabelValue"),V=(0,r.resolveComponent)("CpuMemory"),f=(0,r.resolveComponent)("Tab"),w=(0,r.resolveComponent)("Volume"),E=(0,r.resolveComponent)("Network"),C=(0,r.resolveComponent)("OverviewKeypairs"),S=(0,r.resolveComponent)("CloudConfig"),B=(0,r.resolveComponent)("Checkbox"),A=(0,r.resolveComponent)("Tabbed"),T=(0,r.resolveComponent)("CruResource");return e.$fetchState.pending?((0,r.openBlock)(),(0,r.createBlock)(g,{key:0})):((0,r.openBlock)(),(0,r.createBlock)(T,{key:1,"done-route":e.doneRoute,resource:a.value,mode:a.mode,"apply-hooks":e.applyHooks,onError:t[4]||(t[4]=t=>e.errors=t)},{default:(0,r.withCtx)((()=>[e.spec?((0,r.openBlock)(),(0,r.createBlock)(A,{key:0,"side-tabs":!0,onChanged:y.onTabChanged},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(f,{name:"Basics",label:e.t("harvester.virtualMachine.detail.tabs.basics")},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",l,[(0,r.createVNode)(N,{name:e.t("harvester.virtualMachine.detail.details.name"),value:y.name},null,8,["name","value"])]),(0,r.createElementVNode)("div",o,[(0,r.createVNode)(N,{name:e.t("harvester.fields.image"),value:y.imageName},null,8,["name","value"])])]),(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",c,[(0,r.createVNode)(N,{name:e.t("harvester.virtualMachine.detail.details.hostname"),value:y.hostname},null,8,["name","value"])]),(0,r.createElementVNode)("div",i,[(0,r.createVNode)(N,{name:e.t("harvester.virtualMachine.input.MachineType"),value:e.machineType},null,8,["name","value"])])]),(0,r.createElementVNode)("div",d,[(0,r.createVNode)(V,{cpu:e.cpu,mode:a.mode,memory:e.memory,"max-cpu":e.maxCpu,"max-memory":e.maxMemory,"enable-hot-plug":e.cpuMemoryHotplugEnabled},null,8,["cpu","mode","memory","max-cpu","max-memory","enable-hot-plug"])]),(0,r.createElementVNode)("div",u,[(0,r.createElementVNode)("div",m,[(0,r.createVNode)(N,{name:e.t("harvester.virtualMachine.detail.details.bootOrder")},{value:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("ul",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(y.disks,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:t},(0,r.toDisplayString)(e.bootOrder)+". "+(0,r.toDisplayString)(e.name)+" ("+(0,r.toDisplayString)(y.getDeviceType(e))+") ",1)))),128))])])])),_:1},8,["name"])]),(0,r.createElementVNode)("div",v,[(0,r.createVNode)(N,{name:e.t("harvester.virtualMachine.detail.details.CDROMs")},{value:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",null,[y.cdroms.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("ul",p,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(y.cdroms,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:t},(0,r.toDisplayString)(e.name),1)))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("span",h,(0,r.toDisplayString)(e.t("harvester.virtualMachine.detail.notAvailable")),1))])])),_:1},8,["name"])])])])),_:1},8,["label"]),(0,r.createVNode)(f,{name:"volume",label:e.t("harvester.tab.volume"),weight:-1},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(w,{value:e.diskRows,"onUpdate:value":t[0]||(t[0]=t=>e.diskRows=t),mode:a.mode},null,8,["value","mode"])])),_:1},8,["label"]),(0,r.createVNode)(f,{name:"network",label:e.t("harvester.tab.network"),weight:-2},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(E,{value:e.networkRows,"onUpdate:value":t[1]||(t[1]=t=>e.networkRows=t),mode:a.mode},null,8,["value","mode"])])),_:1},8,["label"]),(0,r.createVNode)(f,{name:"keypairs",label:e.t("harvester.virtualMachine.detail.tabs.keypairs"),class:"bordered-table",weight:-3},{default:(0,r.withCtx)((()=>[b.vm?((0,r.openBlock)(),(0,r.createBlock)(C,{key:0,value:b.vm,"onUpdate:value":t[2]||(t[2]=e=>b.vm=e)},null,8,["value"])):(0,r.createCommentVNode)("",!0)])),_:1},8,["label"]),(0,r.createVNode)(f,{name:"advanced",label:e.t("harvester.tab.advanced"),weight:-4},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(S,{ref:"yamlEditor","user-script":e.userScript,mode:a.mode,"network-script":e.networkScript},null,8,["user-script","mode","network-script"]),t[5]||(t[5]=(0,r.createElementVNode)("div",{class:"spacer"},null,-1)),(0,r.createVNode)(B,{value:e.installUSBTablet,"onUpdate:value":t[3]||(t[3]=t=>e.installUSBTablet=t),mode:a.mode,class:"check",type:"checkbox",label:e.t("harvester.virtualMachine.enableUsb")},null,8,["value","mode","label"])])),_:1},8,["label"])])),_:1},8,["onChanged"])):(0,r.createCommentVNode)("",!0)])),_:1},8,["done-route","resource","mode","apply-hooks"]))}var b=a(19485),y=a(49584),g=a(87619),N=a(43094),V=a(42200),f=a(39412),w=a(88339),E=a(91825),C=a(48249),S=a(32766),B=a(81111),A=a(63536),T=a(36632),x=a(86365),_=a(71574);const M="n/a";var $={name:"BackupDetail",components:{Volume:T["default"],Network:x["default"],CruResource:N.A,Tabbed:b.A,Loading:g.A,LabelValue:f.A,Tab:y.A,CloudConfig:_["default"],Checkbox:V.S,CpuMemory:B["default"],OverviewKeypairs:A.A},mixins:[E.A,C.Ay],inheritAttrs:!1,props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},async fetch(){await(0,w.kR)({allImages:this.$store.dispatch("harvester/findAll",{type:S.rk.IMAGE})})},data(){return{vm:null}},computed:{name(){return this.value?.metadata?.name||M},hostname(){return this?.spec?.template?.spec?.hostname},imageName(){const e=this.$store.getters["harvester/all"](S.rk.IMAGE)||[],t=e.find((e=>this.imageId===e.id));return t?.spec?.displayName||"-"},disks(){const e=this?.spec?.template?.spec?.domain?.devices?.disks||[];return e.filter((e=>!!e.bootOrder)).sort(((e,t)=>e.bootOrder<t.bootOrder?-1:1))},cdroms(){const e=this?.spec?.template?.spec?.domain?.devices?.disks||[];return e.filter((e=>!!e.cdrom))}},methods:{getDeviceType(e){return e.disk?"Disk":"CD-ROM"},isEmpty(e){return void 0!==e&&0===Object.keys(e).length},onTabChanged({tab:e}){"advanced"===e.name&&this.$refs.yamlEditor?.refresh()}}},D=a(47433);const O=(0,D.A)($,[["render",k]]);var R=O},94411:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return se}});var r=a(9274);const s={class:"row"},l={class:"col span-12"},o={key:0},n={key:1},c={class:"row"},i={class:"col span-12"},d={class:"row"},u={class:"col span-12"},m={class:"row"},v={class:"col span-12"},p={class:"row"},h={class:"col span-12"},k={key:0,class:"row mb-20"},b={class:"col span-12"},y={class:"text-label"},g={key:1},N={key:2,class:"text-muted"},V={key:1,class:"row mb-20"},f={class:"col span-12"},w={class:"text-label"},E={key:1},C={key:2,class:"text-muted"},S={class:"row"},B={class:"col span-12"},A={key:2,class:"row"},T={class:"col span-12"};function x(e,t,a,x,_,M){const $=(0,r.resolveComponent)("LabelValue"),D=(0,r.resolveComponent)("CopyToClipboardText"),O=(0,r.resolveComponent)("router-link"),R=(0,r.resolveComponent)("Tab"),P=(0,r.resolveComponent)("Storage"),I=(0,r.resolveComponent)("Tabbed");return(0,r.openBlock)(),(0,r.createBlock)(I,(0,r.mergeProps)(e.$attrs,{class:"mt-15","side-tabs":!0}),{default:(0,r.withCtx)((()=>[(0,r.createVNode)(R,{name:"detail",label:e.t("harvester.virtualMachine.detail.tabs.basics"),class:"bordered-table",weight:99},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",l,[M.isUpload?((0,r.openBlock)(),(0,r.createBlock)($,{key:0,name:e.t("harvester.image.fileName"),value:M.imageName,class:"mb-20"},null,8,["name","value"])):((0,r.openBlock)(),(0,r.createBlock)($,{key:1,name:e.t("harvester.image.url"),value:M.url,class:"mb-20"},{value:(0,r.withCtx)((()=>["-"!==M.url?((0,r.openBlock)(),(0,r.createElementBlock)("div",o,[(0,r.createVNode)(D,{text:M.url},null,8,["text"])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",n,(0,r.toDisplayString)(M.url),1))])),_:1},8,["name","value"]))])]),(0,r.createElementVNode)("div",c,[(0,r.createElementVNode)("div",i,[(0,r.createVNode)($,{name:e.t("harvester.image.size"),value:M.formattedValue,class:"mb-20"},null,8,["name","value"])])]),(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("div",u,[(0,r.createVNode)($,{name:e.t("harvester.image.virtualSize"),value:M.virtualSize,class:"mb-20"},null,8,["name","value"])])]),(0,r.createElementVNode)("div",m,[(0,r.createElementVNode)("div",v,[(0,r.createVNode)($,{name:e.t("nameNsDescription.description.label"),value:M.description,class:"mb-20"},null,8,["name","value"])])]),(0,r.createElementVNode)("div",p,[(0,r.createElementVNode)("div",h,[(0,r.createVNode)($,{name:e.t("harvester.image.isEncryption"),value:M.isEncryptedString,class:"mb-20"},null,8,["name","value"])])]),a.value.volumeEncryptionFeatureEnabled&&a.value.isEncrypted?((0,r.openBlock)(),(0,r.createElementBlock)("div",k,[(0,r.createElementVNode)("div",b,[(0,r.createElementVNode)("div",y,(0,r.toDisplayString)(e.t("harvester.image.encryptionSecret")),1),M.encryptionSecret&&M.secretLink?((0,r.openBlock)(),(0,r.createBlock)(O,{key:0,to:M.secretLink},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(M.encryptionSecret),1)])),_:1},8,["to"])):M.encryptionSecret?((0,r.openBlock)(),(0,r.createElementBlock)("span",g,(0,r.toDisplayString)(M.encryptionSecret),1)):((0,r.openBlock)(),(0,r.createElementBlock)("span",N," — "))])])):(0,r.createCommentVNode)("",!0),a.value.volumeEncryptionFeatureEnabled&&M.isEncryptedOrDecrypted?((0,r.openBlock)(),(0,r.createElementBlock)("div",V,[(0,r.createElementVNode)("div",f,[(0,r.createElementVNode)("div",w,(0,r.toDisplayString)(e.t("harvester.image.sourceImage")),1),M.sourceImageId&&M.sourceImageLink?((0,r.openBlock)(),(0,r.createBlock)(O,{key:0,to:M.sourceImageLink},{default:(0,r.withCtx)((()=>[(0,r.createTextVNode)((0,r.toDisplayString)(M.sourceImageId),1)])),_:1},8,["to"])):M.sourceImageId?((0,r.openBlock)(),(0,r.createElementBlock)("span",E,(0,r.toDisplayString)(M.sourceImageId),1)):((0,r.openBlock)(),(0,r.createElementBlock)("span",C," — "))])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",S,[(0,r.createElementVNode)("div",B,[(0,r.createVNode)($,{name:e.t("harvester.image.source"),value:M.sourceType,class:"mb-20"},null,8,["name","value"])])]),"-"!==M.errorMessage?((0,r.openBlock)(),(0,r.createElementBlock)("div",A,[(0,r.createElementVNode)("div",T,[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(e.t("tableHeaders.message")),1),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)({error:"-"!==M.errorMessage})},(0,r.toDisplayString)(M.errorMessage),3)])])):(0,r.createCommentVNode)("",!0)])),_:1},8,["label"]),(0,r.createVNode)(R,{name:"storage",label:e.t("harvester.storage.label"),weight:89,class:"bordered-table"},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(P,{value:a.value.spec.storageClassParameters,"onUpdate:value":t[0]||(t[0]=e=>a.value.spec.storageClassParameters=e)},null,8,["value"])])),_:1},8,["label"])])),_:1},16)}var _=a(78386),M=a(39412),$=a(2841),D=a(2602),O=a(32766),R=a(19485),P=a(49584),I=a(68851),L=a(76978),U=a(92043);const H={key:0,class:"row mb-20"},K={class:"col span-12"},j={key:1,class:"row mb-20"},F={class:"col span-12"},q={class:"row mb-20"},J={class:"col span-6"},G={class:"col span-6"},z={class:"row mb-20"},Q={class:"col span-6"};function W(e,t,a,s,l,o){const n=(0,r.resolveComponent)("LabelValue");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[a.value.nodeSelector?((0,r.openBlock)(),(0,r.createElementBlock)("div",H,[(0,r.createElementVNode)("div",K,[(0,r.createVNode)(n,{name:e.t("harvester.storage.nodeSelector.label"),value:a.value.nodeSelector},null,8,["name","value"])])])):(0,r.createCommentVNode)("",!0),a.value.diskSelector?((0,r.openBlock)(),(0,r.createElementBlock)("div",j,[(0,r.createElementVNode)("div",F,[(0,r.createVNode)(n,{name:e.t("harvester.storage.diskSelector.label"),value:a.value.diskSelector},null,8,["name","value"])])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",q,[(0,r.createElementVNode)("div",J,[(0,r.createVNode)(n,{name:e.t("harvester.storage.migratable.label"),value:o.migratable},null,8,["name","value"])]),(0,r.createElementVNode)("div",G,[(0,r.createVNode)(n,{name:e.t("harvester.storage.numberOfReplicas.label"),value:a.value.numberOfReplicas},null,8,["name","value"])])]),(0,r.createElementVNode)("div",z,[(0,r.createElementVNode)("div",Q,[(0,r.createVNode)(n,{name:e.t("harvester.storage.staleReplicaTimeout.label"),value:a.value.staleReplicaTimeout},null,8,["name","value"])])])])}var Y={props:{value:{type:Object,default:()=>{}}},components:{LabelValue:M.A},computed:{migratable(){return"true"===this.value.migratable?this.t("generic.yes"):this.t("generic.no")}}},X=a(47433);const Z=(0,X.A)(Y,[["render",W]]);var ee=Z,te=a(35664),ae={components:{CopyToClipboardText:_.A,Tab:P.A,Tabbed:R.A,LabelValue:M.A,Storage:ee},props:{value:{type:Object,required:!0}},async fetch(){if(this.value.volumeEncryptionFeatureEnabled){const e=this.$store.getters["currentProduct"].inStore;this.secrets=await this.$store.dispatch(`${e}/findAll`,{type:te.bB}),this.images=await this.$store.dispatch(`${e}/findAll`,{type:O.rk.IMAGE})}},data(){return{secrets:[],images:[]}},computed:{formattedValue(){return this.value?.downSize},virtualSize(){return this.value?.virtualSize},url(){return this.value?.spec?.url||"-"},description(){return this.value?.metadata?.annotations?.[$.tC]||"-"},errorMessage(){const e=(0,L.Jt)(this.value,"status.conditions");return(0,I.jq)(e,"type","Imported")?.message||"-"},isUpload(){return"upload"===this.value?.spec?.sourceType},sourceImage(){const{sourceImageName:e,sourceImageNamespace:t}=this.value?.spec?.securityParameters||{};if(t&&e){const a=`${t}/${e}`;return this.images.find((e=>e.id===a))}return null},sourceImageLink(){return this.sourceImage?.detailLocation},sourceImageId(){return this.sourceImage?this.sourceImage.displayNameWithNamespace:""},isEncryptedOrDecrypted(){return["encrypt","decrypt"].includes(this.value?.spec?.securityParameters?.cryptoOperation)},encryptionSecret(){return this.value.isEncrypted?this.value.encryptionSecret:"-"},secretLink(){return this.secrets.find((e=>e.id===this.value.encryptionSecret))?.detailLocation},isEncryptedString(){return(0,U.TF)(String(this.value.isEncrypted))},imageName(){return this.value?.metadata?.annotations?.[D.r.IMAGE_NAME]||"-"},sourceType(){return this.value?.spec?.sourceType}}};a(67626);const re=(0,X.A)(ae,[["render",x],["__scopeId","data-v-0c6c35c8"]]);var se=re},18588:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return O}});var r=a(9274);const s={class:"row mb-10"},l={class:"col span-6"},o={class:"col span-6"},n={class:"row mb-10"},c={class:"col span-6"},i={class:"col span-6"},d={class:"row mb-10"},u={class:"col span-6"},m={class:"col span-6"},v={key:0},p={key:1};function h(e,t,a,h,k,b){const y=(0,r.resolveComponent)("Loading"),g=(0,r.resolveComponent)("LabelValue"),N=(0,r.resolveComponent)("CpuMemory"),V=(0,r.resolveComponent)("Tab"),f=(0,r.resolveComponent)("Volume"),w=(0,r.resolveComponent)("Network"),E=(0,r.resolveComponent)("OverviewKeypairs"),C=(0,r.resolveComponent)("CloudConfig"),S=(0,r.resolveComponent)("Checkbox"),B=(0,r.resolveComponent)("Tabbed"),A=(0,r.resolveComponent)("CruResource");return e.$fetchState.pending?((0,r.openBlock)(),(0,r.createBlock)(y,{key:0})):((0,r.openBlock)(),(0,r.createBlock)(A,{key:1,"done-route":e.doneRoute,resource:a.value,mode:a.mode,"apply-hooks":e.applyHooks,onError:t[4]||(t[4]=t=>e.errors=t)},{default:(0,r.withCtx)((()=>[e.spec?((0,r.openBlock)(),(0,r.createBlock)(B,{key:0,"side-tabs":!0,onChanged:b.onTabChanged},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(V,{name:"Basics",label:e.t("harvester.virtualMachine.detail.tabs.basics")},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("div",l,[(0,r.createVNode)(g,{name:e.t("harvester.virtualMachine.detail.details.name"),value:b.name},null,8,["name","value"])]),(0,r.createElementVNode)("div",o,[(0,r.createVNode)(g,{name:e.t("harvester.fields.image"),value:b.imageName},null,8,["name","value"])])]),(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",c,[(0,r.createVNode)(g,{name:e.t("harvester.virtualMachine.detail.details.hostname"),value:b.hostname},null,8,["name","value"])]),(0,r.createElementVNode)("div",i,[(0,r.createVNode)(g,{name:e.t("harvester.virtualMachine.input.MachineType"),value:e.machineType},null,8,["name","value"])])]),(0,r.createVNode)(N,{cpu:e.cpu,mode:a.mode,memory:e.memory,"max-cpu":e.maxCpu,"max-memory":e.maxMemory,"enable-hot-plug":e.cpuMemoryHotplugEnabled},null,8,["cpu","mode","memory","max-cpu","max-memory","enable-hot-plug"]),(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("div",u,[(0,r.createVNode)(g,{name:e.t("harvester.virtualMachine.detail.details.bootOrder")},{value:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("ul",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(b.disks,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:t},(0,r.toDisplayString)(e.bootOrder)+". "+(0,r.toDisplayString)(e.name)+" ("+(0,r.toDisplayString)(b.getDeviceType(e))+") ",1)))),128))])])])),_:1},8,["name"])]),(0,r.createElementVNode)("div",m,[(0,r.createVNode)(g,{name:e.t("harvester.virtualMachine.detail.details.CDROMs")},{value:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",null,[b.cdroms.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("ul",v,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(b.cdroms,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:t},(0,r.toDisplayString)(e.name),1)))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("span",p,(0,r.toDisplayString)(e.t("harvester.virtualMachine.detail.notAvailable")),1))])])),_:1},8,["name"])])])])),_:1},8,["label"]),(0,r.createVNode)(V,{name:"volume",label:e.t("harvester.tab.volume"),weight:-1},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(f,{value:e.diskRows,"onUpdate:value":t[0]||(t[0]=t=>e.diskRows=t),mode:a.mode},null,8,["value","mode"])])),_:1},8,["label"]),(0,r.createVNode)(V,{name:"network",label:e.t("harvester.tab.network"),weight:-2},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(w,{value:e.networkRows,"onUpdate:value":t[1]||(t[1]=t=>e.networkRows=t),mode:a.mode},null,8,["value","mode"])])),_:1},8,["label"]),(0,r.createVNode)(V,{name:"keypairs",label:e.t("harvester.virtualMachine.detail.tabs.keypairs"),class:"bordered-table",weight:-3},{default:(0,r.withCtx)((()=>[k.vm?((0,r.openBlock)(),(0,r.createBlock)(E,{key:0,value:k.vm,"onUpdate:value":t[2]||(t[2]=e=>k.vm=e)},null,8,["value"])):(0,r.createCommentVNode)("",!0)])),_:1},8,["label"]),(0,r.createVNode)(V,{name:"advanced",label:e.t("harvester.tab.advanced"),weight:-4},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(C,{ref:"yamlEditor","user-script":e.userScript,mode:a.mode,"network-script":e.networkScript},null,8,["user-script","mode","network-script"]),t[5]||(t[5]=(0,r.createElementVNode)("div",{class:"spacer"},null,-1)),(0,r.createVNode)(S,{value:e.installUSBTablet,"onUpdate:value":t[3]||(t[3]=t=>e.installUSBTablet=t),mode:a.mode,class:"check",type:"checkbox",label:e.t("harvester.virtualMachine.enableUsb")},null,8,["value","mode","label"])])),_:1},8,["label"])])),_:1},8,["onChanged"])):(0,r.createCommentVNode)("",!0)])),_:1},8,["done-route","resource","mode","apply-hooks"]))}var k=a(19485),b=a(49584),y=a(87619),g=a(43094),N=a(42200),V=a(39412),f=a(88339),w=a(91825),E=a(48249),C=a(32766),S=a(81111),B=a(63536),A=a(36632),T=a(86365),x=a(71574);const _="n/a";var M={name:"VMSnapshotDetail",components:{Volume:A["default"],Network:T["default"],CruResource:g.A,Tabbed:k.A,Loading:y.A,LabelValue:V.A,Tab:b.A,CloudConfig:x["default"],Checkbox:N.S,CpuMemory:S["default"],OverviewKeypairs:B.A},mixins:[w.A,E.Ay],inheritAttrs:!1,props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},async fetch(){await(0,f.kR)({allImages:this.$store.dispatch("harvester/findAll",{type:C.rk.IMAGE})})},data(){return{vm:null}},computed:{name(){return this.value?.metadata?.name||_},hostname(){return this?.spec?.template?.spec?.hostname},imageName(){const e=this.$store.getters["harvester/all"](C.rk.IMAGE)||[],t=e.find((e=>this.imageId===e.id));return t?.spec?.displayName||"-"},disks(){const e=this?.spec?.template?.spec?.domain?.devices?.disks||[];return e.filter((e=>!!e.bootOrder)).sort(((e,t)=>e.bootOrder<t.bootOrder?-1:1))},cdroms(){const e=this?.spec?.template?.spec?.domain?.devices?.disks||[];return e.filter((e=>!!e.cdrom))}},methods:{getDeviceType(e){return e.disk?"Disk":"CD-ROM"},isEmpty(e){return void 0!==e&&0===Object.keys(e).length},onTabChanged({tab:e}){"advanced"===e.name&&this.$refs.yamlEditor?.refresh()}}},$=a(47433);const D=(0,$.A)(M,[["render",h]]);var O=D},63536:function(e,t,a){"use strict";a.d(t,{A:function(){return g}});var r=a(9274);const s={class:"overview-sshKeys"},l={class:"col span-4"},o={class:"col span-7 offset-1"},n={key:0,class:"key-display"},c=["onClick"],i=["onClick"];function d(e,t,a,d,u,m){return(0,r.openBlock)(),(0,r.createElementBlock)("div",s,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(u.sshKeys,((e,a)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:a},[(0,r.createElementVNode)("div",l,(0,r.toDisplayString)(e.id),1),(0,r.createElementVNode)("div",o,[e.showKey?((0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createTextVNode)((0,r.toDisplayString)(e.publicKey)+" ",1),(0,r.createElementVNode)("button",{class:"btn btn-sm role-link hide-bar",onClick:e=>m.toggleShow(a)},t[0]||(t[0]=[(0,r.createElementVNode)("i",{class:"icon icon-x"},null,-1)]),8,c)])):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,class:"btn btn-sm role-link",onClick:e=>m.toggleShow(a)},t[1]||(t[1]=[(0,r.createTextVNode)(" *******"),(0,r.createElementVNode)("i",{class:"icons icon-show"},null,-1)]),8,i))])])))),128))])}var u=a(8138),m=a.n(u),v=a(88339),p=a(32766),h=a(73975),k={mixins:[h.Ay],props:{value:{type:Object,required:!0}},async fetch(){const e=await(0,v.kR)({allSSHs:this.$store.dispatch("harvester/findAll",{type:p.rk.SSH})});this.allSSHs=e.allSSHs},data(){return{allSSHs:[],sshKeys:[]}},methods:{toggleShow(e){const t=this.sshKeys[e];this.sshKeys[e]={...t,showKey:!t.showKey}},getKeys(){return this.mergeAllSSHs(this.value?.spec)},isShow(e=""){const t=this.sshKeys.find((t=>t?.data?.id===e))||{};return t.showKey||!1}},watch:{allSSHs(e){const t=this.getKeys().map((e=>({id:e.id,publicKey:m()(e.data)?e.data:e.data?.spec?.publicKey,showKey:this.isShow(e.id)})));this["sshKeys"]=t}}},b=(a(66439),a(47433));const y=(0,b.A)(k,[["render",d],["__scopeId","data-v-67f09e09"]]);var g=y},75379:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Ae}});var r=a(9274);function s(e,t,a,s,l,o){const n=(0,r.resolveComponent)("OverviewBasics"),c=(0,r.resolveComponent)("Tab"),i=(0,r.resolveComponent)("Volume"),d=(0,r.resolveComponent)("Network"),u=(0,r.resolveComponent)("OverviewKeypairs"),m=(0,r.resolveComponent)("LabelValue"),v=(0,r.resolveComponent)("DashboardMetrics"),p=(0,r.resolveComponent)("NodeScheduling"),h=(0,r.resolveComponent)("PodAffinity"),k=(0,r.resolveComponent)("AccessCredentials"),b=(0,r.resolveComponent)("CloudConfig"),y=(0,r.resolveComponent)("Events"),g=(0,r.resolveComponent)("Migration"),N=(0,r.resolveComponent)("KeyValue"),V=(0,r.resolveComponent)("Labels"),f=(0,r.resolveComponent)("Tabbed");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createVNode)(f,(0,r.mergeProps)(e.$attrs,{class:"mt-15","side-tabs":!0,onChanged:o.onTabChanged}),{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c,{name:"basics",label:e.t("harvester.virtualMachine.detail.tabs.basics"),class:"bordered-table",weight:7},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n,{value:a.value,vmi:o.vmi,mode:"view"},null,8,["value","vmi"])])),_:1},8,["label"]),(0,r.createVNode)(c,{name:"disks",label:e.t("harvester.tab.volume"),class:"bordered-table",weight:6},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(i,{value:e.diskRows,"onUpdate:value":t[0]||(t[0]=t=>e.diskRows=t),mode:"view",namespace:a.value.metadata.namespace,vm:a.value,"resource-type":a.value.type},null,8,["value","namespace","vm","resource-type"])])),_:1},8,["label"]),(0,r.createVNode)(c,{name:"networks",label:e.t("harvester.virtualMachine.detail.tabs.networks"),class:"bordered-table",weight:5},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(d,{value:e.networkRows,"onUpdate:value":t[1]||(t[1]=t=>e.networkRows=t),mode:"view"},null,8,["value"])])),_:1},8,["label"]),(0,r.createVNode)(c,{name:"keypairs",label:e.t("harvester.virtualMachine.detail.tabs.keypairs"),class:"bordered-table",weight:4},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(u,{value:a.value},null,8,["value"])])),_:1},8,["label"]),l.hasResourceQuotaSchema?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,name:"quotas",label:e.t("harvester.tab.quotas"),weight:3},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(m,{name:e.t("harvester.snapshot.totalSnapshotSize"),value:o.totalSnapshotSize},null,8,["name","value"])])),_:1},8,["label"])):(0,r.createCommentVNode)("",!0),l.showVmMetrics?((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,name:"vm-metrics",label:e.t("harvester.virtualMachine.detail.tabs.metrics"),weight:2.5},{default:(0,r.withCtx)((e=>[e.active?((0,r.openBlock)(),(0,r.createBlock)(v,{key:0,"detail-url":l.VM_METRICS_DETAIL_URL,"graph-height":"550px","has-summary-and-detail":!1,vars:o.graphVars},null,8,["detail-url","vars"])):(0,r.createCommentVNode)("",!0)])),_:1},8,["label"])):(0,r.createCommentVNode)("",!0),(0,r.createVNode)(c,{name:"nodeScheduling",label:e.t("workload.container.titles.nodeScheduling"),weight:2.4},{default:(0,r.withCtx)((({active:t})=>[e.spec?((0,r.openBlock)(),(0,r.createBlock)(p,{key:t,mode:e.mode,value:e.spec.template.spec,nodes:e.nodesIdOptions},null,8,["mode","value","nodes"])):(0,r.createCommentVNode)("",!0)])),_:1},8,["label"]),(0,r.createVNode)(c,{label:e.t("harvester.tab.vmScheduling"),name:"vmScheduling",weight:2.3},{default:(0,r.withCtx)((({active:t})=>[e.spec?((0,r.openBlock)(),(0,r.createBlock)(h,{key:t,mode:e.mode,value:e.spec.template.spec,nodes:e.nodes,"all-namespaces-option-available":!0,namespaces:e.filteredNamespaces,"overwrite-labels":e.affinityLabels},null,8,["mode","value","nodes","namespaces","overwrite-labels"])):(0,r.createCommentVNode)("",!0)])),_:1},8,["label"]),(0,r.createVNode)(c,{label:e.t("harvester.tab.accessCredentials"),class:"bordered-table",name:"accessCredentials",weight:2.2},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(k,{mode:"view",value:e.accessCredentials,"resource-type":a.value},null,8,["value","resource-type"])])),_:1},8,["label"]),(0,r.createVNode)(c,{name:"cloudConfig",label:e.t("harvester.virtualMachine.detail.tabs.cloudConfig"),class:"bordered-table",weight:2},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(b,{ref:"yamlEditor",mode:"view","user-script":e.userScript,"network-script":e.networkScript},null,8,["user-script","network-script"])])),_:1},8,["label"]),(0,r.createVNode)(c,{name:"event",label:e.t("harvester.virtualMachine.detail.tabs.events"),weight:1},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(y,{resource:o.vmi,events:o.events},null,8,["resource","events"])])),_:1},8,["label"]),(0,r.createVNode)(c,{name:"migration",label:e.t("harvester.virtualMachine.detail.tabs.migration")},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(g,{value:a.value,"vmi-resource":o.vmi,"vmim-resource":o.vmim},null,8,["value","vmi-resource","vmim-resource"]),l.showVmMetrics&&o.liveMigrationProgressEnabled?((0,r.openBlock)(),(0,r.createBlock)(v,{key:0,"detail-url":l.VM_MIGRATION_DETAIL_URL,"graph-height":"640px","has-summary-and-detail":!1,vars:o.graphVars,class:"mb-30"},null,8,["detail-url","vars"])):(0,r.createCommentVNode)("",!0),o.liveMigrationProgressEnabled?((0,r.openBlock)(),(0,r.createBlock)(y,{key:1,resource:o.vmi,events:o.migrationEvents},null,8,["resource","events"])):(0,r.createCommentVNode)("",!0)])),_:1},8,["label"]),(0,r.createVNode)(c,{name:"instanceLabel",label:e.t("harvester.tab.instanceLabel"),weight:-99},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(V,{"default-container-class":"labels-and-annotations-container",value:a.value,mode:e.mode,"display-side-by-side":!1,"show-annotations":!1,"show-label-title":!1},{labels:(0,r.withCtx)((({toggler:s})=>[(0,r.createVNode)(N,{key:"labels",value:a.value.instanceLabels,"protected-keys":a.value.systemLabels||[],"toggle-filter":s,"add-label":e.t("labels.addLabel"),mode:e.mode,"read-allowed":!1,"value-can-be-empty":!0,"onUpdate:value":t[2]||(t[2]=e=>a.value.setInstanceLabels(e))},null,8,["value","protected-keys","toggle-filter","add-label","mode"])])),_:1},8,["value","mode"])])),_:1},8,["label"])])),_:1},16,["onChanged"])])}var l=a(65359),o=a(19485),n=a(49584),c=a(35664),i=a(91825),d=a(83030),u=a(88339),m=a(97348),v=a(37329),p=a(1018),h=a(38094),k=a(51449),b=a(39412),y=a(32766),g=a(48249),N=a(71574),V=a(36632),f=a(86365),w=a(60068);const E={class:"text-info"},C={key:0};function S(e,t,a,s,l,o){const n=(0,r.resolveComponent)("SortableTable");return(0,r.openBlock)(),(0,r.createBlock)(n,{rows:a.events,headers:l.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"},{"cell:resource":(0,r.withCtx)((({row:e,value:t})=>[(0,r.createElementVNode)("div",E,(0,r.toDisplayString)(t),1),e.message?((0,r.openBlock)(),(0,r.createElementBlock)("div",C,(0,r.toDisplayString)(e.displayMessage),1)):(0,r.createCommentVNode)("",!0)])),_:1},8,["rows","headers"])}var B=a(68774),A=a(81023),T={name:"VirtualMachineEvents",components:{SortableTable:A.A},props:{events:{type:Array,required:!0}},data(){const e={...B.rh,canBeVariable:!0,width:180},t=[e,{name:"resource",label:"Resource",labelKey:"clusterIndexPage.sections.events.resource.label",value:"displayInvolvedObject",sort:["involvedObject.kind","involvedObject.name"],canBeVariable:!0},{align:"right",name:"date",label:"Date",labelKey:"clusterIndexPage.sections.events.date.label",value:"lastTimestamp",sort:"lastTimestamp:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125,defaultSort:!0}];return{eventHeaders:t}}},x=a(47433);const _=(0,x.A)(T,[["render",S]]);var M=_;const $={key:0,class:"row mb-20"},D={class:"col span-6"},O={class:"row mb-20"},R={class:"col span-6"},P={class:"col span-6"},I={class:"row mb-20"},L={class:"col span-6"},U={class:"col span-6"};function H(e,t,a,s,l,o){const n=(0,r.resolveComponent)("LabelValue");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[o.liveMigrationProgressEnabled?((0,r.openBlock)(),(0,r.createElementBlock)("div",$,[(0,r.createElementVNode)("div",D,[(0,r.createVNode)(n,{name:e.t("harvester.virtualMachine.detail.details.phase"),value:o.migrationPhase},null,8,["name","value"])])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",O,[(0,r.createElementVNode)("div",R,[(0,r.createVNode)(n,{name:e.t("harvester.virtualMachine.detail.details.sourceNode"),value:o.sourceNode},null,8,["name","value"])]),(0,r.createElementVNode)("div",P,[(0,r.createVNode)(n,{name:e.t("harvester.virtualMachine.detail.details.targetNode"),value:o.targetNode},null,8,["name","value"])])]),(0,r.createElementVNode)("div",I,[(0,r.createElementVNode)("div",L,[(0,r.createVNode)(n,{name:e.t("harvester.virtualMachine.detail.details.started"),value:o.started},null,8,["name","value"])]),(0,r.createElementVNode)("div",U,[(0,r.createVNode)(n,{name:e.t("harvester.virtualMachine.detail.details.ended"),value:o.ended},null,8,["name","value"])])])])}var K={name:"VirtualMachineMigration",components:{LabelValue:b.A},props:{value:{type:Object,required:!0},vmiResource:{type:Object,required:!0,default:()=>({})},vmimResource:{type:Object,required:!0,default:()=>({})}},data(){return{localResource:this.vmiResource}},computed:{liveMigrationProgressEnabled(){return this.$store.getters["harvester-common/getFeatureEnabled"]("liveMigrationProgress")},migrationPhase(){return this.vmimResource?.status?.phase||"N/A"},migrationState(){return this.localResource?.status?.migrationState},sourceNode(){return this.migrationState?.sourceNode||"N/A"},targetNode(){return this.migrationState?.targetNode||"N/A"},started(){return this.migrationState?.startTimestamp||"N/A"},ended(){return this.migrationState?.endTimestamp||"N/A"},message(){return"N/A"}},watch:{vmiResource:{handler(e){this.localResource=e},deep:!0}}};const j=(0,x.A)(K,[["render",H]]);var F=j;const q={class:"overview-basics"},J={class:"row"},G={class:"col span-6"},z={class:"smart-row"},Q={class:"console"},W={class:"col span-6"},Y={class:"row"},X={class:"col span-6"},Z={class:"col span-6"},ee={class:"row"},te={class:"col span-6"},ae={class:"col span-6"},re={class:"row"},se={class:"col span-6"},le={class:"col span-6"},oe={key:0},ne={key:1},ce={class:"row"},ie={class:"col span-6"},de={class:"row"},ue={class:"col span-6"},me={class:"col span-6"};function ve(e,t,a,s,l,o){const n=(0,r.resolveComponent)("VMConsoleBar"),c=(0,r.resolveComponent)("LabelValue"),i=(0,r.resolveComponent)("HarvesterIpAddress"),d=(0,r.resolveComponent)("InputOrDisplay");return(0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createVNode)(n,{"resource-type":a.value,class:"consoleBut"},null,8,["resource-type"]),(0,r.createElementVNode)("div",q,[(0,r.createElementVNode)("div",J,[(0,r.createElementVNode)("div",G,[(0,r.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.name"),value:a.value.nameDisplay},{value:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",z,[(0,r.createElementVNode)("div",Q,(0,r.toDisplayString)(a.value.nameDisplay),1)])])),_:1},8,["name","value"])]),(0,r.createElementVNode)("div",W,[(0,r.createVNode)(c,{name:e.t("harvester.fields.image"),value:o.imageName},null,8,["name","value"])])]),(0,r.createElementVNode)("div",Y,[(0,r.createElementVNode)("div",X,[(0,r.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.hostname"),value:o.hostname},{value:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(o.hostname),1)])),_:1},8,["name","value"])]),(0,r.createElementVNode)("div",Z,[(0,r.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.node"),value:o.node},{value:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",null,(0,r.toDisplayString)(o.node),1)])),_:1},8,["name","value"])])]),(0,r.createElementVNode)("div",ee,[(0,r.createElementVNode)("div",te,[(0,r.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.ipAddress")},{value:(0,r.withCtx)((()=>[(0,r.createVNode)(i,{value:a.value.id,"onUpdate:value":t[0]||(t[0]=e=>a.value.id=e),row:a.value},null,8,["value","row"])])),_:1},8,["name"])]),(0,r.createElementVNode)("div",ae,[(0,r.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.created"),value:o.creationTimestamp},null,8,["name","value"])])]),t[1]||(t[1]=(0,r.createElementVNode)("hr",{class:"section-divider"},null,-1)),(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(e.t("harvester.virtualMachine.detail.tabs.configurations")),1),(0,r.createElementVNode)("div",re,[(0,r.createElementVNode)("div",se,[(0,r.createVNode)(d,{name:e.t("harvester.virtualMachine.detail.details.bootOrder"),value:o.disks,mode:a.mode},{value:(0,r.withCtx)((()=>[(0,r.createElementVNode)("ul",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.disks,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:t},(0,r.toDisplayString)(e.bootOrder)+". "+(0,r.toDisplayString)(e.name)+" ("+(0,r.toDisplayString)(o.getDeviceType(e))+") ",1)))),128))])])),_:1},8,["name","value","mode"])]),(0,r.createElementVNode)("div",le,[(0,r.createVNode)(d,{name:e.t("harvester.virtualMachine.detail.details.CDROMs"),value:o.cdroms,mode:a.mode},{value:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",null,[o.cdroms.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("ul",oe,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.cdroms,((e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:t},(0,r.toDisplayString)(e.name),1)))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("span",ne,(0,r.toDisplayString)(e.t("harvester.virtualMachine.detail.notAvailable")),1))])])),_:1},8,["name","value","mode"])])]),(0,r.createElementVNode)("div",ce,[(0,r.createElementVNode)("div",ie,[(0,r.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.operatingSystem"),value:o.operatingSystem},null,8,["name","value"])]),(0,r.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.flavor"),value:o.flavor},null,8,["name","value"])]),(0,r.createElementVNode)("div",de,[(0,r.createElementVNode)("div",ue,[(0,r.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.kernelRelease"),value:o.kernelRelease},null,8,["name","value"])]),(0,r.createElementVNode)("div",me,[(0,r.createVNode)(c,{name:e.t("harvester.virtualMachine.input.MachineType"),value:o.machineType},null,8,["name","value"])])])])])}var pe=a(60090),he=a(56258),ke=a(58784),be=a(58434);const ye="n/a";var ge={name:"VMDetailsBasics",components:{VMConsoleBar:ke.A,HarvesterIpAddress:he["default"],LabelValue:b.A,InputOrDisplay:pe.A},mixins:[i.A],props:{value:{type:Object,required:!0},vmi:{type:Object,required:!0,default:()=>({})},mode:{type:String,required:!0}},computed:{creationTimestamp(){const e=new Date(this.value?.metadata?.creationTimestamp);return e.getMonth?`${e.getMonth()+1}/${e.getDate()}/${e.getUTCFullYear()}`:ye},node(){const e=this.vmi?.status?.nodeName||ye;return this.isDown?this.t("harvester.virtualMachine.detail.details.down"):e},hostname(){const e=this.vmi?.spec?.hostname||this.vmi?.status?.guestOSInfo?.hostname||this.t("harvester.virtualMachine.detail.GuestAgentNotInstalled");return this.isDown?this.t("harvester.virtualMachine.detail.details.down"):e},imageName(){const e=this.$store.getters["harvester/all"](y.rk.IMAGE)||[],t=e.find((e=>this.value.rootImageId===e.id));return t?.spec?.displayName||"N/A"},disks(){const e=this.value?.spec?.template?.spec?.domain?.devices?.disks||[];return e.filter((e=>!!e.bootOrder)).sort(((e,t)=>e.bootOrder<t.bootOrder?-1:1))},cdroms(){const e=this.value?.spec?.template?.spec?.domain?.devices?.disks||[];return e.filter((e=>!!e.cdrom))},flavor(){const{cpu:e,memory:t}=(0,be.J)(this.value);return`${e} vCPU , ${t} ${this.t("harvester.virtualMachine.input.memory")}`},kernelRelease(){const e=this.vmi?.status?.guestOSInfo?.kernelRelease||this.t("harvester.virtualMachine.detail.GuestAgentNotInstalled");return this.isDown?this.t("harvester.virtualMachine.detail.details.down"):e},operatingSystem(){const e=this.vmi?.status?.guestOSInfo?.prettyName||this.t("harvester.virtualMachine.detail.GuestAgentNotInstalled");return this.isDown?this.t("harvester.virtualMachine.detail.details.down"):e},isDown(){return this.isEmpty(this.vmi)},machineType(){return this.value?.spec?.template?.spec?.domain?.machine?.type||void 0}},methods:{getDeviceType(e){return e.disk?"Disk":"CD-ROM"},isEmpty(e){return void 0!==e&&0===Object.keys(e).length}}};a(91580);const Ne=(0,x.A)(ge,[["render",ve],["__scopeId","data-v-9ed3a482"]]);var Ve=Ne,fe=a(63536),we=a(95799);const Ee="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/harvester-vm-detail-1/vm-info-detail?orgId=1",Ce="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/harvester-vm-migration-details-1/harvester-vm-migration-details?orgId=1";var Se={name:"VMIDetailsPage",components:{Tab:n.A,Tabbed:o.A,Events:M,OverviewBasics:Ve,LabelValue:b.A,Volume:V["default"],Network:f["default"],OverviewKeypairs:fe.A,CloudConfig:N["default"],Migration:F,DashboardMetrics:d.A,AccessCredentials:w["default"],NodeScheduling:v.A,PodAffinity:p.A,KeyValue:h.A,Labels:k.A},mixins:[i.A,g.Ay],props:{value:{type:Object,required:!0}},data(){return{hasResourceQuotaSchema:!1,switchToCloud:!1,VM_METRICS_DETAIL_URL:Ee,VM_MIGRATION_DETAIL_URL:Ce,showVmMetrics:!1}},async created(){const e=this.$store.getters["currentProduct"].inStore;this.hasResourceQuotaSchema=!!this.$store.getters[`${e}/schemaFor`](y.rk.RESOURCE_QUOTA);const t={pods:this.$store.dispatch(`${e}/findAll`,{type:c.Sm}),services:this.$store.dispatch(`${e}/findAll`,{type:c.YV}),events:this.$store.dispatch(`${e}/findAll`,{type:c.ll}),allSSHs:this.$store.dispatch(`${e}/findAll`,{type:y.rk.SSH}),vmis:this.$store.dispatch(`${e}/findAll`,{type:y.rk.VMI}),vmims:this.$store.dispatch(`${e}/findAll`,{type:y.rk.VMIM}),restore:this.$store.dispatch(`${e}/findAll`,{type:y.rk.RESTORE})};this.hasResourceQuotaSchema&&(t.resourceQuotas=this.$store.dispatch(`${e}/findAll`,{type:y.rk.RESOURCE_QUOTA})),await(0,u.kR)(t),(0,u.DD)((0,m.Qr)(this.$store,this.currentCluster.id,[Ee],"harvester"),this,"showVmMetrics","Determine vm metrics")},computed:{...(0,l.L8)(["currentCluster"]),totalSnapshotSize(){return void 0===this.value.snapshotSizeQuota||null===this.value.snapshotSizeQuota?" - ":0===this.value.snapshotSizeQuota?"0":(0,we.Mo)(this.value.snapshotSizeQuota,{increment:1024,addSuffix:!0,suffix:"i"})},vmi(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](y.rk.VMI)||[],a=t.find((e=>e?.metadata?.ownerReferences?.[0]?.uid===this.value?.metadata?.uid));return a},allEvents(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[`${e}/all`](c.ll)},vmim(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](y.rk.VMIM)||[],a=this.vmi?.name||"",r=t.filter((e=>e?.spec?.vmiName===a)).sort(((e,t)=>e?.metadata?.creationTimestamp>t?.metadata?.creationTimestamp?-1:1));return r.length>0&&r[0]?r[0]:null},migrationEvents(){const e=this.vmim?.metadata.name||"";return""===e?[]:this.allEvents.filter((t=>{const{creationTimestamp:a}=this.value?.metadata||{},r=t?.involvedObject?.name;return r===e&&t.firstTimestamp>=a})).sort(((e,t)=>e.lastTimestamp>t.lastTimestamp))},events(){return this.allEvents.filter((e=>{const{name:t,creationTimestamp:a}=this.value?.metadata||{},r=this.value.podResource?.metadata?.name,s=this.value.persistentVolumeClaimName||[],l=e?.involvedObject?.name,o=s.find((e=>e===l));return(l===t||l===r||o)&&e.firstTimestamp>=a})).sort(((e,t)=>e.lastTimestamp>t.lastTimestamp?-1:1))},graphVars(){return{namespace:this.value.namespace,vm:this.value.name}},liveMigrationProgressEnabled(){return this.$store.getters["harvester-common/getFeatureEnabled"]("liveMigrationProgress")}},methods:{onTabChanged({tab:e}){"cloudConfig"===e.name&&this.$refs.yamlEditor?.refresh()}},watch:{value:{handler(e){const t=this.getDiskRows(e);this["diskRows"]=t},deep:!0}}};const Be=(0,x.A)(Se,[["render",s]]);var Ae=Be},67973:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(9274);function s(e,t,a,s,l,o){const n=(0,r.resolveComponent)("SortableTable"),c=(0,r.resolveComponent)("Tab"),i=(0,r.resolveComponent)("ResourceTabs");return(0,r.openBlock)(),(0,r.createBlock)(i,{value:a.value,"need-related":!1,"onUpdate:value":t[0]||(t[0]=t=>e.$emit("input",t))},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c,{name:"network","label-key":"harvester.ipPool.network.label",weight:99},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n,{"key-field":"_key",headers:o.networkHeaders,rows:o.networks,"row-actions":!1,"table-actions":!1,search:!1},null,8,["headers","rows"])])),_:1}),(0,r.createVNode)(c,{name:"range","label-key":"harvester.ipPool.tabs.range",weight:89},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n,{"key-field":"_key",headers:o.rangeHeaders,rows:o.ranges,"row-actions":!1,"table-actions":!1,search:!1},null,8,["headers","rows"])])),_:1})])),_:1},8,["value"])}var l=a(43870),o=a(49584),n=a(81023),c=a(35664),i=a(88339),d=a(9470),u={emits:["input"],components:{ResourceTabs:l.A,Tab:o.A,SortableTable:n.A},props:{value:{type:Object,default:()=>({})}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={ipPools:this.$store.dispatch(`${e}/findAll`,{type:c.XG})};await(0,i.kR)(t)},computed:{networks(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](c.XG);return t.filter((e=>e?.id===this.value?.spec?.selector?.network))},networkHeaders(){return d.NETWORK_HEADERS},ranges(){return this.value.spec.ranges},rangeHeaders(){return[{name:"subnet",label:this.t("harvester.ipPool.subnet.label"),value:"subnet"},{name:"gateway",label:this.t("harvester.ipPool.gateway.label"),value:"gateway"},{name:"startIP",label:this.t("harvester.ipPool.startIP.label"),value:"rangeStart"},{name:"endIP",label:this.t("harvester.ipPool.endIP.label"),value:"rangeEnd"}]}}},m=a(47433);const v=(0,m.A)(u,[["render",s]]);var p=v},55224:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=a(9274);function s(e,t,a,s,l,o){const n=(0,r.resolveComponent)("SortableTable"),c=(0,r.resolveComponent)("Tab"),i=(0,r.resolveComponent)("ResourceTabs");return(0,r.openBlock)(),(0,r.createBlock)(i,{value:a.value,"need-related":!1,"onUpdate:value":t[0]||(t[0]=t=>e.$emit("input",t))},{default:(0,r.withCtx)((()=>["pool"===a.value.spec.ipam?((0,r.openBlock)(),(0,r.createBlock)(c,{key:0,name:"ipPool","label-key":"harvester.loadBalancer.ipPool.label",weight:99},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n,{"key-field":"_key",headers:o.ipPoolHeaders,rows:o.ipPools,"row-actions":!1,"table-actions":!1,search:!1},null,8,["headers","rows"])])),_:1})):(0,r.createCommentVNode)("",!0),"vm"===a.value.spec.workloadType?((0,r.openBlock)(),(0,r.createBlock)(c,{key:1,name:"vm",label:e.t("harvester.loadBalancer.backendServers.label"),class:"bordered-table",weight:98},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n,{rows:o.vms,headers:o.vmHeaders,"key-field":"id","row-actions":!1,"table-actions":!1,search:o.vms.length>10},null,8,["rows","headers","search"])])),_:1},8,["label"])):(0,r.createCommentVNode)("",!0),"vm"===a.value.spec.workloadType?((0,r.openBlock)(),(0,r.createBlock)(c,{key:2,name:"listeners",label:e.t("harvester.loadBalancer.tabs.listeners"),class:"bordered-table",weight:89},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n,{"key-field":"_key",headers:o.listenerHeaders,rows:o.listeners,"row-actions":!1,"table-actions":!1,search:!1},null,8,["headers","rows"])])),_:1},8,["label"])):(0,r.createCommentVNode)("",!0),"vm"===a.value.spec.workloadType?((0,r.openBlock)(),(0,r.createBlock)(c,{key:3,name:"selector",label:e.t("harvester.loadBalancer.tabs.backendServer"),class:"bordered-table",weight:79},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n,{"key-field":"_key",headers:o.serviceSelectorInfoHeaders,rows:o.backendServerSelectors,"row-actions":!1,"table-actions":!1,"show-headers":!0,search:!1},null,8,["headers","rows"])])),_:1},8,["label"])):(0,r.createCommentVNode)("",!0)])),_:1},8,["value"])}var l=a(43870),o=a(49584),n=a(81023),c=a(32766),i=a(88339),d=a(68774),u=a(14888),m=a(38823),v=a(62261),p={emits:["input"],components:{ResourceTabs:l.A,Tab:o.A,SortableTable:n.A},props:{value:{type:Object,default:()=>({})}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={ipPools:this.$store.dispatch(`${e}/findAll`,{type:c.rk.IP_POOL}),vms:this.$store.dispatch(`${e}/findAll`,{type:c.rk.VM})};await(0,i.kR)(t)},computed:{ipPools(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](c.rk.IP_POOL);return t.filter((e=>e.id===this.value.status.allocatedAddress.ipPool))},ipPoolHeaders(){return v.IP_POOL_HEADERS},listeners(){const e=this.value?.spec?.listeners;return e},listenerHeaders(){return[{name:"name",label:this.t("tableHeaders.name"),value:"name",sort:"name:desc"},{name:"port",label:this.t("tableHeaders.port"),value:"port",sort:"port:desc"},{name:"protocol",label:this.t("tableHeaders.protocol"),value:"protocol",sort:"protocol:desc"},{name:"backendPort",label:this.t("harvester.loadBalancer.listeners.backendPort.label"),value:"backendPort",sort:"backendPort:desc"}]},backendServerSelectors(){return Object.keys(this.value.spec?.backendServerSelector||{}).map((e=>({key:e,value:this.value.spec.backendServerSelector[e]})))},serviceSelectorInfoHeaders(){return[{...d._,width:200},d.Qg]},vmHeaders(){const e=["state","ip","node"];return u.VM_HEADERS.filter((t=>!e.includes(t.name)))},vms(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](c.rk.VM).filter((e=>e.metadata.namespace===this.value.metadata.namespace)),a=(0,m.wC)(t,this.value?.spec?.backendServerSelector,"spec.template.metadata.labels");return a}}},h=a(47433);const k=(0,h.A)(p,[["render",s]]);var b=k},27626:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=a(9274);function s(e,t,a,s,l,o){const n=(0,r.resolveComponent)("SortableTable"),c=(0,r.resolveComponent)("Tab"),i=(0,r.resolveComponent)("ResourceTabs");return(0,r.openBlock)(),(0,r.createBlock)(i,{value:a.value,"need-related":!1,"onUpdate:value":t[0]||(t[0]=t=>e.$emit("input",t))},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(c,{name:"node","label-key":"harvester.vlanConfig.titles.host",weight:99},{default:(0,r.withCtx)((()=>[(0,r.createVNode)(n,{"key-field":"_key",headers:o.nodeHeaders,rows:o.nodes,"row-actions":!1,"table-actions":!1,search:!1},null,8,["headers","rows"])])),_:1})])),_:1},8,["value"])}var l=a(43870),o=a(49584),n=a(81023),c=a(88339),i=a(68774),d=a(38823),u=a(35664),m=a(76978),v=a(2602),p={emits:["input"],components:{ResourceTabs:l.A,Tab:o.A,SortableTable:n.A},props:{value:{type:Object,default:()=>({})}},async fetch(){const e=this.$store.getters["currentProduct"].inStore;this.$store.dispatch("harvester/findAll",{type:u.NW});const t={nodes:this.$store.dispatch(`${e}/findAll`,{type:u.NW})};await(0,c.kR)(t)},computed:{nodeHeaders(){return[i.c4,i.o_,{name:"host-ip",labelKey:"tableHeaders.hostIp",search:["internalIp"],value:"internalIp",sort:["internalIp"]},i.K]},nodes(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](u.NW),a=this.value?.metadata?.annotations?.[v.r.MATCHED_NODES],r=this.value?.spec?.nodeSelector;return(0,m.Im)(r)?a&&a.length>0?t.filter((e=>a.includes(e.id))):t:(0,d.wC)(t,r)}}},h=a(47433);const k=(0,h.A)(p,[["render",s]]);var b=k},44195:function(e,t,a){"use strict";a.r(t);var r=a(36758),s=a.n(r),l=a(40935),o=a.n(l),n=o()(s());n.push([e.id,".copy[data-v-2163c48c]{cursor:pointer}",""]),t["default"]=n},95136:function(e,t,a){"use strict";a.r(t);var r=a(36758),s=a.n(r),l=a(40935),o=a.n(l),n=o()(s());n.push([e.id,".copy-to-clipboard-text[data-v-d7ed0a12]{white-space:nowrap}.copy-to-clipboard-text.plain[data-v-d7ed0a12]{color:var(--body-text)}.copy-to-clipboard-text.plain[data-v-d7ed0a12]:hover{text-decoration:none}.copy-to-clipboard-text.copied[data-v-d7ed0a12]{pointer-events:none;color:var(--success)}",""]),t["default"]=n},90067:function(e,t,a){"use strict";a.r(t);var r=a(36758),s=a.n(r),l=a(40935),o=a.n(l),n=o()(s());n.push([e.id,".role[data-v-bc500e7c]{display:flex}",""]),t["default"]=n},37282:function(e,t,a){"use strict";a.r(t);var r=a(36758),s=a.n(r),l=a(40935),o=a.n(l),n=o()(s());n.push([e.id,".close[data-v-2f2890f0]{top:10px;right:10px;padding:0;position:absolute}.disk[data-v-2f2890f0]{position:relative}.disk .secret-name[data-v-2f2890f0]{height:61px}.disk[data-v-2f2890f0]:not(:last-of-type){padding-bottom:10px;margin-bottom:30px}.flex[data-v-2f2890f0]{display:flex;justify-content:space-between}.badge-state[data-v-2f2890f0]{padding:2px 5px}",""]),t["default"]=n},40880:function(e,t,a){"use strict";a.r(t);var r=a(36758),s=a.n(r),l=a(40935),o=a.n(l),n=o()(s());n.push([e.id,"#host-instances[data-v-6f0bc59b]  thead th{vertical-align:middle}#host-instances[data-v-6f0bc59b]  .state{display:flex}#host-instances[data-v-6f0bc59b]  .state .vmstate{margin-right:6px}",""]),t["default"]=n},72070:function(e,t,a){"use strict";a.r(t);var r=a(36758),s=a.n(r),l=a(40935),o=a.n(l),n=o()(s());n.push([e.id,".error[data-v-3a89cf31]{color:var(--error)}",""]),t["default"]=n},99318:function(e,t,a){"use strict";a.r(t);var r=a(36758),s=a.n(r),l=a(40935),o=a.n(l),n=o()(s());n.push([e.id,".entry[data-v-16758c8a]{margin-top:10px}.entry[data-v-16758c8a]:first-of-type{margin-top:0}",""]),t["default"]=n},22314:function(e,t,a){"use strict";a.r(t);var r=a(36758),s=a.n(r),l=a(40935),o=a.n(l),n=o()(s());n.push([e.id,".error[data-v-0c6c35c8]{color:var(--error)}",""]),t["default"]=n},89756:function(e,t,a){"use strict";a.r(t);var r=a(36758),s=a.n(r),l=a(40935),o=a.n(l),n=o()(s());n.push([e.id,".consoleBut[data-v-9ed3a482]{display:flex;justify-content:flex-end}.overview-basics[data-v-9ed3a482]{display:grid;grid-template-columns:100%;grid-template-rows:auto;grid-row-gap:15px}.overview-basics .badge-state[data-v-9ed3a482]{padding:2px 5px;font-size:12px;margin-right:3px}.overview-basics .smart-row[data-v-9ed3a482]{display:flex;flex-direction:row}.overview-basics .smart-row .console[data-v-9ed3a482]{display:flex;overflow:hidden}.overview-basics__name[data-v-9ed3a482]{flex:1}.overview-basics__ssh-key[data-v-9ed3a482]{min-width:150px}",""]),t["default"]=n},62087:function(e,t,a){"use strict";a.r(t);var r=a(36758),s=a.n(r),l=a(40935),o=a.n(l),n=o()(s());n.push([e.id,".overview-sshKeys[data-v-67f09e09]{text-align:left;max-height:700px;overflow:auto}.overview-sshKeys__item[data-v-67f09e09]{margin-bottom:15px}.overview-sshKeys__item[data-v-67f09e09]:last-child{margin-bottom:0}.overview-sshKeys .key-display[data-v-67f09e09]{position:relative;padding-right:30px;word-break:break-word}.overview-sshKeys .key-display .hide-bar[data-v-67f09e09]{position:absolute;top:-10px;right:10px}",""]),t["default"]=n},25635:function(e,t,a){var r=a(44195);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(74825).A;s("a9071e02",r,!0,{sourceMap:!1,shadowMode:!1})},55168:function(e,t,a){var r=a(95136);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(74825).A;s("0c4880ca",r,!0,{sourceMap:!1,shadowMode:!1})},211:function(e,t,a){var r=a(90067);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(74825).A;s("19ba0b98",r,!0,{sourceMap:!1,shadowMode:!1})},91810:function(e,t,a){var r=a(37282);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(74825).A;s("30b5bd84",r,!0,{sourceMap:!1,shadowMode:!1})},47216:function(e,t,a){var r=a(40880);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(74825).A;s("19fca9b6",r,!0,{sourceMap:!1,shadowMode:!1})},27270:function(e,t,a){var r=a(72070);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(74825).A;s("c5f3af0a",r,!0,{sourceMap:!1,shadowMode:!1})},98326:function(e,t,a){var r=a(99318);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(74825).A;s("33698eec",r,!0,{sourceMap:!1,shadowMode:!1})},67626:function(e,t,a){var r=a(22314);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(74825).A;s("c8b955fa",r,!0,{sourceMap:!1,shadowMode:!1})},91580:function(e,t,a){var r=a(89756);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(74825).A;s("5ca415f9",r,!0,{sourceMap:!1,shadowMode:!1})},66439:function(e,t,a){var r=a(62087);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var s=a(74825).A;s("5043011e",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=harvester-1.6.0.umd.min.detail.js.map