(("undefined"!==typeof self?self:this)["webpackChunkharvester_1_7_0"]=("undefined"!==typeof self?self:this)["webpackChunkharvester_1_7_0"]||[]).push([[819],{14290:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(9274);const s={class:"precent-data"},o={class:"ml-10 percentage"},n={key:0,class:"mt-10"},i={class:"precent-data"},c={class:"ml-10 percentage"};function u(e,t,r,u,l,d){const m=(0,a.resolveComponent)("ConsumptionGauge");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(m,{capacity:d.cpuTotal,used:d.reserved,units:d.cpuUnits,"resource-name":r.resourceName},{title:(0,a.withCtx)((({amountTemplateValues:t,formattedPercentage:r})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.formatters.hardwareResourceGauge.reserved")),1),(0,a.createElementVNode)("span",s,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",t))+" ",1),(0,a.createElementVNode)("span",o,"/ "+(0,a.toDisplayString)(r),1)])])),_:1},8,["capacity","used","units","resource-name"]),r.showUsed?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createVNode)(m,{capacity:d.cpuTotal,used:d.used,units:d.cpuUnits},{title:(0,a.withCtx)((({amountTemplateValues:t,formattedPercentage:r})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.formatters.hardwareResourceGauge.used")),1),(0,a.createElementVNode)("span",i,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",t))+" ",1),(0,a.createElementVNode)("span",c,"/ "+(0,a.toDisplayString)(r),1)])])),_:1},8,["capacity","used","units"])])):(0,a.createCommentVNode)("",!0)])}var l=r(68732),d=r(35664),m=r(95799),p={name:"HarvesterCpuUsed",components:{ConsumptionGauge:l.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},showUsed:{type:Boolean,default:!1}},data(){return{}},computed:{metrics(){return this.$store.getters["harvester/byId"](d.$v.NODE,this.row.id)},cpuTotal(){let e=0;return this.metrics&&(e=this.metrics.cpuCapacity),e},cpuUnits(){return"C"},node(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/byId`](d.NW,this.row.id);return t},reserved(){return this.metrics?this.node.cpuReserved:0},used(){return this.metrics?(0,m.ao)(this.metrics?.usage?.cpu||"0m"):0}}},h=(r(96782),r(47433));const g=(0,h.A)(p,[["render",u],["__scopeId","data-v-6c8e8046"]]);var f=g},56258:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(9274);const s={key:0};function o(e,t,r,o,n,i){const c=(0,a.resolveComponent)("CopyToClipboardText"),u=(0,a.resolveDirective)("clean-tooltip");return i.showIP?((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(i.ips,(({ip:t,name:r,isCustom:s})=>((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:`${t}-${r}`},[(0,a.withDirectives)((0,a.createVNode)(c,{text:t,plain:s},null,8,["text","plain"]),[[u,s?e.t("harvester.formatters.harvesterIpAddress.customIpTooltip"):r]])])))),128))])):(0,a.createCommentVNode)("",!0)}var n=r(76978),i=r(92043),c=r(2602),u=r(78386),l=r(32766),d=r(48249),m=r(50784),p={components:{CopyToClipboardText:u.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},col:{type:Object,default:()=>{}}},data(){return{inStore:"harvester"}},created(){const e=this.$store.getters["currentProduct"].inStore;this.inStore=e},computed:{ips(){return this.vmiIp.length?[...this.vmiIp,...this.networkAnnotationIP].filter(Boolean).sort(((e,t)=>e.ip<t.ip?-1:1)):this.customAnnotationIP},customAnnotationIP(){const e=(0,n.Jt)(this.row,`metadata.annotations."${c.r.CUSTOM_IP}"`);return e&&(0,i.eH)(e)?[{name:"custom-ip",ip:e,isCustom:!0}]:[]},networkAnnotationIP(){if("Running"!==this.row.actualState)return[];const e=(0,n.Jt)(this.row,`metadata.annotations."${c.r.NETWORK_IPS}"`)||"[]";try{const t=JSON.parse(e);return t.map((e=>({ip:e.replace(/\/[\d\D]*/,""),name:""})))}catch(t){return[]}},vmiIp(){const e=this.$store.getters[`${this.inStore}/all`](l.rk.VMI),t=e.find((e=>e.id===this.value))||null,r=this.row.networksName||[],a=t?.spec?.networks||[];return(t?.status?.interfaces||[]).filter((e=>(0,i.eH)(e.ipAddress)&&r.includes(e.name))).map((e=>{let t;const r=a.find((t=>t.name===e.name));return r&&r.multus?t=r.multus.networkName:r&&r.pod&&(t=d.PO),{ip:e.ipAddress,name:t}}))},showIP(){return this.row.stateDisplay!==m.OFF}}},h=r(47433);const g=(0,h.A)(p,[["render",o]]);var f=g},79898:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=r(9274);const s={class:"precent-data"},o={class:"ml-10 percentage"},n={key:0,class:"mt-10"},i={class:"precent-data"},c={class:"ml-10 percentage"};function u(e,t,r,u,l,d){const m=(0,a.resolveComponent)("ConsumptionGauge");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(m,{capacity:d.memoryTotal,used:d.reserved,units:d.memoryUnits,"number-formatter":d.memoryFormatter,"resource-name":r.resourceName},{title:(0,a.withCtx)((({amountTemplateValues:t,formattedPercentage:r})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.formatters.hardwareResourceGauge.reserved")),1),(0,a.createElementVNode)("span",s,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",t))+" ",1),(0,a.createElementVNode)("span",o,"/ "+(0,a.toDisplayString)(r),1)])])),_:1},8,["capacity","used","units","number-formatter","resource-name"]),r.showUsed?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createVNode)(m,{capacity:d.memoryTotal,used:d.used,units:d.memoryUnits,"number-formatter":d.memoryFormatter},{title:(0,a.withCtx)((({amountTemplateValues:t,formattedPercentage:r})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.formatters.hardwareResourceGauge.used")),1),(0,a.createElementVNode)("span",i,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",t))+" ",1),(0,a.createElementVNode)("span",c,"/ "+(0,a.toDisplayString)(r),1)])])),_:1},8,["capacity","used","units","number-formatter"])])):(0,a.createCommentVNode)("",!0)])}var l=r(68732),d=r(35664),m=r(95799),p=r(84757),h={name:"HarvesterMemoryUsed",components:{ConsumptionGauge:l.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},showUsed:{type:Boolean,default:!1}},data(){return{}},computed:{metrics(){return this.$store.getters["harvester/byId"](d.$v.NODE,this.row.id)},memoryTotal(){let e=0;return this.metrics&&(e=this.metrics.memoryCapacity),e},memoryUnits(){const e=(0,m.$W)(this.memoryTotal,1024);return`${m.QN[e]}${p.jx}`},node(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/byId`](d.NW,this.row.id);return t},reserved(){return this.metrics?this.node.memoryReserved:0},used(){return this.metrics?(0,m.ao)(this.metrics?.usage?.memory||"0m",{increment:1024}):0}},methods:{memoryFormatter(e){const t=(0,m.$W)(this.memoryTotal,1024),r={addSuffix:!1,increment:1024,minExponent:t};return(0,m.Mo)(e,r)}}},g=(r(93829),r(47433));const f=(0,g.A)(h,[["render",u],["__scopeId","data-v-805a59b4"]]);var y=f},46484:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=r(9274);const s={key:0},o={class:"precent-data"},n={class:"ml-10 percentage"},i={class:"precent-data"},c={class:"ml-10 percentage"};function u(e,t,r,u,l,d){const m=(0,a.resolveComponent)("ConsumptionGauge");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[r.showAllocated?((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createVNode)(m,{capacity:d.storageStats.total,used:d.storageStats.scheduled,units:d.allocatedUnits,"number-formatter":d.formatter,"resource-name":r.resourceName},{title:(0,a.withCtx)((({formattedPercentage:t})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.dashboard.hardwareResourceGauge.allocated")),1),(0,a.createElementVNode)("span",o,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",d.allocatedAmountTemplateValues))+" ",1),(0,a.createElementVNode)("span",n," / "+(0,a.toDisplayString)(t),1)])])),_:1},8,["capacity","used","units","number-formatter","resource-name"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(m,{capacity:d.storageStats.maximum,used:d.storageStats.used,units:d.usedUnits,"number-formatter":d.formatter,"resource-name":r.showAllocated?"":r.resourceName,class:(0,a.normalizeClass)({"mt-10":r.showAllocated})},{title:(0,a.withCtx)((({formattedPercentage:t})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.used")),1),(0,a.createElementVNode)("span",i,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",d.usedAmountTemplateValues))+" ",1),(0,a.createElementVNode)("span",c," / "+(0,a.toDisplayString)(t),1)])])),_:1},8,["capacity","used","units","number-formatter","resource-name","class"])])}var l=r(68732),d=r(35664),m=r(95799),p=r(84757),h={name:"HarvesterStorageUsed",components:{ConsumptionGauge:l.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},showAllocated:{type:Boolean,default:!1}},async fetch(){const e=this.$store.getters["currentProduct"].inStore;this.longhornSettings=await this.$store.dispatch(`${e}/findAll`,{type:d.oe.SETTINGS})},data(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](d.oe.SETTINGS)||[];return{longhornSettings:t}},computed:{storageStats(){const e={used:0,scheduled:0,maximum:0,reserved:0,total:0},t=this.$store.getters["currentProduct"].inStore,r=this.$store.getters[`${t}/byId`](d.oe.NODES,`longhorn-system/${this.row.id}`)||{},a=this.longhornSettings.find((e=>"longhorn-system/storage-over-provisioning-percentage"===e.id)),s=r?.spec?.disks||{},o=r?.status?.diskStatus||{};return e.used+=r?.spec?.allowScheduling?r.used:0,Object.keys(s).map((t=>{e.scheduled+=r?.spec?.allowScheduling&&o[t]?.storageScheduled||0,e.reserved+=s[t]?.storageReserved||0})),Object.values(o).map((t=>{e.maximum+=t?.storageMaximum||0})),e.total=(e.maximum-e.reserved)*Number(a?.value??0)/100,e},allocatedUnits(){const e=(0,m.$W)(this.storageStats.total,1024);return`${m.QN[e]}${p.jx}`},usedUnits(){const e=(0,m.$W)(this.storageStats.maximum,1024);return`${m.QN[e]}${p.jx}`},formatUsed(){let e=this.formatter(this.storageStats.used);return!Number.parseFloat(e)>0&&(e=this.formatter(this.storageStats.used,{canRoundToZero:!0})),e},formatAllocated(){let e=this.formatter(this.storageStats.scheduled);return!Number.parseFloat(e)>0&&(e=this.formatter(this.storageStats.scheduled,{canRoundToZero:!0})),e},usedAmountTemplateValues(){return{used:this.formatUsed,total:this.formatter(this.storageStats.maximum),unit:this.usedUnits}},allocatedAmountTemplateValues(){return{used:this.formatAllocated,total:this.formatter(this.storageStats.total),unit:this.allocatedUnits}}},methods:{formatter(e,t){const r=(0,m.$W)(this.storageStats.maximum,1024),a={addSuffix:!1,increment:1024,minExponent:r};return(0,m.Mo)(e,{...a,...t})}}},g=(r(93529),r(47433));const f=(0,g.A)(h,[["render",u],["__scopeId","data-v-07e1839c"]]);var y=f},61678:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".precent-data[data-v-6c8e8046]{white-space:nowrap}",""]),t["default"]=i},20293:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".precent-data[data-v-805a59b4]{white-space:nowrap}",""]),t["default"]=i},13465:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".precent-data[data-v-07e1839c]{white-space:nowrap}",""]),t["default"]=i},96782:function(e,t,r){var a=r(61678);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("912be7e2",a,!0,{sourceMap:!1,shadowMode:!1})},93829:function(e,t,r){var a=r(20293);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("4c11d0fd",a,!0,{sourceMap:!1,shadowMode:!1})},93529:function(e,t,r){var a=r(13465);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("0bcf6453",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=harvester-1.7.0.umd.min.819.js.map