"use strict";(("undefined"!==typeof self?self:this)["webpackChunkharvester_1_7_0"]=("undefined"!==typeof self?self:this)["webpackChunkharvester_1_7_0"]||[]).push([[973],{88891:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var o=r(9274);const l={class:"mt-10"},a={class:"mb-5"};function n(e,t,r,n,c,s){const i=(0,o.resolveComponent)("Banner"),m=(0,o.resolveDirective)("clean-html");return(0,o.openBlock)(),(0,o.createElementBlock)("div",l,[(0,o.createElementVNode)("div",a,[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("promptRemove.attemptingToRemove",{type:s.resourceType}))+" ",1),(0,o.withDirectives)((0,o.createElementVNode)("span",null,null,512),[[m,s.resourceNames(r.names,null,e.t)]])]),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(c.errors,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(i,{key:t,class:"",color:"error",label:e},null,8,["label"])))),128))])}var c=r(92043),s=r(65359),i=r(41837),m=r(32766),u=r(99726),p={name:"PromptRemoveVMBackupDialog",emits:["errors"],props:{value:{type:Array,default:()=>[]},names:{type:Array,default:()=>[]},type:{type:String,required:!0},close:{type:Function,required:!0},doneLocation:{type:Object,default:()=>{}}},data(){return{errors:[]}},computed:{...(0,s.aH)("action-menu",["toRemove"]),...(0,s.L8)({t:"i18n/t"}),resourceType(){const e=this.value?.[0]?.spec?.type===i.aS.SNAPSHOT,t=this.names?.length||1;return e?this.t(`typeLabel."${m.rk.VM_SNAPSHOT}"`,{count:t}):this.t(`typeLabel."${m.rk.BACKUP}"`,{count:t})}},methods:{resourceNames:c.Nr,async remove(e){try{await Promise.all(this.value.map((e=>e.remove()))),this.close(e)}catch(t){this.errors=(0,u.rz)(t),e(!1)}}}},d=r(47433);const h=(0,d.A)(p,[["render",n]]);var v=h},20377:function(e,t,r){r.r(t),r.d(t,{default:function(){return L}});var o=r(9274);const l={class:"mt-10"},a={class:"mt-10"},n={key:0},c={class:"checkbox-container mr-15"},s=["label","value"],i={key:1},m={class:"checkbox-container mr-15"},u={class:"text-warning mb-10 mt-10"},p={class:"text-info mt-20"};function d(e,t,r,d,h,v){const k=(0,o.resolveDirective)("clean-html");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",l,[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("promptRemove.attemptingToRemove",{type:r.type}))+" ",1),(0,o.withDirectives)((0,o.createElementVNode)("span",null,null,512),[[k,v.resourceNames(r.names,null,e.t)]]),(0,o.createElementVNode)("div",a,(0,o.toDisplayString)(e.t("harvester.virtualMachine.promptRemove.title")),1),1===r.value.length?((0,o.openBlock)(),(0,o.createElementBlock)("div",n,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(v.removeNameArr[r.value[0].id],((e,r)=>((0,o.openBlock)(),(0,o.createElementBlock)("span",{key:r},[(0,o.createElementVNode)("label",c,[(0,o.withDirectives)((0,o.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>h.checkedList=e),type:"checkbox",label:e,value:e},null,8,s),[[o.vModelCheckbox,h.checkedList]]),t[2]||(t[2]=(0,o.createElementVNode)("span",{class:"checkbox-custom mr-5",role:"checkbox"},null,-1)),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e),1)])])))),128))])):((0,o.openBlock)(),(0,o.createElementBlock)("div",i,[(0,o.createElementVNode)("label",m,[(0,o.withDirectives)((0,o.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>h.checkedList=e),type:"checkbox"},null,512),[[o.vModelCheckbox,h.checkedList]]),t[3]||(t[3]=(0,o.createElementVNode)("span",{class:"checkbox-custom mr-5",role:"checkbox"},null,-1)),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.t("harvester.virtualMachine.promptRemove.deleteAll")),1)])]))]),(0,o.createElementVNode)("div",u,(0,o.toDisplayString)(e.t("harvester.virtualMachine.promptRemove.tips")),1),(0,o.createElementVNode)("div",p,(0,o.toDisplayString)(e.t("promptRemove.protip",{alternateLabel:h.alternateLabel})),1)])}var h=r(65359),v=r(76978),k=r(52225),y=r.n(k),f=r(92043),N=r(32766),b=r(35881),V={name:"HarvesterPromptRemove",props:{value:{type:Array,default:()=>[]},names:{type:Array,default:()=>[]},type:{type:String,required:!0},close:{type:Function,required:!0},doneLocation:{type:Object,default:()=>{}}},data(){return{checkedList:[],checkAll:!0,alternateLabel:b.ZA}},computed:{...(0,h.aH)("action-menu",["toRemove"]),...(0,h.L8)({t:"i18n/t"}),removeNameArr(){const e={};return this.value.forEach((t=>{if(t.type!==N.rk.VM)return;const r=t.spec.template.spec?.volumes||[],o=r.filter((e=>e.persistentVolumeClaim)).map((e=>{if(e.persistentVolumeClaim)return e.name}));e[t.id]=o})),e}},watch:{removeNameArr:{handler(e){if(1===this.value.length){const t=Object.values(e[this.value[0].id]);this.checkedList.unshift(t[0])}},deep:!0,immediate:!0}},methods:{resourceNames:f.Nr,remove(){let e;this.doneLocation&&(e={...this.doneLocation}),Promise.all(this.value.map((e=>{if(e.type!==N.rk.VM)return void e.remove();let t="";this.value.length>1?this.checkAll&&this.removeNameArr[e.id].forEach((e=>{t+=`removedDisks=${e}&`})):(this.checkedList.forEach((e=>{t+=`removedDisks=${e}&`})),t.replace(/&$/,""));const r=y()(e.links.self);e.remove({url:`${r.pathname}?${t}propagationPolicy=Foreground`})}))).then((t=>{e&&!(0,v.Im)(e)&&this.value?.[0]?.currentRouter().push(e),this.close()})).catch((e=>{this.$emit("errors",e)}))}}},E=r(47433);const g=(0,E.A)(V,[["render",d]]);var L=g}}]);
//# sourceMappingURL=harvester-1.7.0.umd.min.promptRemove.js.map