(("undefined"!==typeof self?self:this)["webpackChunkharvester_1_0_5"]=("undefined"!==typeof self?self:this)["webpackChunkharvester_1_0_5"]||[]).push([[545],{55423:function(e,t,r){"use strict";r.d(t,{A:function(){return h}});var o=r(9274);const s={class:"vm-schedule-filter"},a={key:0,class:"banner-item bg-warning"},n=["disabled"],l={class:"filter-popup"};function i(e,t,r,i,c,d){const p=(0,o.resolveComponent)("RadioGroup"),u=(0,o.resolveComponent)("v-dropdown");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[c.selected?((0,o.openBlock)(),(0,o.createElementBlock)("span",a,[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("harvester.tableHeaders.vmSchedule"))+(0,o.toDisplayString)(c.selected?` = ${c.selected}`:"")+" ",1),(0,o.createElementVNode)("i",{class:"icon icon-close ml-5",onClick:t[0]||(t[0]=(...e)=>d.remove&&d.remove(...e))})])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(u,{"popper-class":"vm-schedule-dropdown",triggers:d.scheduleOptions.length?["click"]:[],placement:"bottom-end",offset:"1",distance:20},{popper:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",l,[(0,o.createVNode)(p,{value:c.selected,"onUpdate:value":[t[1]||(t[1]=e=>c.selected=e),d.onSelect],class:"mr-10 ml-10",name:"model",options:d.scheduleOptions,labels:d.scheduleOptions},null,8,["value","options","labels","onUpdate:value"])])])),default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("button",{ref:"actionDropDown",class:"btn bg-primary mr-10",disabled:!d.enableFilterButton},[(0,o.renderSlot)(e.$slots,"title",{},(()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("harvester.fields.filterSchedule")),1)]),!0)],8,n)])),_:3},8,["triggers"])])}var c=r(10196),d={name:"HarvesterFilterVMSchedule",emits:["change-rows"],components:{RadioGroup:c.z},props:{rows:{type:Array,required:!0}},data(){return{selected:""}},computed:{scheduleOptions(){const e=this.rows.map((e=>e.sourceSchedule)).filter((e=>e));return Array.from(new Set(e))},enableFilterButton(){return this.rows.some((e=>void 0!==e.sourceSchedule))}},methods:{onSelect(e){this.selected=e,this.filterRows()},remove(){this.selected="",this.filterRows()},filterRows(){if(!this.selected)return void this.$emit("change-rows",this.rows);const e=this.rows.filter((e=>e.sourceSchedule===this.selected));this.$emit("change-rows",e,this.selected)}},watch:{rows:{deep:!0,immediate:!1,handler(){this.filterRows()}}}},p=(r(21967),r(69753),r(47433));const u=(0,p.A)(d,[["render",i],["__scopeId","data-v-05c066f4"]]);var h=u},58784:function(e,t,r){"use strict";r.d(t,{A:function(){return h}});var o=r(9274);const s={class:"overview-web-console"};function a(e,t,r,a,n,l){const i=(0,o.resolveComponent)("ButtonDropdown");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createVNode)(i,{disabled:l.isOff,"no-drop":l.isOff,"button-label":"Console","dropdown-options":l.options,size:"sm",onClickAction:l.handleDropdown},null,8,["disabled","no-drop","dropdown-options","onClickAction"])])}var n=r(95186),l=r(65359),i=r(50784),c=r(20652),d={name:"VMConsoleBar",components:{ButtonDropdown:n.A},props:{resourceType:{type:Object,required:!0,default:()=>({})}},computed:{...(0,l.L8)({t:"i18n/t"}),isOff(){return this.resourceType.stateDisplay===i.OFF},options(){return[{label:this.t("harvester.virtualMachine.console.novnc"),value:"vnc"},{label:this.t("harvester.virtualMachine.console.serial"),value:"serial"}]}},methods:{handleDropdown(e){this.show(e.value)},show(e){let t=this.resourceType.metadata?.ownerReferences?.[0]?.uid;void 0===t&&(t=this.resourceType.metadata.uid);const r=window.location.host,o=window.location.pathname.replace(this.$route.path,""),s=this.$route?.params,a=`https://${r}${o}/${c.KR}/c/${s.cluster}/console/${t}/${e}`;window.open(a,"_blank",`toolbars=0,width=${screen.width-200},height=${screen.height-200},left=0,top=0,noreferrer`)},isEmpty(e){return void 0!==e&&0===Object.keys(e).length}}},p=(r(93969),r(47433));const u=(0,p.A)(d,[["render",a]]);var h=u},69760:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var o=r(9274);const s={key:0},a={key:0};function n(e,t,r,n,l,i){const c=(0,o.resolveComponent)("BadgeState");return i.migrationState?((0,o.openBlock)(),(0,o.createElementBlock)("div",s,[r.showSuccess?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("span",a,"/")),(0,o.createVNode)(c,{label:i.migrationState,color:i.migrationBackground},null,8,["label","color"])])):(0,o.createCommentVNode)("",!0)}var l=r(23005),i=r(32766),c={emits:["state-changed"],components:{BadgeState:l.j},props:{vmResource:{type:Object,required:!0},showSuccess:{type:Boolean,default:!0}},computed:{vmiResource(){const e=this.$store.getters["harvester/all"](i.rk.VMI)||[],t=e.find((e=>e?.metadata?.ownerReferences?.[0]?.uid===this.vmResource?.metadata?.uid));return t},migrationState(){return this.vmiResource?.migrationState?.status||""},migrationBackground(){return this.vmiResource?.migrationStateBackground||""}},watch:{migrationState(e){this.$emit("state-changed",e)}}},d=(r(50002),r(47433));const p=(0,d.A)(c,[["render",n],["__scopeId","data-v-9e992d88"]]);var u=p},98993:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var o=r(9274);const s=e=>((0,o.pushScopeId)("data-v-216558d8"),e=e(),(0,o.popScopeId)(),e),a={class:"state"},n=s((()=>(0,o.createElementVNode)("i",{class:"icon icon-warning icon-lg text-warning"},null,-1))),l=[n];function i(e,t,r,s,n,i){const c=(0,o.resolveComponent)("HarvesterMigrationState"),d=(0,o.resolveComponent)("VMState"),p=(0,o.resolveComponent)("v-dropdown");return(0,o.openBlock)(),(0,o.createElementBlock)("span",null,[(0,o.withDirectives)((0,o.createVNode)(c,{"vm-resource":r.row,onStateChanged:i.migrationStateChanged},null,8,["vm-resource","onStateChanged"]),[[o.vShow,n.isMigrating]]),(0,o.withDirectives)((0,o.createElementVNode)("div",a,[(0,o.createVNode)(d,{row:r.row},null,8,["row"]),i.warningMessage.length?((0,o.openBlock)(),(0,o.createBlock)(p,{key:0,ref:"popover",trigger:"manual",offset:"16"},{popper:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",{onMouseenter:t[3]||(t[3]=e=>i.showMessage(!0)),onMouseleave:t[4]||(t[4]=e=>i.showMessage(!1))},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(i.warningMessage,((s,a)=>((0,o.openBlock)(),(0,o.createElementBlock)("p",{key:a},[(0,o.createTextVNode)((0,o.toDisplayString)(a+1)+". ",1),i.canMiss(r.row,s)?((0,o.openBlock)(),(0,o.createElementBlock)("a",{key:0,class:"text-link",role:"button",onClick:t[2]||(t[2]=(...e)=>i.dismiss&&i.dismiss(...e))},(0,o.toDisplayString)(e.t("harvester.upgradePage.dismissMessage")),1)):(0,o.createCommentVNode)("",!0),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(s),1)])))),128))],32)])),default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",{class:"tooltip-target",onMouseenter:t[0]||(t[0]=e=>i.showMessage(!0)),onMouseleave:t[1]||(t[1]=e=>i.delayClose())},l,32)])),_:1},512)):(0,o.createCommentVNode)("",!0)],512),[[o.vShow,!n.isMigrating]])])}var c=r(74562),d=r(69760),p={components:{VMState:c.A,HarvesterMigrationState:d["default"]},props:{value:{type:String,default:""},row:{type:Object,required:!0},allNodeNetwork:{type:Array,default:()=>[]},allClusterNetwork:{type:Array,default:()=>[]}},data(){return{isMigrating:!1,timer:null}},beforeUnmount(){this.timer&&clearTimeout(this.timer)},computed:{warningMessage(){const e=[];if("VM error"===this.row?.actualState&&this.row.warningMessage?.message&&e.push(this.row.warningMessage?.message),this.row?.migrationMessage&&e.push(this.row?.migrationMessage.message),this.row.warningMessage?.message)if(this.row.warningMessage?.pod){const t=this.row.warningMessage.pod;t.metadata?.state?.error&&!/pod has unbound immediate PersistentVolumeClaims/.test(t.metadata?.state?.message)&&e.push(t.metadata?.state?.message)}else e.push(this.row.warningMessage?.message);return e}},methods:{migrationStateChanged(e){this.isMigrating="Failed"!==e&&!!e},showMessage(e){this.timer&&clearTimeout(this.timer),this.$refs.popover&&(e?this.$refs.popover.show():this.$refs.popover.hide())},delayClose(){this.timer=setTimeout((()=>{this.showMessage(!1)}),500)},async dismiss(){try{await this.row.doAction("dismissInsufficientResourceQuota")}catch(e){400!==e?._status&&503!==e?._status||this.$store.dispatch("growl/error",{title:this.t("harvester.notification.title.error"),message:e?.errors[0]},{root:!0})}},canMiss(e,t){return e.warningMessage?.message===t&&e.warningMessage?.canDismiss}}},u=(r(84326),r(47433));const h=(0,u.A)(p,[["render",i],["__scopeId","data-v-216558d8"]]);var m=h},9470:function(e,t,r){"use strict";r.r(t),r.d(t,{NETWORK_HEADERS:function(){return k},default:function(){return M}});var o=r(9274);const s=e=>((0,o.pushScopeId)("data-v-3a727eb5"),e=e(),(0,o.popScopeId)(),e),a={key:1},n={class:"state"},l=s((()=>(0,o.createElementVNode)("span",{class:"tooltip-target"},[(0,o.createElementVNode)("i",{class:"icon icon-warning icon-lg text-warning"})],-1)));function i(e,t,r,s,i,c){const d=(0,o.resolveComponent)("Loading"),p=(0,o.resolveComponent)("router-link"),u=(0,o.resolveComponent)("Banner"),h=(0,o.resolveComponent)("BadgeState"),m=(0,o.resolveComponent)("v-dropdown"),v=(0,o.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,o.openBlock)(),(0,o.createBlock)(d,{key:0})):((0,o.openBlock)(),(0,o.createElementBlock)("div",a,[c.abnormalNetwork.length?((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:0},(0,o.renderList)(c.abnormalNetwork,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(u,{key:t,color:"error"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p,{to:e.to},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.name)+": ",1)])),_:2},1032,["to"]),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.message),1)])),_:2},1024)))),128)):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(v,(0,o.mergeProps)(e.$attrs,{headers:c.headers,"default-sort-by":"age",schema:c.schema,groupable:!0,rows:c.filterRows,"key-field":"_key"}),{"cell:state":(0,o.withCtx)((({row:e})=>[(0,o.createElementVNode)("div",n,[(0,o.createVNode)(h,{row:e},null,8,["row"]),e.clusterNetworkErrorMessage?((0,o.openBlock)(),(0,o.createBlock)(m,{key:0,trigger:"hover",offset:"16"},{popper:(0,o.withCtx)((()=>[(0,o.createElementVNode)("p",null,(0,o.toDisplayString)(e.clusterNetworkErrorMessage),1)])),default:(0,o.withCtx)((()=>[l])),_:2},1024)):(0,o.createCommentVNode)("",!0)])])),_:1},16,["headers","schema","rows"])]))}var c=r(9980),d=r(84409),p=r(81651),u=r(74562),h=r(68774),m=r(35664),v=r(88339),g=r(2602),w=r(32766);const f={id:w.rk.NETWORK_ATTACHMENT,type:m.yx,attributes:{kind:w.rk.NETWORK_ATTACHMENT,namespaced:!0},metadata:{name:w.rk.NETWORK_ATTACHMENT}},k=[h.o_,h.CU,{name:"type",value:"vlanType",sort:"spec.config",labelKey:"tableHeaders.networkType"},{name:"vlan",value:"vlanId",sort:"spec.config",labelKey:"tableHeaders.networkVlan"},{name:"connectivity",value:"connectivity",labelKey:"tableHeaders.routeConnectivity",formatter:"BadgeStateFormatter",formatterOpts:{arbitrary:!0},width:130},h.K];var y={name:"HarvesterListNetworks",components:{ResourceTable:p.A,Banner:c.l,Loading:d.A,BadgeState:u.A},async fetch(){const e=this.$store.getters["currentCluster"],t=e.isHarvester?"harvester":"cluster",r={rows:this.$store.dispatch(`${t}/findAll`,{type:m.XG})};this.$store.getters[`${t}/schemaFor`](w.rk.NODE_NETWORK)&&(r.hostNetworks=this.$store.dispatch(`${t}/findAll`,{type:w.rk.NODE_NETWORK})),this.$store.getters[`${t}/schemaFor`](w.rk.CLUSTER_NETWORK)&&(r.clusterNetworks=this.$store.dispatch(`${t}/findAll`,{type:w.rk.CLUSTER_NETWORK}));const o=await(0,v.kR)(r);this.rows=o.rows,this.hostNetworks=o.hostNetworks||[]},data(){return{hash:{},rows:[],hosts:[],hostNetworks:[]}},computed:{headers(){return[h.c4,h.o_,h.CU,{name:"type",value:"vlanType",sort:"spec.config",labelKey:"tableHeaders.networkType"},{name:"clusterNetwork",value:"clusterNetwork",sort:"clusterNetwork",labelKey:"harvester.network.clusterNetwork.label"},{name:"vlan",value:"vlanId",sort:"spec.config",labelKey:"tableHeaders.networkVlan"},{name:"connectivity",value:"connectivity",labelKey:"tableHeaders.routeConnectivity",formatter:"NetworkRouteConnectivity",formatterOpts:{arbitrary:!0},width:130},h.K]},schema(){return f},abnormalNetwork(){const e=this.hostNetworks.filter((e=>!e.isReady));return e.map((e=>e.linkMessage))},filterRows(){return this.rows.filter((e=>!e.metadata?.annotations?.[g.r.STORAGE_NETWORK]))}},typeDisplay(){return this.$store.getters["type-map/labelFor"](f,99)}},b=(r(55336),r(47433));const N=(0,b.A)(y,[["render",i],["__scopeId","data-v-3a727eb5"]]);var M=N},61117:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y},schema:function(){return g}});var o=r(9274);const s={key:1},a={key:1};function n(e,t,r,n,l,i){const c=(0,o.resolveComponent)("Loading"),d=(0,o.resolveComponent)("Masthead"),p=(0,o.resolveComponent)("FilterVMSchedule"),u=(0,o.resolveComponent)("router-link"),h=(0,o.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,o.openBlock)(),(0,o.createBlock)(c,{key:0})):((0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createVNode)(d,{schema:null,resource:l.resource,"type-display":i.typeDisplay,"create-button-label":e.t("harvester.vmSnapshot.createText")},null,8,["resource","type-display","create-button-label"]),(0,o.createVNode)(h,(0,o.mergeProps)(e.$attrs,{headers:i.headers,groupable:!0,rows:i.filteredRows,schema:i.schema,"sort-generation-fn":i.sortGenerationFn,"key-field":"_key","default-sort-by":"age"}),(0,o.createSlots)({"col:name":(0,o.withCtx)((({row:e})=>[(0,o.createElementVNode)("td",null,[(0,o.createElementVNode)("span",null,[e.status&&e.status.source?((0,o.openBlock)(),(0,o.createBlock)(u,{key:0,to:e.detailLocation},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.nameDisplay),1)])),_:2},1032,["to"])):((0,o.openBlock)(),(0,o.createElementBlock)("span",a,(0,o.toDisplayString)(e.nameDisplay),1))])])])),_:2},[i.schedulingVMBackupFeatureEnabled?{name:"more-header-middle",fn:(0,o.withCtx)((()=>[(0,o.createVNode)(p,{rows:i.getRawRows,onChangeRows:i.changeRows},null,8,["rows","onChangeRows"])])),key:"0"}:void 0]),1040,["headers","rows","schema","sort-generation-fn"])]))}var l=r(84409),i=r(66656),c=r(81651),d=r(35664),p=r(88339),u=r(55423),h=r(68774),m=r(32766),v=r(41837);const g={id:m.rk.VM_SNAPSHOT,type:d.yx,attributes:{kind:m.rk.VM_SNAPSHOT,namespaced:!0},metadata:{name:m.rk.VM_SNAPSHOT}};var w={name:"HarvesterListVMSnapshot",components:{ResourceTable:c.A,Loading:l.A,Masthead:i.A,FilterVMSchedule:u.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await(0,p.kR)({vms:this.$store.dispatch(`${e}/findAll`,{type:m.rk.VM}),rows:this.$store.dispatch(`${e}/findAll`,{type:m.rk.BACKUP})}),r=this.$store.getters[`${e}/schemaFor`](m.rk.BACKUP);r?.collectionMethods.find((e=>"post"===e.toLowerCase()))||this.$store.dispatch("type-map/configureType",{match:m.rk.VM_SNAPSHOT,isCreatable:!1}),this.rows=t.rows,this.snapshots=t.rows},data(){const e={...this.$route.params},t=e.resource;return{rows:[],snapshots:[],searchSchedule:"",resource:t}},computed:{headers(){const e=[h.c4,h.o_,h.CU,{name:"targetVM",labelKey:"harvester.tableHeaders.targetVm",value:"attachVM",align:"left",sort:"attachVM",formatter:"AttachVMWithName"}];return this.schedulingVMBackupFeatureEnabled&&e.push({name:"backupCreatedFrom",labelKey:"harvester.tableHeaders.vmSchedule",value:"sourceSchedule",sort:"sourceSchedule",formatter:"BackupCreatedFrom"}),e.push({name:"readyToUse",labelKey:"tableHeaders.readyToUse",value:"status.readyToUse",align:"center",sort:"status.readyToUse",formatter:"Checked"},h.K),e},schedulingVMBackupFeatureEnabled(){return this.$store.getters["harvester-common/getFeatureEnabled"]("schedulingVMBackup")},getRawRows(){return this.rows.filter((e=>e.spec?.type===v.a.SNAPSHOT))},schema(){return g},typeDisplay(){return this.$store.getters["type-map/labelFor"](g,99)},filteredRows(){return this.snapshots.filter((e=>e.spec?.type!==v.a.BACKUP))}},methods:{changeRows(e,t){this["searchSchedule"]=t,this["snapshots"]=e},sortGenerationFn(){let e=(0,c.S)(this.schema,this.$store);return e+=this.searchSchedule,e}}},f=r(47433);const k=(0,f.A)(w,[["render",n]]);var y=k},29809:function(e,t,r){"use strict";r.r(t),r.d(t,{VM_HEADERS:function(){return f},default:function(){return N}});var o=r(9274);const s={key:1},a={class:"state"},n={class:"name-console"},l={key:1};function i(e,t,r,i,c,d){const p=(0,o.resolveComponent)("Loading"),u=(0,o.resolveComponent)("HarvesterVmState"),h=(0,o.resolveComponent)("router-link"),m=(0,o.resolveComponent)("ConsoleBar"),v=(0,o.resolveComponent)("ResourceTable"),g=(0,o.resolveDirective)("tooltip");return e.$fetchState.pending?((0,o.openBlock)(),(0,o.createBlock)(p,{key:0})):((0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createVNode)(v,(0,o.mergeProps)(e.$attrs,{headers:d.headers,"default-sort-by":"age",rows:d.rows,schema:r.schema,groupable:!0,"key-field":"_key"}),{"cell:state":(0,o.withCtx)((e=>[(0,o.createElementVNode)("div",a,[(0,o.createVNode)(u,{class:"vmstate",row:e.row,"all-node-network":c.allNodeNetworks,"all-cluster-network":c.allClusterNetworks},null,8,["row","all-node-network","all-cluster-network"])])])),"cell:name":(0,o.withCtx)((e=>[(0,o.createElementVNode)("div",n,[e.row.type!==c.HCI.VMI?((0,o.openBlock)(),(0,o.createBlock)(h,{key:0,to:e.row.detailLocation},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.row.metadata.name)+" ",1),d.lockIconTooltipMessage(e.row)?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("i",{key:0,class:(0,o.normalizeClass)(["icon icon-lock",{"green-icon":"all"===e.row.encryptedVolumeType,"yellow-icon":"partial"===e.row.encryptedVolumeType}])},null,2)),[[g,d.lockIconTooltipMessage(e.row)]]):(0,o.createCommentVNode)("",!0)])),_:2},1032,["to"])):((0,o.openBlock)(),(0,o.createElementBlock)("span",l,(0,o.toDisplayString)(e.row.metadata.name),1)),(0,o.createVNode)(m,{"resource-type":e.row,class:"console mr-10 ml-10"},null,8,["resource-type"])])])),_:1},16,["headers","rows","schema"])]))}var c=r(81651),d=r(68774),p=r(35664),u=r(88339),h=r(84409),m=r(76978),v=r(32766),g=r(98993),w=r(58784);const f=[d.c4,{...d.o_,width:350},d.CU,{name:"CPU",label:"CPU",sort:["spec.template.spec.domain.cpu.cores"],value:"spec.template.spec.domain.cpu.cores",align:"center",dashIfEmpty:!0},{name:"Memory",value:"displayMemory",sort:["memorySort"],align:"center",labelKey:"tableHeaders.memory",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"ip",label:"IP Address",value:"id",formatter:"HarvesterIpAddress",labelKey:"tableHeaders.ipAddress",sort:["id"]},{...d.K,sort:"metadata.creationTimestamp:desc"}];var k={name:"HarvesterListVM",components:{Loading:h.A,HarvesterVmState:g["default"],ConsoleBar:w.A,ResourceTable:c.A},props:{schema:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={vms:this.$store.dispatch(`${e}/findAll`,{type:v.rk.VM}),pod:this.$store.dispatch(`${e}/findAll`,{type:p.Sm}),pvcs:this.$store.dispatch(`${e}/findAll`,{type:p.YH}),pvs:this.$store.dispatch(`${e}/findAll`,{type:p.PV}),images:this.$store.dispatch(`${e}/findAll`,{type:v.rk.IMAGE}),restore:this.$store.dispatch(`${e}/findAll`,{type:v.rk.RESTORE}),backups:this.$store.dispatch(`${e}/findAll`,{type:v.rk.BACKUP}),storage:this.$store.dispatch(`${e}/findAll`,{type:p.fJ})};this.$store.getters[`${e}/schemaFor`](v.rk.RESOURCE_QUOTA)&&(t.resourceQuotas=this.$store.dispatch(`${e}/findAll`,{type:v.rk.RESOURCE_QUOTA})),this.$store.getters[`${e}/schemaFor`](p.NW)&&(t.nodes=this.$store.dispatch(`${e}/findAll`,{type:p.NW}),this.hasNode=!0),this.$store.getters[`${e}/schemaFor`](v.rk.NODE_NETWORK)&&(t.nodeNetworks=this.$store.dispatch(`${e}/findAll`,{type:v.rk.NODE_NETWORK})),this.$store.getters[`${e}/schemaFor`](v.rk.CLUSTER_NETWORK)&&(t.clusterNetworks=this.$store.dispatch(`${e}/findAll`,{type:v.rk.CLUSTER_NETWORK}));const r=await(0,u.kR)(t);this.allVMs=r.vms,this.allNodeNetworks=r.nodeNetworks||[],this.allClusterNetworks=r.clusterNetworks||[]},data(){return{hasNode:!1,allVMs:[],allVMIs:[],allNodeNetworks:[],allClusterNetworks:[],HCI:v.rk}},computed:{headers(){const e={name:"restoreProgress",labelKey:"harvester.tableHeaders.restore",value:"restoreProgress",align:"left",formatter:"HarvesterBackupProgressBar",width:200},t={name:"node",label:"Node",value:"nodeName",sort:["realAttachNodeName"],formatter:"HarvesterHost",labelKey:"harvester.tableHeaders.vm.node"},r=(0,m.o8)(f);return this.hasNode&&r.splice(-1,0,t),this.hasBackUpRestoreInProgress&&r.splice(-1,0,e),r},rows(){const e=this.allVMIs.filter((e=>!this.allVMs.find((t=>t.id===e.id))));return[...this.allVMs,...e]},hasBackUpRestoreInProgress(){return!!this.rows.find((e=>e.restoreResource&&!e.restoreResource.fromSnapshot&&!e.restoreResource.isComplete))}},async created(){const e=this.$store.getters["currentProduct"].inStore,t=await this.$store.dispatch(`${e}/findAll`,{type:v.rk.VMI});await this.$store.dispatch(`${e}/findAll`,{type:v.rk.VMIM}),this["allVMIs"]=t},methods:{lockIconTooltipMessage(e){const t="";return"all"===e.encryptedVolumeType?this.t("harvester.virtualMachine.volume.lockTooltip.all"):"partial"===e.encryptedVolumeType?this.t("harvester.virtualMachine.volume.lockTooltip.partial"):t}}},y=(r(76945),r(47433));const b=(0,y.A)(k,[["render",i],["__scopeId","data-v-731b1bf3"]]);var N=b},51151:function(e,t,r){"use strict";r.r(t);var o=r(36758),s=r.n(o),a=r(40935),n=r.n(a),l=n()(s());l.push([e.id,".vm-schedule-dropdown .v-popper__arrow-container{display:none}",""]),t["default"]=l},72921:function(e,t,r){"use strict";r.r(t);var o=r(36758),s=r.n(o),a=r(40935),n=r.n(a),l=n()(s());l.push([e.id,".vm-schedule-filter[data-v-05c066f4]{display:inline-block}.vm-schedule-filter .banner-item[data-v-05c066f4]{display:inline-block;font-size:16px;margin-right:10px;padding:6px;border-radius:2px}.vm-schedule-filter .banner-item i[data-v-05c066f4]{cursor:pointer;vertical-align:middle}.filter-popup[data-v-05c066f4]{width:-moz-max-content;width:max-content}",""]),t["default"]=l},37201:function(e,t,r){"use strict";r.r(t);var o=r(36758),s=r.n(o),a=r(40935),n=r.n(a),l=n()(s());l.push([e.id,".overview-web-console .btn{line-height:24px;min-height:24px}",""]),t["default"]=l},99826:function(e,t,r){"use strict";r.r(t);var o=r(36758),s=r.n(o),a=r(40935),n=r.n(a),l=n()(s());l.push([e.id,".badge-state[data-v-9e992d88]{padding:5px 10px;border:1px solid transparent;border-radius:20px}.badge-state.bg-info[data-v-9e992d88]{border-color:var(--primary)}.badge-state.bg-error[data-v-9e992d88]{border-color:var(--error)}.badge-state.bg-warning[data-v-9e992d88]{border-color:var(--warning)}.badge-state.bg-success[data-v-9e992d88]{color:var(--success);border-color:var(--success);background:transparent}.sortable-table TD .badge-state[data-v-9e992d88]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;word-wrap:break-word;display:inline-block;max-width:100%;position:relative;padding:2px 10px 1px 10px;font-size:1em;max-width:200px;font-size:.85em;vertical-align:middle}",""]),t["default"]=l},21126:function(e,t,r){"use strict";r.r(t);var o=r(36758),s=r.n(o),a=r(40935),n=r.n(a),l=n()(s());l.push([e.id,".state[data-v-216558d8]{display:flex;justify-content:space-between}.state .icon-warning[data-v-216558d8]{margin-top:2px}",""]),t["default"]=l},62376:function(e,t,r){"use strict";r.r(t);var o=r(36758),s=r.n(o),a=r(40935),n=r.n(a),l=n()(s());l.push([e.id,".state[data-v-3a727eb5]{display:flex;justify-content:space-between}.state .icon-warning[data-v-3a727eb5]{margin-top:2px}",""]),t["default"]=l},60049:function(e,t,r){"use strict";r.r(t);var o=r(36758),s=r.n(o),a=r(40935),n=r.n(a),l=n()(s());l.push([e.id,".state[data-v-731b1bf3]{display:flex}.state .vmstate[data-v-731b1bf3]{margin-right:6px}.green-icon[data-v-731b1bf3]{color:var(--success)}.yellow-icon[data-v-731b1bf3]{color:var(--warning)}.name-console[data-v-731b1bf3]{display:flex;align-items:center;justify-content:space-between}.name-console span[data-v-731b1bf3]{padding-right:4px;line-height:26px;white-space:nowrap}",""]),t["default"]=l},5662:function(e,t,r){"use strict";function o(e){const t=Object.keys(e),r=Object.values(e);return Promise.allSettled(r).then((e=>{const r={};for(let o=0;o<t.length;o++)"fulfilled"===e[o].status?r[t[o]]=e[o].value:r[t[o]]=[];return r}))}r.d(t,{v:function(){return o}})},21967:function(e,t,r){var o=r(51151);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=r(74825).A;s("59a4d00e",o,!0,{sourceMap:!1,shadowMode:!1})},69753:function(e,t,r){var o=r(72921);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=r(74825).A;s("e1fabce2",o,!0,{sourceMap:!1,shadowMode:!1})},93969:function(e,t,r){var o=r(37201);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=r(74825).A;s("84bb1b30",o,!0,{sourceMap:!1,shadowMode:!1})},50002:function(e,t,r){var o=r(99826);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=r(74825).A;s("3657a623",o,!0,{sourceMap:!1,shadowMode:!1})},84326:function(e,t,r){var o=r(21126);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=r(74825).A;s("390707e0",o,!0,{sourceMap:!1,shadowMode:!1})},55336:function(e,t,r){var o=r(62376);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=r(74825).A;s("526396c4",o,!0,{sourceMap:!1,shadowMode:!1})},76945:function(e,t,r){var o=r(60049);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=r(74825).A;s("52385cd1",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=harvester-1.0.5.umd.min.545.js.map