{"version":3,"file":"harvester-1.7.1.umd.min.472.js","mappings":"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","sources":["webpack://harvester-1.7.1/./components/HarvesterUpgradeHeader.vue","webpack://harvester-1.7.1/./components/HarvesterUpgradeProgressBarList.vue","webpack://harvester-1.7.1/./components/HarvesterUpgradeProgressBarList.vue?63ec","webpack://harvester-1.7.1/./components/HarvesterUpgradeHeader.vue?795b","webpack://harvester-1.7.1/./components/HarvesterUpgradeHeader.vue?6075","webpack://harvester-1.7.1/./components/HarvesterUpgradeHeader.vue?bf4c","webpack://harvester-1.7.1/./components/HarvesterUpgradeProgressBarList.vue?fedd","webpack://harvester-1.7.1/./components/HarvesterUpgradeHeader.vue?adbf","webpack://harvester-1.7.1/./components/HarvesterUpgradeHeader.vue?28c6","webpack://harvester-1.7.1/./components/HarvesterUpgradeProgressBarList.vue?c783"],"sourcesContent":["<script>\nimport { NODE } from '@shell/config/types';\nimport { allHash } from '@shell/utils/promise';\nimport { HCI as HCI_ANNOTATIONS } from '@pkg/harvester/config/labels-annotations';\nimport PercentageBar from '@shell/components/PercentageBar';\nimport BadgeStateFormatter from '@shell/components/formatter/BadgeStateFormatter';\nimport { mapGetters } from 'vuex';\nimport { PRODUCT_NAME as HARVESTER } from '../config/harvester';\nimport { HCI } from '../types';\nimport ProgressBarList from './HarvesterUpgradeProgressBarList';\n\nexport default {\n  name:       'HarvesterUpgradeHeader',\n  components: {\n    PercentageBar, ProgressBarList, BadgeStateFormatter\n  },\n\n  async fetch() {\n    const hash = {};\n\n    if (this.$store.getters['harvester/schemaFor'](HCI.IMAGE)) {\n      hash.images = this.$store.dispatch('harvester/findAll', { type: HCI.IMAGE });\n    }\n\n    if (this.$store.getters['harvester/schemaFor'](HCI.UPGRADE)) {\n      hash.upgrades = this.$store.dispatch('harvester/findAll', { type: HCI.UPGRADE });\n    }\n\n    if (this.$store.getters['harvester/schemaFor'](NODE)) {\n      hash.nodes = this.$store.dispatch('harvester/findAll', { type: NODE });\n    }\n\n    if (this.$store.getters['harvester/schemaFor'](HCI.UPGRADE_LOG)) {\n      hash.upgradeLogs = this.$store.dispatch('harvester/findAll', { type: HCI.UPGRADE_LOG });\n    }\n\n    await allHash(hash);\n  },\n\n  data() {\n    return {\n      filename:       '',\n      logDownloading: false\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentProduct', 'isVirtualCluster']),\n\n    enabled() {\n      return this.isVirtualCluster && this.currentProduct.name === HARVESTER;\n    },\n\n    latestResource() {\n      return this.$store.getters['harvester/all'](HCI.UPGRADE).find( (U) => U.isLatestUpgrade);\n    },\n\n    latestUpgradeLogResource() {\n      const upgradeLogId = `${ this.latestResource.id }-upgradelog`;\n\n      return this.$store.getters['harvester/all'](HCI.UPGRADE_LOG).find( (U) => U.id === upgradeLogId);\n    },\n\n    downloadLogFailReason() {\n      if (!this.filename) {\n        const filename = this.latestUpgradeLogResource?.latestArchivesFileName;\n\n        return this.latestUpgradeLogResource?.downloadArchivesStatus(filename);\n      }\n\n      return this.latestUpgradeLogResource?.downloadArchivesStatus(this.filename);\n    },\n\n    canStartedDownload() {\n      return this.latestUpgradeLogResource?.canStartedDownload || false;\n    },\n\n    overallMessage() {\n      return this.latestResource?.overallMessage;\n    },\n\n    upgradeImage() {\n      const id = this.latestResource?.upgradeImage;\n\n      return this.$store.getters['harvester/all'](HCI.IMAGE).find((I) => I.id === id);\n    },\n\n    imageProgress() {\n      return this.upgradeImage?.progress || 0;\n    },\n\n    showImage() {\n      return !this.latestResource.isUpgradeSucceeded;\n    },\n\n    imageMessage() {\n      return this.latestResource?.upgradeImageMessage;\n    },\n\n    repoReady() {\n      return this.latestResource.createRepo;\n    },\n\n    isShow() {\n      return this.latestResource && !this.latestResource.hasReadMessage;\n    },\n\n    nodesStatus() {\n      return this.latestResource?.nodeUpgradeMessage;\n    },\n\n    sysServiceUpgradeMessage() {\n      return this.latestResource?.sysServiceUpgradeMessage;\n    },\n\n    sysServiceTotal() {\n      return this.sysServiceUpgradeMessage?.[0].percent || 0;\n    },\n\n    nodesPercent() {\n      return this.latestResource?.nodeTotalPercent || 0;\n    },\n\n    repoInfo() {\n      return this.latestResource.repoInfo;\n    },\n\n    releaseLink() {\n      return `https://github.com/harvester/harvester/releases/tag/${ this.latestResource?.spec?.version }`;\n    },\n\n    upgradeVersion() {\n      return this.latestResource?.spec?.version;\n    }\n  },\n\n  methods: {\n    ignoreMessage() {\n      this.latestResource.setLabel(HCI_ANNOTATIONS.REAY_MESSAGE, 'true');\n      this.latestResource.save();\n    },\n\n    async generateLogFileName() {\n      const res = await this.latestUpgradeLogResource.doActionGrowl('generate');\n\n      this.filename = res?.data;\n    },\n\n    waitFileGeneratedReady() {\n      const id = this.latestUpgradeLogResource.id;\n\n      return new Promise((resolve) => {\n        let log;\n\n        const timer = setInterval(async() => {\n          log = await this.$store.dispatch('harvester/find', {\n            type: HCI.UPGRADE_LOG,\n            id,\n            opt:  { force: true }\n          }, { root: true });\n\n          if (log.fileIsReady(this.filename)) {\n            this.logDownloading = false;\n            clearInterval(timer);\n            resolve();\n          }\n        }, 2500);\n      });\n    },\n\n    async downloadLog() {\n      this.logDownloading = true;\n      await this.generateLogFileName();\n      this.waitFileGeneratedReady().then(() => {\n        if (!this.downloadLogFailReason) {\n          this.latestUpgradeLogResource.downloadLog(this.filename);\n        }\n        this.logDownloading = false;\n      });\n    }\n  }\n};\n</script>\n<template>\n  <div\n    v-if=\"enabled && isShow\"\n    class=\"upgrade\"\n  >\n    <v-dropdown\n      v-clean-tooltip=\"{\n        placement: 'bottom-left',\n      }\"\n      popper-class=\"upgrade-header-dropdown\"\n      class=\"hand\"\n    >\n      <slot name=\"button-content\">\n        <i class=\"warning icon-fw icon icon-dot-open dot-icon\" />\n      </slot>\n\n      <template #popper>\n        <div class=\"upgrade-info mb-10\">\n          <div\n            v-if=\"repoInfo\"\n            class=\"repoInfo\"\n          >\n            <div class=\"row\">\n              <div class=\"col span-12\">\n                <a\n                  :href=\"releaseLink\"\n                  target=\"_blank\"\n                >{{ upgradeVersion }}</a>\n              </div>\n            </div>\n            <div\n              v-if=\"latestResource\"\n              class=\"row mb-5\"\n            >\n              <div class=\"col span-12\">\n                <p class=\"state\">\n                  {{ t('harvester.upgradePage.repoInfo.upgradeStatus') }}: <BadgeStateFormatter\n                    class=\"ml-5\"\n                    :row=\"latestResource\"\n                  />\n                </p>\n              </div>\n            </div>\n\n            <div\n              v-if=\"downloadLogFailReason\"\n              class=\"row mb-5\"\n            >\n              <div class=\"col span-12\">\n                <p class=\"state\">\n                  {{ t('harvester.upgradePage.repoInfo.logStatus') }}: <span class=\"error ml-5\">{{ downloadLogFailReason }}</span>\n                </p>\n              </div>\n            </div>\n\n            <p class=\"bordered-section\"></p>\n\n            <div class=\"row mb-5\">\n              <div class=\"col span-6\">\n                {{ t('harvester.upgradePage.repoInfo.os') }}: <span class=\"text-muted\">{{ repoInfo.release.os }}</span>\n              </div>\n\n              <div class=\"col span-6\">\n                {{ t('harvester.productLabel') }}: <span class=\"text-muted\">{{ repoInfo.release.harvester }}</span>\n              </div>\n            </div>\n\n            <div class=\"row mb-5\">\n              <div class=\"col span-6\">\n                {{ t('harvester.upgradePage.repoInfo.harvesterChart') }}: <span class=\"text-muted\">{{ repoInfo.release.harvesterChart }}</span>\n              </div>\n\n              <div class=\"col span-6\">\n                {{ t('harvester.upgradePage.repoInfo.monitoringChart') }}: <span class=\"text-muted\">{{ repoInfo.release.monitoringChart }}</span>\n              </div>\n            </div>\n\n            <div class=\"row mb-5\">\n              <div class=\"col span-6\">\n                {{ t('harvester.upgradePage.repoInfo.kubernetes') }}: <span class=\"text-muted\">{{ repoInfo.release.kubernetes }}</span>\n              </div>\n\n              <div class=\"col span-6\">\n                {{ t('product.rancher') }}: <span class=\"text-muted\">{{ repoInfo.release.rancher }}</span>\n              </div>\n            </div>\n\n            <p class=\"bordered-section\"></p>\n          </div>\n\n          <p\n            v-if=\"overallMessage\"\n            class=\"text-error mb-20\"\n          >\n            {{ overallMessage }}\n          </p>\n\n          <div v-if=\"showImage\">\n            <h4>{{ t('harvester.upgradePage.upgradeImage') }}<span class=\"float-r text-info\">{{ imageProgress }}%</span></h4>\n            <PercentageBar\n              :model-value=\"imageProgress\"\n              preferred-direction=\"MORE\"\n            />\n            <p class=\"text-warning\">\n              {{ imageMessage }}\n            </p>\n            <p class=\"bordered-section\"></p>\n          </div>\n\n          <h4>{{ t('harvester.upgradePage.createRepository') }} <span class=\"float-r text-info\">{{ repoReady.isReady ? t('harvester.upgradePage.succeeded') : t('harvester.upgradePage.pending') }}</span></h4>\n          <p\n            v-if=\"repoReady.message\"\n            class=\"text-warning\"\n          >\n            {{ repoReady.message }}\n          </p>\n          <p class=\"bordered-section\"></p>\n\n          <ProgressBarList\n            :title=\"t('harvester.upgradePage.upgradeNode')\"\n            :percent=\"nodesPercent\"\n            :list=\"nodesStatus\"\n          />\n          <p class=\"bordered-section\"></p>\n\n          <ProgressBarList\n            :title=\"t('harvester.upgradePage.upgradeSysService')\"\n            :percent=\"sysServiceTotal\"\n            :list=\"sysServiceUpgradeMessage\"\n          />\n        </div>\n\n        <div class=\"footer\">\n          <button\n            v-if=\"canStartedDownload\"\n            :disabled=\"logDownloading\"\n            class=\"btn role-primary mr-10\"\n            @click=\"downloadLog()\"\n          >\n            <i\n              class=\"icon mr-10\"\n              :class=\"[logDownloading ? 'icon-spinner icon-spin' : 'icon-download']\"\n            ></i> {{ t('harvester.upgradePage.repoInfo.downloadLog') }}\n          </button>\n\n          <button\n            v-if=\"latestResource.isUpgradeSucceeded\"\n            class=\"btn role-primary\"\n            @click=\"ignoreMessage()\"\n          >\n            {{ t('harvester.upgradePage.dismissMessage') }}\n          </button>\n        </div>\n      </template>\n    </v-dropdown>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.upgrade-header-dropdown .v-popper__arrow-container {\n  display: none;\n}\n</style>\n\n<style lang=\"scss\" scoped>\na {\n  float: right;\n  color: var(--link) !important;\n  text-decoration: none;\n}\n\n.upgrade {\n  height: 100%;\n  min-width: 40px;\n  display: flex;\n  align-items: center;\n\n  .dot-icon {\n    font-size: 24px;\n    vertical-align: middle;\n    color: #00a483;\n  }\n}\n\n.upgrade-info {\n  min-width: 550px;\n  max-height: 90vh;\n  overflow-y: scroll;\n\n  .repoInfo {\n    .col span {\n      word-break: break-all\n    }\n\n    p.state {\n      display: flex;\n      align-items: center;\n    }\n  }\n\n  .error {\n    color: var(--error);\n  }\n\n  .float-r {\n    float: right;\n  }\n\n  p {\n    word-break: break-word;\n    margin-top: 5px;\n  }\n}\n\n.footer {\n  display: flex;\n  justify-content: flex-end;\n}\n</style>\n","<script>\nimport Collapse from '@shell/components/Collapse';\nimport PercentageBar from '@shell/components/PercentageBar';\n\nexport default {\n  name:       'HarvesterUpgradeProgressList',\n  components: { PercentageBar, Collapse },\n\n  props: {\n    title: {\n      type:    String,\n      default: ''\n    },\n\n    percent: {\n      type:    Number,\n      default: 0\n    },\n\n    list: {\n      type:    Array,\n      default: () => {\n        return [];\n      }\n    }\n  },\n\n  data() {\n    return { open: true };\n  },\n\n  methods: {\n    handleSwitch() {\n      this.open = !this.open;\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"bar-list\">\n    <h4>{{ title }} <span class=\"float-r text-info\">{{ percent }}%</span></h4>\n    <div>\n      <div>\n        <Collapse v-model:open=\"open\">\n          <template #title>\n            <div class=\"total-bar\">\n              <span class=\"bar\">\n                <PercentageBar\n                  :model-value=\"percent\"\n                  preferred-direction=\"MORE\"\n                />\n              </span>\n              <span\n                class=\"on-off\"\n                @click=\"handleSwitch\"\n              > {{ open ? t('harvester.generic.close') : t('harvester.generic.open') }}</span>\n            </div>\n          </template>\n\n          <div class=\"custom-content\">\n            <div\n              v-for=\"(item, i) in list\"\n              :key=\"i\"\n            >\n              <p>\n                {{ item.name }} <span\n                  class=\"status\"\n                  :class=\"{ [item.state]: true }\"\n                >{{ item.state }}</span>\n              </p>\n              <PercentageBar\n                :model-value=\"item.percent\"\n                preferred-direction=\"MORE\"\n              />\n              <p class=\"warning\">\n                {{ item.message }}\n              </p>\n            </div>\n          </div>\n        </Collapse>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.bar-list {\n  .float-r {\n    float: right;\n  }\n\n  .total-bar {\n    display: flex;\n    user-select: none;\n    > .bar {\n      width: 85%;\n    }\n    .on-off {\n      margin-left: 10px;\n      cursor: pointer;\n    }\n  }\n  .custom-content {\n    margin-bottom: 14px;\n    p {\n      margin-bottom: 4px;\n    }\n    .status {\n      float: right;\n    }\n    .Succeeded, .Upgrading, .Pending {\n      color: var(--success);\n    }\n    .failed {\n      color: var(--error)\n    }\n    .warning {\n      color: var(--error);\n    }\n  }\n}\n</style>\n","import { render } from \"./HarvesterUpgradeProgressBarList.vue?vue&type=template&id=1acd4c96&scoped=true\"\nimport script from \"./HarvesterUpgradeProgressBarList.vue?vue&type=script&lang=js\"\nexport * from \"./HarvesterUpgradeProgressBarList.vue?vue&type=script&lang=js\"\n\nimport \"./HarvesterUpgradeProgressBarList.vue?vue&type=style&index=0&id=1acd4c96&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1acd4c96\"]])\n\nexport default __exports__","import { render } from \"./HarvesterUpgradeHeader.vue?vue&type=template&id=5745bf0e&scoped=true\"\nimport script from \"./HarvesterUpgradeHeader.vue?vue&type=script&lang=js\"\nexport * from \"./HarvesterUpgradeHeader.vue?vue&type=script&lang=js\"\n\nimport \"./HarvesterUpgradeHeader.vue?vue&type=style&index=0&id=5745bf0e&lang=scss\"\nimport \"./HarvesterUpgradeHeader.vue?vue&type=style&index=1&id=5745bf0e&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5745bf0e\"]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".upgrade-header-dropdown .v-popper__arrow-container{display:none}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"a[data-v-5745bf0e]{float:right;color:var(--link)!important;text-decoration:none}.upgrade[data-v-5745bf0e]{height:100%;min-width:40px;display:flex;align-items:center}.upgrade .dot-icon[data-v-5745bf0e]{font-size:24px;vertical-align:middle;color:#00a483}.upgrade-info[data-v-5745bf0e]{min-width:550px;max-height:90vh;overflow-y:scroll}.upgrade-info .repoInfo .col span[data-v-5745bf0e]{word-break:break-all}.upgrade-info .repoInfo p.state[data-v-5745bf0e]{display:flex;align-items:center}.upgrade-info .error[data-v-5745bf0e]{color:var(--error)}.upgrade-info .float-r[data-v-5745bf0e]{float:right}.upgrade-info p[data-v-5745bf0e]{word-break:break-word;margin-top:5px}.footer[data-v-5745bf0e]{display:flex;justify-content:flex-end}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".bar-list .float-r[data-v-1acd4c96]{float:right}.bar-list .total-bar[data-v-1acd4c96]{display:flex;-webkit-user-select:none;-moz-user-select:none;user-select:none}.bar-list .total-bar>.bar[data-v-1acd4c96]{width:85%}.bar-list .total-bar .on-off[data-v-1acd4c96]{margin-left:10px;cursor:pointer}.bar-list .custom-content[data-v-1acd4c96]{margin-bottom:14px}.bar-list .custom-content p[data-v-1acd4c96]{margin-bottom:4px}.bar-list .custom-content .status[data-v-1acd4c96]{float:right}.bar-list .custom-content .Pending[data-v-1acd4c96],.bar-list .custom-content .Succeeded[data-v-1acd4c96],.bar-list .custom-content .Upgrading[data-v-1acd4c96]{color:var(--success)}.bar-list .custom-content .failed[data-v-1acd4c96],.bar-list .custom-content .warning[data-v-1acd4c96]{color:var(--error)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./HarvesterUpgradeHeader.vue?vue&type=style&index=0&id=5745bf0e&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"391b5cb5\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./HarvesterUpgradeHeader.vue?vue&type=style&index=1&id=5745bf0e&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"68e9c16a\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./HarvesterUpgradeProgressBarList.vue?vue&type=style&index=0&id=1acd4c96&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"d190e44a\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["class","$options","enabled","isShow","_createElementBlock","_hoisted_1","_createBlock","_component_v_dropdown","popper","_withCtx","_createElementVNode","_hoisted_2","repoInfo","_hoisted_3","_hoisted_4","_hoisted_5","href","releaseLink","target","upgradeVersion","_hoisted_6","latestResource","_hoisted_7","_hoisted_8","_hoisted_9","_ctx","t","_createVNode","_component_BadgeStateFormatter","row","downloadLogFailReason","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_toDisplayString","_hoisted_14","_hoisted_15","_hoisted_16","release","os","_hoisted_17","_hoisted_18","harvester","_hoisted_19","_hoisted_20","_hoisted_21","harvesterChart","_hoisted_22","_hoisted_23","monitoringChart","_hoisted_24","_hoisted_25","_hoisted_26","kubernetes","_hoisted_27","_hoisted_28","rancher","overallMessage","_hoisted_29","showImage","_hoisted_30","_hoisted_31","imageProgress","_component_PercentageBar","_hoisted_32","imageMessage","_hoisted_33","repoReady","isReady","message","_hoisted_34","_component_ProgressBarList","title","percent","nodesPercent","list","nodesStatus","sysServiceTotal","sysServiceUpgradeMessage","_hoisted_35","canStartedDownload","disabled","$data","logDownloading","onClick","_cache","$event","downloadLog","_normalizeClass","isUpgradeSucceeded","ignoreMessage","_renderSlot","$slots","$props","_component_Collapse","open","args","handleSwitch","_Fragment","_renderList","item","i","key","name","state","components","PercentageBar","Collapse","props","type","String","default","Number","Array","data","methods","this","__exports__","ProgressBarList","BadgeStateFormatter","fetch","hash","$store","getters","HCI","IMAGE","images","dispatch","UPGRADE","upgrades","NODE","nodes","UPGRADE_LOG","upgradeLogs","allHash","filename","computed","mapGetters","isVirtualCluster","currentProduct","HARVESTER","find","U","isLatestUpgrade","latestUpgradeLogResource","upgradeLogId","id","latestArchivesFileName","downloadArchivesStatus","upgradeImage","I","progress","upgradeImageMessage","createRepo","hasReadMessage","nodeUpgradeMessage","nodeTotalPercent","spec","version","setLabel","HCI_ANNOTATIONS","REAY_MESSAGE","save","generateLogFileName","res","doActionGrowl","waitFileGeneratedReady","Promise","resolve","log","timer","setInterval","async","opt","force","root","fileIsReady","clearInterval","then","render","___CSS_LOADER_EXPORT___","push","module","content","__esModule","locals","exports","add"],"sourceRoot":""}