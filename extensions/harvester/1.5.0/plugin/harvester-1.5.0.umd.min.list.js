(("undefined"!==typeof self?self:this)["webpackChunkharvester_1_5_0"]=("undefined"!==typeof self?self:this)["webpackChunkharvester_1_5_0"]||[]).push([[715],{5538:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(9274);const s={class:"state"},o={class:"warning-message"};function n(e,t,r,n,i,l){const c=(0,a.resolveComponent)("ProgressBarMulti"),d=(0,a.resolveComponent)("VolumeState"),u=(0,a.resolveComponent)("v-dropdown"),p=(0,a.resolveDirective)("clean-tooltip");return(0,a.openBlock)(),(0,a.createElementBlock)("span",null,[(0,a.createElementVNode)("div",null,[l.isRebuilding?(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,values:l.percentage,min:0,max:100,class:"mb-10"},null,8,["values"])),[[p,l.rebuildingMessage]]):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",s,[(0,a.createVNode)(d,{row:r.row},null,8,["row"]),l.warningMessage?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,trigger:"hover",offset:"16"},{popper:(0,a.withCtx)((()=>[(0,a.createElementVNode)("p",o,(0,a.toDisplayString)(l.warningMessage),1)])),default:(0,a.withCtx)((()=>[t[0]||(t[0]=(0,a.createElementVNode)("span",{class:"tooltip-target"},[(0,a.createElementVNode)("i",{class:"icon icon-warning icon-lg text-warning"})],-1))])),_:1})):(0,a.createCommentVNode)("",!0)])])}var i=r(15503),l=r(2602),c=r(74562),d={components:{VolumeState:c.A,ProgressBarMulti:i.A},props:{row:{type:Object,required:!0}},computed:{warningMessage(){return this.row.relatedPV?.metadata?.annotations?.[l.r.VOLUME_ERROR]},rebuildStatus(){return this.row.longhornEngine?.status?.rebuildStatus},isRebuilding(){return this.rebuildStatus&&Object.keys(this.rebuildStatus).length>0},percentage(){if(!this.isRebuilding)return;const e=Object.values(this.rebuildStatus)?.[0],t=e?.progress;return[{value:t,color:"bg-warning"}]},rebuildingMessage(){return this.$store.getters["i18n/t"]("harvester.volume.rebuildingMessage",{percentage:this.percentage[0].value})}}},u=(r(77726),r(47433));const p=(0,u.A)(d,[["render",n],["__scopeId","data-v-e0f7fbca"]]);var h=p},11590:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=r(9274);const s={key:1},o={key:3};function n(e,t,r,n,i,l){const c=(0,a.resolveComponent)("Loading"),d=(0,a.resolveComponent)("Banner"),u=(0,a.resolveComponent)("DeviceList"),p=(0,a.resolveComponent)("MessageLink");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0})):e.hasAddonSchema?i.hasSchema&&i.enabledPCI?((0,a.openBlock)(),(0,a.createBlock)(u,{key:2,devices:l.rows,schema:l.schema},null,8,["devices","schema"])):((0,a.openBlock)(),(0,a.createElementBlock)("div",o,[(0,a.createVNode)(d,{color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{to:i.to,"prefix-label":"harvester.pci.goSetting.prefix","middle-label":"harvester.pci.goSetting.middle","suffix-label":"harvester.pci.goSetting.suffix"},null,8,["to"])])),_:1})])):((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createVNode)(d,{color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("harvester.pci.noPCIPermission")),1)])),_:1})]))}var i=r(35664),l=r(88339),c=r(56943),d=r(84409),u=r(96413),p=r(32766),h=r(79428),m=r(66905);const g={id:p.rk.PCI_DEVICE,type:i.yx,attributes:{kind:p.rk.PCI_DEVICE,namespaced:!1},metadata:{name:p.rk.PCI_DEVICE}};var v={name:"ListPciDevicePage",components:{Banner:c.A,DeviceList:h["default"],Loading:d.A,MessageLink:u.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore;if(this.hasSchema=this.$store.getters[`${e}/schemaFor`](p.rk.PCI_DEVICE),this.hasAddonSchema=this.$store.getters[`${e}/schemaFor`](p.rk.ADD_ONS),this.hasSchema)try{const e=this.$store.getters["currentProduct"].inStore,t=await(0,l.kR)({pcidevice:this.$store.dispatch(`${e}/findAll`,{type:p.rk.PCI_DEVICE}),addons:this.$store.dispatch(`${e}/findAll`,{type:p.rk.ADD_ONS})});this.enabledPCI=!0===t.addons.find((e=>e.name===m.Jo.PCI_DEVICE_CONTROLLER))?.spec?.enabled,this.$store.dispatch("type-map/configureType",{match:p.rk.PCI_DEVICE,isCreatable:this.enabledPCI})}catch(t){}},data(){return{enabledPCI:!1,hasSchema:!1,to:`${p.rk.ADD_ONS}/harvester-system/${m.Jo.PCI_DEVICE_CONTROLLER}?mode=edit`}},computed:{schema(){return g},rows(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](p.rk.PCI_DEVICE);return t}},typeDisplay(){return this.$store.getters["type-map/labelFor"](g,99)}},f=r(47433);const k=(0,f.A)(v,[["render",n]]);var y=k},40190:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=r(9274);const s={key:1},o={key:2};function n(e,t,r,n,i,l){const c=(0,a.resolveComponent)("Loading"),d=(0,a.resolveComponent)("Banner"),u=(0,a.resolveComponent)("MessageLink"),p=(0,a.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0})):i.hasAddonSchema?i.hasSriovgpuAddon&&i.hasPCIAddon?l.hasSchema?((0,a.openBlock)(),(0,a.createBlock)(p,(0,a.mergeProps)({key:3},e.$attrs,{groupable:!1,namespaced:!1,headers:l.headers,schema:i.schema,rows:l.rows,"key-field":"_key"}),null,16,["headers","schema","rows"])):(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",o,[i.hasSriovgpuAddon?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{to:i.toVGpuAddon,"prefix-label":"harvester.sriovgpu.goSetting.prefix","middle-label":"harvester.sriovgpu.goSetting.middle","suffix-label":"harvester.sriovgpu.goSetting.suffix"},null,8,["to"])])),_:1})),i.hasPCIAddon?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{to:i.toPciAddon,"prefix-label":"harvester.pci.goSetting.prefix","middle-label":"harvester.pci.goSetting.middle","suffix-label":"harvester.pci.goSetting.suffix"},null,8,["to"])])),_:1}))])):((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createVNode)(d,{color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("harvester.sriovgpu.noPermission")),1)])),_:1})]))}var i=r(35664),l=r(68774),c=r(88339),d=r(56943),u=r(84409),p=r(96413),h=r(31400),m=r(66905),g=r(32766),v={name:"ListSriovGpuDevices",inheritAttrs:!1,components:{Banner:d.A,Loading:u.A,MessageLink:p.A,ResourceTable:h.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore;if(this.schema=this.$store.getters[`${e}/schemaFor`](g.rk.SR_IOVGPU_DEVICE),this.hasAddonSchema=this.$store.getters[`${e}/schemaFor`](g.rk.ADD_ONS),this.hasSchema)try{const t=await(0,c.kR)({sriovgpus:this.$store.dispatch(`${e}/findAll`,{type:g.rk.SR_IOVGPU_DEVICE}),vGpuDevices:this.$store.dispatch(`${e}/findAll`,{type:g.rk.VGPU_DEVICE}),addons:this.$store.dispatch(`${e}/findAll`,{type:g.rk.ADD_ONS})});this.hasPCIAddon=!0===t.addons.find((e=>e.name===m.Jo.PCI_DEVICE_CONTROLLER))?.spec?.enabled,this.hasSriovgpuAddon=!0===t.addons.find((e=>e.name===m.Jo.NVIDIA_DRIVER_TOOLKIT_CONTROLLER))?.spec?.enabled}catch(t){}},data(){const e=this.$store.getters["currentProduct"].inStore;return{hasAddonSchema:!1,hasPCIAddon:!1,hasSriovgpuAddon:!1,schema:null,hasNode:this.$store.getters[`${e}/schemaFor`](i.NW),toVGpuAddon:`${g.rk.ADD_ONS}/harvester-system/${m.Jo.NVIDIA_DRIVER_TOOLKIT_CONTROLLER}?mode=edit`,toPciAddon:`${g.rk.ADD_ONS}/harvester-system/${m.Jo.PCI_DEVICE_CONTROLLER}?mode=edit`}},computed:{hasSchema(){return!!this.schema},rows(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](g.rk.SR_IOVGPU_DEVICE);return t},headers(){const e={name:"node",label:"Node",value:"realNodeName",sort:["realNodeName"],formatter:"CopyToClipboard",labelKey:"tableHeaders.node"},t=[l.c4,l.X0,{name:"address",label:"Address",value:"spec.address",sort:["spec.address"]},{name:"vfAddresses",label:"VF Addresses",labelKey:"harvester.sriovgpu.vfAddresses",sort:["status.vfAddresses"],value:"status.vfAddresses",formatter:"HarvesterVFAddress",align:"center",dashIfEmpty:!0},{name:"vGpuDevices",label:"vGPU Devices",labelKey:"harvester.sriovgpu.vGpuDevices",sort:["status.vGPUDevices"],value:"status.vGPUDevices",formatter:"HarvesterVGpuDevices",align:"center",dashIfEmpty:!0},{...l.K,sort:"metadata.creationTimestamp:desc"}];return this.hasNode&&t.splice(-1,0,e),t}}},f=r(47433);const k=(0,f.A)(v,[["render",n]]);var y=k},88426:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(9274);function s(e,t,r,s,o,n){const i=(0,a.resolveComponent)("ResourceTable");return(0,a.openBlock)(),(0,a.createBlock)(i,(0,a.mergeProps)(e.$attrs,{groupable:!1,namespaced:!1,headers:n.headers,schema:r.schema,rows:r.rows,"key-field":"_key"}),null,16,["headers","schema","rows"])}var o=r(68774),n=r(35664),i=r(31400),l={name:"ListHarvesterSRIOV",components:{ResourceTable:i.A},props:{schema:{type:Object,required:!0},rows:{type:Array,required:!0}},data(){const e=this.$store.getters["currentProduct"].inStore;return{hasNode:this.$store.getters[`${e}/schemaFor`](n.NW)}},computed:{headers(){const e={name:"node",label:"Node",value:"realNodeName",sort:["realNodeName"],formatter:"CopyToClipboard",labelKey:"tableHeaders.node"},t=[o.c4,o.X0,{name:"numVFs",label:"Num VFs",sort:["numVFs"],value:"numVFs",formatter:"HarvesterVFsNum",align:"center",labelKey:"harvester.sriov.numVFs",dashIfEmpty:!0},{name:"vfAddresses",label:"VF Addresses",labelKey:"harvester.sriov.vfAddresses",sort:["status.vfAddresses"],value:"status.vfAddresses",formatter:"HarvesterVFAddress",align:"center",dashIfEmpty:!0},{...o.K,sort:"metadata.creationTimestamp:desc"}];return this.hasNode&&t.splice(-1,0,e),t}}},c=r(47433);const d=(0,c.A)(l,[["render",s]]);var u=d},92217:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(9274);const s={key:1},o={key:2};function n(e,t,r,n,i,l){const c=(0,a.resolveComponent)("Loading"),d=(0,a.resolveComponent)("Banner"),u=(0,a.resolveComponent)("MessageLink"),p=(0,a.resolveComponent)("DeviceList");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0})):i.hasAddonSchema?i.hasPCIAddon?l.hasSchema?((0,a.openBlock)(),(0,a.createBlock)(p,{key:3,devices:l.devices,schema:i.schema},null,8,["devices","schema"])):(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",o,[(0,a.createVNode)(d,{color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{to:i.toPciAddon,"prefix-label":"harvester.usb.goSetting.prefix","middle-label":"harvester.usb.goSetting.middle","suffix-label":"harvester.usb.goSetting.suffix"},null,8,["to"])])),_:1})])):((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createVNode)(d,{color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("harvester.usb.noPermission")),1)])),_:1})]))}var i=r(32766),l=r(88339),c=r(56943),d=r(84409),u=r(96413),p=r(66905),h=r(34529),m={name:"ListUsbDevicePage",inheritAttrs:!1,components:{Banner:c.A,DeviceList:h["default"],Loading:d.A,MessageLink:u.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore;if(this.schema=this.$store.getters[`${e}/schemaFor`](i.rk.USB_DEVICE),this.hasAddonSchema=this.$store.getters[`${e}/schemaFor`](i.rk.ADD_ONS),this.hasSchema)try{const t=await(0,l.kR)({usbDevices:this.$store.dispatch(`${e}/findAll`,{type:i.rk.USB_DEVICE}),addons:this.$store.dispatch(`${e}/findAll`,{type:i.rk.ADD_ONS})});this.hasPCIAddon=!0===t.addons.find((e=>e.name===p.Jo.PCI_DEVICE_CONTROLLER))?.spec?.enabled}catch(t){}},data(){return{hasAddonSchema:!1,hasPCIAddon:!1,schema:null,toPciAddon:`${i.rk.ADD_ONS}/harvester-system/${p.Jo.PCI_DEVICE_CONTROLLER}?mode=edit`}},computed:{hasSchema(){return!!this.schema},devices(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[`${e}/all`](i.rk.USB_DEVICE)||[]}},typeDisplay(){return this.t("harvester.usb.label")}},g=r(47433);const v=(0,g.A)(m,[["render",n]]);var f=v},53774:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(9274);const s={key:1},o={key:2};function n(e,t,r,n,i,l){const c=(0,a.resolveComponent)("Loading"),d=(0,a.resolveComponent)("Banner"),u=(0,a.resolveComponent)("MessageLink"),p=(0,a.resolveComponent)("VGpuDeviceList");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0})):i.hasAddonSchema?i.hasSriovgpuAddon&&i.hasPCIAddon?l.hasSchema?((0,a.openBlock)(),(0,a.createBlock)(p,{key:3,devices:l.rows,schema:i.schema},null,8,["devices","schema"])):(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",o,[i.hasSriovgpuAddon?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{to:i.toVGpuAddon,"prefix-label":"harvester.vgpu.goSetting.prefix","middle-label":"harvester.vgpu.goSetting.middle","suffix-label":"harvester.vgpu.goSetting.suffix"},null,8,["to"])])),_:1})),i.hasPCIAddon?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{to:i.toPciAddon,"prefix-label":"harvester.pci.goSetting.prefix","middle-label":"harvester.pci.goSetting.middle","suffix-label":"harvester.pci.goSetting.suffix"},null,8,["to"])])),_:1}))])):((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createVNode)(d,{color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("harvester.vgpu.noPermission")),1)])),_:1})]))}var i=r(88339),l=r(56943),c=r(84409),d=r(96413),u=r(32766),p=r(33212),h=r(66905),m={name:"ListVGpuDevices",inheritAttrs:!1,components:{Banner:l.A,Loading:c.A,MessageLink:d.A,VGpuDeviceList:p["default"]},async fetch(){const e=this.$store.getters["currentProduct"].inStore;if(this.schema=this.$store.getters[`${e}/schemaFor`](u.rk.VGPU_DEVICE),this.hasAddonSchema=this.$store.getters[`${e}/schemaFor`](u.rk.ADD_ONS),this.hasSchema)try{const t=await(0,i.kR)({vGpuDevices:this.$store.dispatch(`${e}/findAll`,{type:u.rk.VGPU_DEVICE}),addons:this.$store.dispatch(`${e}/findAll`,{type:u.rk.ADD_ONS})});this.hasPCIAddon=!0===t.addons.find((e=>e.name===h.Jo.PCI_DEVICE_CONTROLLER))?.spec?.enabled,this.hasSriovgpuAddon=!0===t.addons.find((e=>e.name===h.Jo.NVIDIA_DRIVER_TOOLKIT_CONTROLLER))?.spec?.enabled,this.hasSRIOVGPUSchema=!!this.$store.getters[`${e}/schemaFor`](u.rk.SR_IOVGPU_DEVICE),this.hasSRIOVGPUSchema&&await this.$store.dispatch(`${e}/findAll`,{type:u.rk.SR_IOVGPU_DEVICE})}catch(t){}},data(){return{hasAddonSchema:!1,hasPCIAddon:!1,hasSriovgpuAddon:!1,hasSRIOVGPUSchema:!1,schema:null,toVGpuAddon:`${u.rk.ADD_ONS}/harvester-system/${h.Jo.NVIDIA_DRIVER_TOOLKIT_CONTROLLER}?mode=edit`,toPciAddon:`${u.rk.ADD_ONS}/harvester-system/${h.Jo.PCI_DEVICE_CONTROLLER}?mode=edit`}},computed:{hasSchema(){return!!this.schema},rows(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](u.rk.VGPU_DEVICE)||[],r=this.$store.getters[`${e}/all`](u.rk.SR_IOVGPU_DEVICE)||[];return this.hasSRIOVGPUSchema?t.filter((e=>!!r.find((t=>t.isEnabled&&t.spec?.nodeName===e.spec?.nodeName)))):t}},typeDisplay(){return this.t("harvester.vgpu.label")}},g=r(47433);const v=(0,g.A)(m,[["render",n]]);var f=v},33699:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(9274);const s={class:"cell-name"},o=["href"];function n(e,t,r,n,i,l){const c=(0,a.resolveComponent)("Loading"),d=(0,a.resolveComponent)("LinkDetail"),u=(0,a.resolveComponent)("ResourceTable"),p=(0,a.resolveDirective)("tooltip");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(u,{rows:l.rows,groupable:!1,namespaced:!1,schema:l.schema,headers:l.headers},{"cell:name":(0,a.withCtx)((r=>[(0,a.createElementVNode)("div",s,[(0,a.createVNode)(d,{value:r.row.displayName,"onUpdate:value":e=>r.row.displayName=e,row:r.row},null,8,["value","onUpdate:value","row"]),"rancher-vcluster"===r.row.metadata.name&&r.row.spec.enabled?(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("a",{key:0,class:"ml-5",rel:"nofollow noopener noreferrer",target:"_blank",href:r.row.rancherHostname},t[0]||(t[0]=[(0,a.createElementVNode)("i",{class:"icon icon-external-link"},null,-1)]),8,o)),[[p,e.t("harvester.addons.rancherVcluster.accessRancher")]]):(0,a.createCommentVNode)("",!0)])])),_:1},8,["rows","schema","headers"])])}var i=r(84409),l=r(31400),c=r(88339),d=r(68774),u=r(32766),p={name:"ListHarvesterAddons",components:{ResourceTable:l.A,Loading:i.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore;await(0,c.kR)({addons:this.$store.dispatch(`${e}/findAll`,{type:u.rk.ADD_ONS})})},computed:{rows(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](u.rk.ADD_ONS);return t},headers(){return[d.c4,d.o_,{name:"description",labelKey:"tableHeaders.description",value:"metadata.name",align:"left",sort:["status.description"],formatter:"Translate",formatterOpts:{prefix:"harvester.addons.descriptions"}}]},schema(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[`${e}/schemaFor`](u.rk.ADD_ONS)}}},h=(r(12122),r(47433));const m=(0,h.A)(p,[["render",n],["__scopeId","data-v-32e4b7cb"]]);var g=m},34317:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(9274);function s(e,t,r,s,o,n){const i=(0,a.resolveComponent)("Loading"),l=(0,a.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(i,{key:0})):((0,a.openBlock)(),(0,a.createBlock)(l,(0,a.mergeProps)({key:1},e.$attrs,{headers:n.headers,groupable:!0,schema:n.schema,rows:n.filteredRows,"key-field":"_key"}),null,16,["headers","schema","rows"]))}var o=r(31400),n=r(84409),i=r(35664),l=r(68774),c=r(2602),d=r(32766);const u={id:d.rk.CLOUD_TEMPLATE,type:i.yx,attributes:{kind:d.rk.CLOUD_TEMPLATE,namespaced:!0},metadata:{name:d.rk.CLOUD_TEMPLATE}};var p={name:"HarvesterListCloudTemplate",components:{ResourceTable:o.A,Loading:n.A},inheritAttrs:!1,async fetch(){const e=this.$store.getters["currentProduct"].inStore;this.rows=await this.$store.dispatch(`${e}/findAll`,{type:i.K5});const t=this.$store.getters[`${e}/schemaFor`](i.K5);t?.collectionMethods.find((e=>"post"===e.toLowerCase()))||this.$store.dispatch("type-map/configureType",{match:d.rk.CLOUD_TEMPLATE,isCreatable:!1})},data(){return{rows:[]}},computed:{headers(){return[l.o_,l.CU,{name:"type",labelKey:"tableHeaders.type",value:"metadata.labels",formatter:"CloudInitType"},l.K]},filteredRows(){return this.rows.filter((e=>!!e.metadata?.labels?.[c.r.CLOUD_INIT]))},schema(){return u}},typeDisplay(){return this.$store.getters["type-map/labelFor"](u,99)}},h=r(47433);const m=(0,h.A)(p,[["render",s]]);var g=m},32727:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Se}});var a=r(9274);const s={key:1},o={class:"cluster-dashboard-glance"},n={key:0},i={class:"resource-gauges"},l={class:"mt-40"},c={class:"mb-40 mt-40"},d={class:"text-info"},u={key:0},p={class:"text-info"},h={key:0},m={class:"text-info"},g={key:0},v={class:"text-info"},f={key:0};function k(e,t,r,k,y,b){const C=(0,a.resolveComponent)("Loading"),w=(0,a.resolveComponent)("HarvesterUpgrade"),S=(0,a.resolveComponent)("LiveDate"),N=(0,a.resolveComponent)("MessageLink"),E=(0,a.resolveComponent)("Banner"),V=(0,a.resolveComponent)("ResourceSummary"),A=(0,a.resolveComponent)("HardwareResourceGauge"),$=(0,a.resolveComponent)("DashboardMetrics"),B=(0,a.resolveComponent)("Tab"),x=(0,a.resolveComponent)("Tabbed"),T=(0,a.resolveComponent)("SortableTable"),_=(0,a.resolveDirective)("clean-tooltip");return e.$fetchState.pending||!e.currentCluster?((0,a.openBlock)(),(0,a.createBlock)(C,{key:0})):((0,a.openBlock)(),(0,a.createElementBlock)("section",s,[(0,a.createVNode)(w),(0,a.createElementVNode)("div",o,[(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("label",null,(0,a.toDisplayString)(e.t("harvester.dashboard.version"))+": ",1),(0,a.createElementVNode)("span",null,[(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("span",null,[(0,a.createTextVNode)((0,a.toDisplayString)(b.currentVersion),1)])),[[_,{content:b.currentVersion}]])])]),(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("label",null,(0,a.toDisplayString)(e.t("glance.created"))+": ",1),(0,a.createElementVNode)("span",null,[(0,a.createVNode)(S,{value:b.firstNodeCreationTimestamp,"add-suffix":!0,"show-tooltip":!0},null,8,["value"])])])]),!y.enabledMonitoringAddon&&b.canEnableMonitoringAddon?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createVNode)(E,{color:"info"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,{to:b.toEnableMonitoringAddon,"prefix-label":"harvester.monitoring.alertmanagerConfig.disabledAddon.prefix","middle-label":"harvester.monitoring.alertmanagerConfig.disabledAddon.middle","suffix-label":"harvester.monitoring.alertmanagerConfig.disabledAddon.suffix"},null,8,["to"])])),_:1})])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",i,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(b.totalCountGaugeInput,((e,t)=>((0,a.openBlock)(),(0,a.createBlock)(V,{key:t,"spoofed-counts":e.isSpoofed?e:null,resource:e.resource},null,8,["spoofed-counts","resource"])))),128))]),y.nodes.length&&b.hasMetricNodeSchema?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createElementVNode)("h3",l,(0,a.toDisplayString)(e.t("clusterIndexPage.sections.capacity.label")),1),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["hardware-resource-gauges",{live:!y.hasLonghornSchema}])},[(0,a.createVNode)(A,{name:e.t("harvester.dashboard.hardwareResourceGauge.cpu"),reserved:b.cpuReserved,used:b.cpuUsed},null,8,["name","reserved","used"]),(0,a.createVNode)(A,{name:e.t("harvester.dashboard.hardwareResourceGauge.memory"),reserved:b.ramReserved,used:b.ramUsed},null,8,["name","reserved","used"]),y.hasLonghornSchema?((0,a.openBlock)(),(0,a.createBlock)(A,{key:0,name:e.t("harvester.dashboard.hardwareResourceGauge.storage"),used:b.storageUsed,reserved:b.storageAllocated,"reserved-title":e.t("harvester.dashboard.hardwareResourceGauge.allocated")},null,8,["name","used","reserved","reserved-title"])):(0,a.createCommentVNode)("",!0)],2)],64)):(0,a.createCommentVNode)("",!0),b.hasMetricsTabs&&y.enabledMonitoringAddon?((0,a.openBlock)(),(0,a.createBlock)(x,{key:2,class:"mt-30"},{default:(0,a.withCtx)((()=>[y.showClusterMetrics?((0,a.openBlock)(),(0,a.createBlock)(B,{key:0,name:"cluster-metrics",label:e.t("clusterIndexPage.sections.clusterMetrics.label"),weight:99},{default:(0,a.withCtx)((e=>[e.active?((0,a.openBlock)(),(0,a.createBlock)($,{key:0,"detail-url":y.CLUSTER_METRICS_DETAIL_URL,"summary-url":y.CLUSTER_METRICS_SUMMARY_URL,"graph-height":"825px"},null,8,["detail-url","summary-url"])):(0,a.createCommentVNode)("",!0)])),_:1},8,["label"])):(0,a.createCommentVNode)("",!0),y.showVmMetrics?((0,a.openBlock)(),(0,a.createBlock)(B,{key:1,name:"vm-metric",label:e.t("harvester.dashboard.sections.vmMetrics.label"),weight:98},{default:(0,a.withCtx)((e=>[e.active?((0,a.openBlock)(),(0,a.createBlock)($,{key:0,"detail-url":y.VM_DASHBOARD_METRICS_URL,"graph-height":"825px","has-summary-and-detail":!1},null,8,["detail-url"])):(0,a.createCommentVNode)("",!0)])),_:1},8,["label"])):(0,a.createCommentVNode)("",!0)])),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("h3",null,(0,a.toDisplayString)(e.t("clusterIndexPage.sections.events.label")),1),(0,a.createVNode)(x,{class:"mt-20"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(B,{name:"host",label:"Hosts",weight:98},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{rows:b.hostEvents,headers:y.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"},{"cell:resource":(0,a.withCtx)((({row:e,value:t})=>[(0,a.createElementVNode)("div",d,(0,a.toDisplayString)(t),1),e.message?((0,a.openBlock)(),(0,a.createElementBlock)("div",u,(0,a.toDisplayString)(e.displayMessage),1)):(0,a.createCommentVNode)("",!0)])),_:1},8,["rows","headers"])])),_:1}),(0,a.createVNode)(B,{name:"vm",label:"VMs",weight:99},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{rows:b.vmEvents,headers:y.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"},{"cell:resource":(0,a.withCtx)((({row:e,value:t})=>[(0,a.createElementVNode)("div",p,(0,a.toDisplayString)(t),1),e.message?((0,a.openBlock)(),(0,a.createElementBlock)("div",h,(0,a.toDisplayString)(e.displayMessage),1)):(0,a.createCommentVNode)("",!0)])),_:1},8,["rows","headers"])])),_:1}),(0,a.createVNode)(B,{name:"volume",label:"Volumes",weight:97},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{rows:b.volumeEvents,headers:y.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"},{"cell:resource":(0,a.withCtx)((({row:e,value:t})=>[(0,a.createElementVNode)("div",m,(0,a.toDisplayString)(t),1),e.message?((0,a.openBlock)(),(0,a.createElementBlock)("div",g,(0,a.toDisplayString)(e.displayMessage),1)):(0,a.createCommentVNode)("",!0)])),_:1},8,["rows","headers"])])),_:1}),(0,a.createVNode)(B,{name:"image",label:"Images",weight:96},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{rows:b.imageEvents,headers:y.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"},{"cell:resource":(0,a.withCtx)((({row:e,value:t})=>[(0,a.createElementVNode)("div",v,(0,a.toDisplayString)(t),1),e.message?((0,a.openBlock)(),(0,a.createElementBlock)("div",f,(0,a.toDisplayString)(e.displayMessage),1)):(0,a.createCommentVNode)("",!0)])),_:1},8,["rows","headers"])])),_:1})])),_:1})])]))}var y=r(23464),b=r.n(y),C=r(3221),w=r.n(C),S=r(57657),N=r.n(S),E=r(65359),V=r(84409),A=r(56943),$=r(96413),B=r(61747),x=r(88339),T=r(95799),_=r(68774),D=r(35664),L=r(31855),R=r(73883),O=r(13539),M=r(10006),I=r(49584),P=r(83030),U=r(52799),F=r(97348),H=r(76978),G=r(32766);const K={key:0},j={class:"header-layout header mb-0"},W={class:"currentVersion mb-15"},q={class:"version"},J={key:0,class:"mb-5"},z={key:1,class:"mb-5"},Y={key:2,class:"divider"},X={key:3},Q={class:"mb-10"},Z={class:"footer"},ee=["disabled"];function te(e,t,r,s,o,n){const i=(0,a.resolveComponent)("t"),l=(0,a.resolveComponent)("UpgradeInfo"),c=(0,a.resolveComponent)("LabeledSelect"),d=(0,a.resolveComponent)("Checkbox"),u=(0,a.resolveComponent)("Banner"),p=(0,a.resolveComponent)("ModalWithCard"),h=(0,a.resolveDirective)("clean-html");return e.currentCluster?((0,a.openBlock)(),(0,a.createElementBlock)("div",K,[(0,a.createElementVNode)("header",j,[(0,a.createElementVNode)("h1",null,[(0,a.createVNode)(i,{k:"harvester.dashboard.header",cluster:e.currentCluster.nameDisplay},null,8,["cluster"])]),n.versionOptions.length&&!n.isUpgradeInProgress?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:0,type:"button",class:"btn bg-warning btn-sm",onClick:t[0]||(t[0]=(...e)=>n.open&&n.open(...e))},[(0,a.createVNode)(i,{k:"harvester.upgradePage.upgrade"})])):(0,a.createCommentVNode)("",!0)]),o.isOpen?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,name:"deleteTip",width:850},{title:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{k:"harvester.upgradePage.upgradeApp"})])),content:(0,a.withCtx)((()=>[(0,a.createVNode)(l,{version:o.version},null,8,["version"]),(0,a.createElementVNode)("div",W,[(0,a.createElementVNode)("span",null,[(0,a.createVNode)(i,{k:"harvester.upgradePage.currentVersion"})]),(0,a.createElementVNode)("span",q,(0,a.toDisplayString)(n.currentVersion),1)]),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(c,{value:o.version,"onUpdate:value":t[1]||(t[1]=e=>o.version=e),class:"mb-10",label:e.t("harvester.upgradePage.versionLabel"),options:n.versionOptions,clearable:!0},null,8,["value","label","options"]),n.canEnableLogging?((0,a.openBlock)(),(0,a.createElementBlock)("div",J,[(0,a.createVNode)(d,{value:o.enableLogging,"onUpdate:value":t[2]||(t[2]=e=>o.enableLogging=e),class:"check",type:"checkbox",label:e.t("harvester.upgradePage.enableLogging")},null,8,["value","label"])])):(0,a.createCommentVNode)("",!0),n.skipSingleReplicaDetachedVolFeatureEnabled?((0,a.openBlock)(),(0,a.createElementBlock)("div",z,[(0,a.createVNode)(d,{value:o.skipSingleReplicaDetachedVol,"onUpdate:value":t[3]||(t[3]=e=>o.skipSingleReplicaDetachedVol=e),class:"check",type:"checkbox",label:e.t("harvester.upgradePage.skipSingleReplicaDetachedVol")},null,8,["value","label"])])):(0,a.createCommentVNode)("",!0),o.version?((0,a.openBlock)(),(0,a.createElementBlock)("hr",Y)):(0,a.createCommentVNode)("",!0),o.version?((0,a.openBlock)(),(0,a.createElementBlock)("div",X,[(0,a.withDirectives)((0,a.createElementVNode)("p",Q,null,512),[[h,e.t("harvester.upgradePage.releaseTip",{url:n.releaseLink},!0)]]),(0,a.createVNode)(d,{value:o.readyReleaseNote,"onUpdate:value":t[4]||(t[4]=e=>o.readyReleaseNote=e),class:"check",type:"checkbox","label-key":"harvester.upgradePage.checkReady"},null,8,["value"])])):(0,a.createCommentVNode)("",!0),o.errors.length?((0,a.openBlock)(),(0,a.createBlock)(u,{key:4,color:"error"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.errors),1)])),_:1})):(0,a.createCommentVNode)("",!0)])])),footer:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",Z,[(0,a.createElementVNode)("button",{class:"btn role-secondary mr-20",onClick:t[5]||(t[5]=(0,a.withModifiers)(((...e)=>n.cancel&&n.cancel(...e)),["prevent"]))},[(0,a.createVNode)(i,{k:"generic.close"})]),(0,a.createElementVNode)("button",{disabled:!o.readyReleaseNote,class:"btn role-tertiary bg-primary",onClick:t[6]||(t[6]=(0,a.withModifiers)(((...e)=>n.handleUpgrade&&n.handleUpgrade(...e)),["prevent"]))},[(0,a.createVNode)(i,{k:"harvester.upgradePage.upgrade"})],8,ee)])])),_:1})):(0,a.createCommentVNode)("",!0)])):(0,a.createCommentVNode)("",!0)}var re=r(42200),ae=r(40973),se=r(8077),oe=r(9980),ne=r(2602),ie=r(91806),le={name:"HarvesterUpgrade",components:{Checkbox:re.S,ModalWithCard:ae.A,LabeledSelect:se.A,Banner:oe.l,UpgradeInfo:ie.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await(0,x.kR)({upgradeVersion:this.$store.dispatch(`${e}/findAll`,{type:G.rk.SETTING}),versions:this.$store.dispatch(`${e}/findAll`,{type:G.rk.VERSION}),upgrade:this.$store.dispatch(`${e}/findAll`,{type:G.rk.UPGRADE})});this.upgrade=t.upgrade},data(){return{upgrade:[],upgradeMessage:[],errors:"",selectMode:!0,version:"",enableLogging:!0,skipSingleReplicaDetachedVol:!1,readyReleaseNote:!1,isOpen:!1}},computed:{...(0,E.L8)(["currentCluster"]),latestUpgrade(){return this.upgrade?.find((e=>e.isLatestUpgrade))},isUpgradeInProgress(){return this.latestUpgrade&&!this.latestUpgrade.isUpgradeSucceeded&&!this.latestUpgrade.isUpgradeFailed},versionOptions(){const e=this.$store.getters["harvester/all"](G.rk.VERSION);return e.map((e=>e.metadata.name))},currentVersion(){const e=this.$store.getters["harvester/byId"](G.rk.SETTING,"server-version");return e.currentVersion||""},canEnableLogging(){return this.$store.getters["harvester/schemaFor"](G.rk.UPGRADE_LOG)},skipSingleReplicaDetachedVolFeatureEnabled(){return this.$store.getters["harvester-common/getFeatureEnabled"]("skipSingleReplicaDetachedVol")},releaseLink(){return`https://github.com/harvester/harvester/releases/tag/${this.version}`}},watch:{upgrade:{handler(e){let t=[];const r=e||[],a=r.find((e=>!!e.isLatestUpgrade));t=a?a.upgradeMessage:[],this["upgradeMessage"]=t},deep:!0},version(){this.readyReleaseNote=!1}},methods:{async handleUpgrade(){const e={type:G.rk.UPGRADE,metadata:{generateName:"hvst-upgrade-",namespace:"harvester-system"},spec:{version:this.version}};this.skipSingleReplicaDetachedVolFeatureEnabled&&this.skipSingleReplicaDetachedVol&&(e.metadata.annotations={[ne.r.SKIP_SINGLE_REPLICA_DETACHED_VOL]:JSON.stringify(this.skipSingleReplicaDetachedVol)}),this.canEnableLogging&&(e.spec.logEnabled=this.enableLogging);const t=await this.$store.dispatch("harvester/create",e);try{await t.save(),this.cancel()}catch(r){""!==r?.message&&(this.errors=r.message)}},cancel(){this.isOpen=!1,this.errors=""},open(){this.isOpen=!0}}},ce=(r(54434),r(47433));const de=(0,ce.A)(le,[["render",te],["__scopeId","data-v-0254dd74"]]);var ue=de,pe=r(20652),he=r(84757),me=r(4364);b().extend(N()),b().extend(w());const ge={format:{addSuffix:!0,firstSuffix:he.jx,increment:1024,maxExponent:99,maxPrecision:2,minExponent:0,startingExponent:0,suffix:he.jx}},ve=[{type:D.NW,spoofed:{location:{name:`${pe.KR}-c-cluster-resource`,params:{resource:G.rk.HOST}},name:G.rk.HOST}},{type:G.rk.VM,spoofed:{location:{name:`${pe.KR}-c-cluster-resource`,params:{resource:G.rk.VM}},name:G.rk.VM}},{type:D.XG,spoofed:{location:{name:`${pe.KR}-c-cluster-resource`,params:{resource:G.rk.NETWORK_ATTACHMENT}},name:G.rk.NETWORK_ATTACHMENT,filterNamespace:["harvester-system"]}},{type:G.rk.IMAGE,spoofed:{location:{name:`${pe.KR}-c-cluster-resource`,params:{resource:G.rk.IMAGE}},name:G.rk.IMAGE}},{type:D.YH,spoofed:{location:{name:`${pe.KR}-c-cluster-resource`,params:{resource:G.rk.VOLUME}},name:G.rk.VOLUME,filterNamespace:["cattle-monitoring-system"]}},{type:G.rk.BLOCK_DEVICE,spoofed:{location:{name:`${pe.KR}-c-cluster-resource`,params:{resource:G.rk.HOST}},name:G.rk.BLOCK_DEVICE}}],fe="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-cluster-nodes-1/rancher-cluster-nodes?orgId=1",ke="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-cluster-1/rancher-cluster?orgId=1",ye="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/harvester-vm-dashboard-1/vm-dashboard?orgId=1",be="cattle-monitoring-system/rancher-monitoring";var Ce={mixins:[U.A],components:{Loading:V.A,HardwareResourceGauge:O.A,SortableTable:B.A,HarvesterUpgrade:ue,ResourceSummary:L.Ay,Tabbed:M.A,Tab:I.A,DashboardMetrics:P.A,Banner:A.A,MessageLink:$.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={vms:this.fetchClusterResources(G.rk.VM),nodes:this.fetchClusterResources(D.NW),events:this.fetchClusterResources(D.ll),metricNodes:this.fetchClusterResources(D.$v.NODE),settings:this.fetchClusterResources(G.rk.SETTING),services:this.fetchClusterResources(D.YV),metric:this.fetchClusterResources(D.$v.NODE),longhornNodes:this.fetchClusterResources(D.oe.NODES),longhornSettings:this.fetchClusterResources(D.oe.SETTINGS),_pods:this.$store.dispatch("harvester/findAll",{type:D.Sm})};(this.accessibleResources||[]).map((r=>(t[r.type]=this.$store.dispatch(`${e}/findAll`,{type:r.type}),null))),this.$store.getters[`${e}/schemaFor`](G.rk.ADD_ONS)&&(t.addons=this.$store.dispatch(`${e}/findAll`,{type:G.rk.ADD_ONS})),this.$store.getters[`${e}/schemaFor`](D.oe.NODES)&&(this.hasLonghornSchema=!0);const r=await(0,x.kR)(t);for(const s in r)this[s]=r[s];(0,x.DD)((0,F.Qr)(this.$store,this.currentCluster.id,[fe,ke],"harvester"),this,"showClusterMetrics","Determine cluster metrics"),(0,x.DD)((0,F.Qr)(this.$store,this.currentCluster.id,[ye],"harvester"),this,"showVmMetrics","Determine vm metrics");const a=this.$store.getters[`${e}/all`](G.rk.ADD_ONS);this.monitoring=a.find((e=>e.id===be)),this.enabledMonitoringAddon=this.monitoring?.spec?.enabled},data(){const e={..._.rh,canBeVariable:!0,width:130},t=[e,{name:"resource",label:"Resource",labelKey:"clusterIndexPage.sections.events.resource.label",value:"displayInvolvedObject",sort:["involvedObject.kind","involvedObject.name"],canBeVariable:!0},{align:"right",name:"date",label:"Date",labelKey:"clusterIndexPage.sections.events.date.label",value:"lastTimestamp",sort:"lastTimestamp:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125,defaultSort:!0}];return{eventHeaders:t,constraints:[],events:[],nodeMetrics:[],nodes:[],metricNodes:[],vms:[],monitoring:{},VM_DASHBOARD_METRICS_URL:ye,CLUSTER_METRICS_SUMMARY_URL:ke,CLUSTER_METRICS_DETAIL_URL:fe,showClusterMetrics:!1,showVmMetrics:!1,enabledMonitoringAddon:!1,hasLonghornSchema:!1}},computed:{...(0,E.L8)(["currentCluster"]),accessibleResources(){const e=this.$store.getters["currentProduct"].inStore;return ve.filter((t=>this.$store.getters[`${e}/schemaFor`](t.type)))},totalCountGaugeInput(){const e={};return this.accessibleResources.forEach((t=>{const r=(0,L.xS)(this.$store,t.type);if(e[t.type]={resource:t.type},Object.entries(r).forEach((r=>{e[t.type][r[0]]=r[1]})),t.spoofed){if(t.spoofed?.filterNamespace&&Array.isArray(t.spoofed.filterNamespace)){const r=this.$store.getters["harvester/all"](D.i2)[0].counts,a=r[t.type]||{};for(let s=0;s<t.spoofed.filterNamespace.length;s++){const r=a?.namespaces?.[t.spoofed.filterNamespace[s]]||{};r.count&&(e[t.type]["useful"]-=r.count,e[t.type]["total"]-=r.count),Object.entries(r?.states||{}).forEach((r=>{const a=(0,R.uU)(r[0]),s=r[1],o=(0,L.dD)(a);e[t.type]["useful"]-=s,e[t.type][o]+=s}))}}e[t.type]={...e[t.type],...t.spoofed,isSpoofed:!0},e[t.type].name=this.t(`typeLabel."${t.spoofed.name}"`,{count:e[t.type].total})}if(t.type===G.rk.BLOCK_DEVICE){let r=0,a=0;(this.nodes||[]).map((e=>{r+=e.diskStatusCount.total,a+=e.diskStatusCount.errorCount})),e[t.type]={...e[t.type],total:r,errorCount:a,useful:r-a}}})),e},currentVersion(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/byId`](G.rk.SETTING,"server-version");return t?.value||t?.default},firstNodeCreationTimestamp(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](D.NW).map((e=>b()(e.metadata.creationTimestamp)));return t.length?b().min(t).utc().format():b()().utc().format()},cpusTotal(){let e=0;return this.metricNodes.forEach((t=>{e+=t.cpuCapacity})),e},cpusUsageTotal(){let e=0;return this.metricNodes.forEach((t=>{e+=t.cpuUsage})),e},memoryTotal(){let e=0;return this.metricNodes.forEach((t=>{e+=t.memoryCapacity})),e},memoryUsageTotal(){let e=0;return this.metricNodes.forEach((t=>{e+=t.memoryUsage})),e},storageStats(){const e=this.longhornSettings.find((e=>"longhorn-system/storage-over-provisioning-percentage"===e.id)),t=this.longhornNodes.reduce(((e,t)=>{const r=t?.spec?.disks||{},a=t?.status?.diskStatus||{};return e.used+=t?.spec?.allowScheduling?t.used:0,Object.keys(r).map((s=>{e.scheduled+=t?.spec?.allowScheduling&&a[s]?.storageScheduled||0,e.reserved+=r[s]?.storageReserved||0})),Object.values(a).map((t=>{e.maximum+=t?.storageMaximum||0})),e}),{used:0,scheduled:0,maximum:0,reserved:0,total:0});return t.total=(t.maximum-t.reserved)*Number(e?.value??0)/100,t},storageUsed(){const e=this.storageStats;return this.createDisplayValues(e.maximum,e.used)},storageAllocated(){const e=this.storageStats;return this.createDisplayValues(e.total,e.scheduled)},vmEvents(){return this.events.filter((e=>["VirtualMachineInstance","VirtualMachine"].includes(e.involvedObject.kind)))},volumeEvents(){return this.events.filter((e=>["PersistentVolumeClaim"].includes(e.involvedObject.kind)))},hostEvents(){return this.events.filter((e=>["Node"].includes(e.involvedObject.kind)))},imageEvents(){return this.events.filter((e=>["VirtualMachineImage"].includes(e.involvedObject.kind)))},hasMetricsTabs(){return this.showClusterMetrics||this.showVmMetrics},pods(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](D.Sm)||[];return t.filter((e=>"removing"!==e?.metadata?.name))},cpuReserved(){const e=this.nodes.reduce(((e,t)=>e+t.cpuReserved),0);return{total:this.cpusTotal,useful:e}},ramReserved(){const e=this.nodes.reduce(((e,t)=>e+t.memoryReserved),0);return this.createDisplayValues(this.memoryTotal,e)},availableNodes(){return(this.metricNodes||[]).map((e=>e.id))},metricAggregations(){const e=this.nodes,t=this.nodes.some((e=>e.hasARole&&!e.isWorker)),r=this.nodeMetrics.filter((r=>{const a=e.find((e=>e.id===r.id));return a&&(!t||a.isWorker)})),a={cpu:0,memory:0};return(0,H.Im)(r)?null:r.reduce(((e,t)=>(e.cpu+=(0,T.ao)(t.usage.cpu),e.memory+=(0,T.ao)(t.usage.memory),e)),a)},cpuUsed(){return{total:this.cpusTotal,useful:this.metricAggregations?.cpu}},ramUsed(){return this.createDisplayValues(this.memoryTotal,this.metricAggregations?.memory)},hasMetricNodeSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[`${e}/schemaFor`](D.$v.NODE)},toEnableMonitoringAddon(){return`${G.rk.ADD_ONS}/cattle-monitoring-system/rancher-monitoring?mode=edit#alertmanager`},canEnableMonitoringAddon(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/schemaFor`](G.rk.ADD_ONS);return t&&this.monitoring}},methods:{createDisplayValues(e,t){const r=(0,T.ao)((e||"0").toString()),a=(0,T.ao)((t||"0").toString()),s=this.createFormat(r),o=(0,T.Mo)(r,s);let n=(0,T.Mo)(a,{...s,addSuffix:!1});return!Number.parseFloat(n)>0&&(n=(0,T.Mo)(a,{...s,canRoundToZero:!1})),{total:Number(r),useful:Number(a),formattedTotal:o,formattedUseful:n,units:this.createUnits(r)}},createFormat(e){const t=(0,T.$W)(e,ge.format.increment);return{...ge.format,maxExponent:t,minExponent:t}},createUnits(e){const t=(0,T.$W)(e,ge.format.increment);return`${T.QN[t]}${ge.format.suffix}`},async fetchClusterResources(e,t={},r){const a=r||this.$store.getters["currentProduct"].inStore,s=this.$store.getters[`${a}/schemaFor`](e);if(s)try{const r=await this.$store.dispatch(`${a}/findAll`,{type:e,opt:t});return r}catch(o){return me.error(`Failed fetching cluster resource ${e} with error:`,o),[]}return[]},async loadMetrics(){this.nodeMetrics=await this.fetchClusterResources(D.$v.NODE,{force:!0})}}};r(46213);const we=(0,ce.A)(Ce,[["render",k],["__scopeId","data-v-5d37a08e"]]);var Se=we},60584:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var a=r(9274);const s={key:1},o={class:"console-button"},n=["disabled","onClick"],i=["href"];function l(e,t,r,l,c,d){const u=(0,a.resolveComponent)("Loading"),p=(0,a.resolveComponent)("ResourceTable"),h=(0,a.resolveDirective)("clean-tooltip");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0})):((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createVNode)(p,(0,a.mergeProps)(e.$attrs,{schema:d.schema,groupable:!1,headers:d.headers,rows:[...c.rows],namespaced:!1,"key-field":"_key"}),{"cell:console":(0,a.withCtx)((({row:r})=>[(0,a.createElementVNode)("div",o,[(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("button",{type:"button",class:"mr-5 btn btn-sm role-primary",disabled:!r.consoleUrl,onClick:e=>d.goto(r)},[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("harvester.host.console")),1)],8,n)),[[h,d.consoleTooltip(r)]]),r.consoleUrl?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("a",{key:0,href:d.consoleDocLink,target:"_blank"},t[0]||(t[0]=[(0,a.createElementVNode)("i",{class:"icon icon-info"},null,-1)]),8,i))])])),_:1},16,["schema","headers","rows"])]))}var c=r(31400),d=r(84409),u=r(68774),p=r(35664),h=r(88339),m=r(52799),g=r(32766),v=r(66242),f=r(3791);const k={id:g.rk.HOST,type:p.yx,attributes:{kind:g.rk.HOST,namespaced:!0},metadata:{name:g.rk.HOST}};var y={name:"HarvesterListHost",components:{ResourceTable:c.A,Loading:d.A},mixins:[m.A],async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={nodes:this.$store.dispatch(`${e}/findAll`,{type:p.NW}),pods:this.$store.dispatch(`${e}/findAll`,{type:p.Sm})};this.$store.getters[`${e}/schemaFor`](p.$v.NODE)?t.metric=this.$store.dispatch(`${e}/findAll`,{type:p.$v.NODE}):this.hasMetricSchema=!1,this.$store.getters[`${e}/schemaFor`](p.oe.NODES)?t.longhornNodes=this.$store.dispatch(`${e}/findAll`,{type:p.oe.NODES}):this.hasLonghornSchema=!1,this.$store.getters[`${e}/schemaFor`](g.rk.BLOCK_DEVICE)&&(t.blockDevices=this.$store.dispatch(`${e}/findAll`,{type:g.rk.BLOCK_DEVICE})),this.$store.getters[`${e}/schemaFor`](g.rk.INVENTORY)&&(t.inventories=this.$store.dispatch(`${e}/findAll`,{type:g.rk.INVENTORY})),this.$store.getters[`${e}/schemaFor`](p.qt.MACHINE)&&(t.machines=this.$store.dispatch(`${e}/findAll`,{type:p.qt.MACHINE}));const r=await(0,h.kR)(t);this.rows=r.nodes},data(){return{rows:[],hasMetricSchema:!0,hasLonghornSchema:!0}},computed:{headers(){const e=[{...u.c4,formatter:"StateWithPopover"},{...u.o_,width:130},{name:"host-ip",labelKey:"tableHeaders.hostIp",search:["internalIp"],value:"internalIp",formatter:"CopyToClipboard",sort:["internalIp"],align:"center"}];if(this.hasMetricSchema){const t=[{name:"cpu",labelKey:"harvester.dashboard.hardwareResourceGauge.cpu",value:"id",formatter:"HarvesterCPUUsed",formatterOpts:{showUsed:!0}},{name:"memory",labelKey:"harvester.dashboard.hardwareResourceGauge.memory",value:"id",formatter:"HarvesterMemoryUsed",formatterOpts:{showUsed:!0}}];e.splice(-1,0,...t)}if(this.hasLonghornSchema){const t={name:"storage",labelKey:"tableHeaders.storage",value:"id",formatter:"HarvesterStorageUsed",formatterOpts:{showAllocated:!0}};e.splice(-1,0,t)}return this.rows.every((e=>e.cpuPinningFeatureEnabled))&&e.push({name:"cpuManager",labelKey:"harvester.tableHeaders.cpuManager",value:"id",formatter:"HarvesterCPUPinning",formatterOpts:{rows:this.rows},width:150,align:"center"}),this.hasLonghornSchema&&e.push({name:"diskState",labelKey:"tableHeaders.diskState",value:"diskState",formatter:"HarvesterDiskState",width:130}),e.push(u.K),e.push({name:"console",label:" ",align:"right",width:80}),e},schema(){return k},consoleDocLink(){const e=this.$store.getters["harvester-common/getServerVersion"]();return(0,f.nn)(v.d.CONSOLE_URL,e)}},methods:{async loadMetrics(){const e=this.$store.getters["harvester/schemaFor"](p.$v.NODE);e&&(await this.$store.dispatch("harvester/findAll",{type:p.$v.NODE,opt:{force:!0}}),this.$forceUpdate())},goto(e){window.open(e.consoleUrl,"_blank")},consoleTooltip(e){return e.consoleUrl?"":this.t("harvester.host.noConsoleUrl")}},typeDisplay(){const{params:{resource:e}}=this.$route;let t=k;return e!==k.id&&(t=this.$store.getters["harvester/schemaFor"](e)),this.$store.getters["type-map/labelFor"](t,99)}},b=(r(5061),r(47433));const C=(0,b.A)(y,[["render",l],["__scopeId","data-v-9b1f7aae"]]);var w=C},78646:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var a=r(9274);const s={key:1};function o(e,t,r,o,n,i){const l=(0,a.resolveComponent)("Loading"),c=(0,a.resolveComponent)("MessageLink"),d=(0,a.resolveComponent)("Banner"),u=(0,a.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(l,{key:0})):n.listSchema?((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[!1===i.loggingEnabled?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,color:"info"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{to:i.to,"prefix-label":"harvester.logging.diabledTips.prefix","middle-label":"harvester.logging.diabledTips.middle","suffix-label":"harvester.logging.diabledTips.suffix"},null,8,["to"])])),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(u,{schema:i.schema,rows:n.rows,"ignore-filter":!0,groupable:!1},null,8,["schema","rows"])])):((0,a.openBlock)(),(0,a.createBlock)(d,{key:2,color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("harvester.generic.noSchema",{schema:i.schema.id})),1)])),_:1}))}var n=r(88339),i=r(31400),l=r(56943),c=r(96413),d=r(84409),u=r(35664),p=r(32766);const h={id:p.rk.CLUSTER_FLOW,type:u.yx,attributes:{kind:p.rk.CLUSTER_FLOW,namespaced:!0},metadata:{name:p.rk.CLUSTER_FLOW}},m="cattle-logging-system/rancher-logging";var g={name:"ListApps",components:{Loading:d.A,ResourceTable:i.A,Banner:l.A,MessageLink:c.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={};this.listSchema=this.$store.getters[`${e}/schemaFor`](u.cm.CLUSTER_FLOW),this.listSchema&&(t.clusteroutput=this.$store.dispatch(`${e}/findAll`,{type:u.cm.CLUSTER_OUTPUT}),t.rows=this.$store.dispatch(`${e}/findAll`,{type:u.cm.CLUSTER_FLOW})),this.$store.getters[`${e}/schemaFor`](p.rk.ADD_ONS)&&(t.loggingAddon=this.$store.dispatch(`${e}/find`,{type:p.rk.ADD_ONS,id:m}));const r=await(0,n.kR)(t);this.rows=r.rows,this.loggingAddon=r.loggingAddon,this.$store.dispatch("type-map/configureType",{match:p.rk.CLUSTER_FLOW,isCreatable:this.listSchema&&this.listSchema?.collectionMethods.find((e=>"post"===e.toLowerCase()))})},data(){return{rows:[],listSchema:null,loggingAddon:null}},computed:{schema(){return h},to(){return`${p.rk.ADD_ONS}/cattle-logging-system/rancher-logging?mode=edit#basic`},loggingEnabled(){return this.loggingAddon?.spec?.enabled}},typeDisplay(){return this.$store.getters["type-map/labelFor"](h,99)}},v=r(47433);const f=(0,v.A)(g,[["render",o]]);var k=f},56497:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var a=r(9274);const s={key:1};function o(e,t,r,o,n,i){const l=(0,a.resolveComponent)("Loading"),c=(0,a.resolveComponent)("MessageLink"),d=(0,a.resolveComponent)("Banner"),u=(0,a.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(l,{key:0})):n.listSchema?((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[!1===i.loggingEnabled?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,color:"info"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{to:i.to,"prefix-label":"harvester.logging.diabledTips.prefix","middle-label":"harvester.logging.diabledTips.middle","suffix-label":"harvester.logging.diabledTips.suffix"},null,8,["to"])])),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(u,{schema:i.schema,rows:n.rows,"ignore-filter":!0,groupable:!1},null,8,["schema","rows"])])):((0,a.openBlock)(),(0,a.createBlock)(d,{key:2,color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("harvester.generic.noSchema",{schema:i.schema.id})),1)])),_:1}))}var n=r(88339),i=r(31400),l=r(56943),c=r(96413),d=r(84409),u=r(35664),p=r(32766);const h={id:p.rk.CLUSTER_OUTPUT,type:u.yx,attributes:{kind:p.rk.CLUSTER_OUTPUT,namespaced:!0},metadata:{name:p.rk.CLUSTER_OUTPUT}},m="cattle-logging-system/rancher-logging";var g={name:"ListApps",components:{Loading:d.A,ResourceTable:i.A,Banner:l.A,MessageLink:c.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={};this.listSchema=this.$store.getters[`${e}/schemaFor`](u.cm.CLUSTER_OUTPUT),this.listSchema&&(t.rows=this.$store.dispatch(`${e}/findAll`,{type:u.cm.CLUSTER_OUTPUT})),this.$store.getters[`${e}/schemaFor`](p.rk.ADD_ONS)&&(t.loggingAddon=this.$store.dispatch(`${e}/find`,{type:p.rk.ADD_ONS,id:m}));const r=await(0,n.kR)(t);this.rows=r.rows,this.loggingAddon=r.loggingAddon,this.$store.dispatch("type-map/configureType",{match:p.rk.CLUSTER_OUTPUT,isCreatable:this.listSchema&&this.listSchema?.collectionMethods.find((e=>"post"===e.toLowerCase()))})},data(){return{rows:[],listSchema:null,loggingAddon:null}},computed:{schema(){return h},to(){return`${p.rk.ADD_ONS}/cattle-logging-system/rancher-logging?mode=edit#basic`},loggingEnabled(){return this.loggingAddon?.spec?.enabled}},typeDisplay(){return this.$store.getters["type-map/labelFor"](h,99)}},v=r(47433);const f=(0,v.A)(g,[["render",o]]);var k=f},81342:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var a=r(9274);const s={key:1};function o(e,t,r,o,n,i){const l=(0,a.resolveComponent)("Loading"),c=(0,a.resolveComponent)("MessageLink"),d=(0,a.resolveComponent)("Banner"),u=(0,a.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(l,{key:0})):n.listSchema?((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[!1===i.loggingEnabled?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,color:"info"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{to:i.to,"prefix-label":"harvester.logging.diabledTips.prefix","middle-label":"harvester.logging.diabledTips.middle","suffix-label":"harvester.logging.diabledTips.suffix"},null,8,["to"])])),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(u,{schema:i.schema,rows:n.rows,"ignore-filter":!0,groupable:!1},null,8,["schema","rows"])])):((0,a.openBlock)(),(0,a.createBlock)(d,{key:2,color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("harvester.generic.noSchema",{schema:i.schema.id})),1)])),_:1}))}var n=r(88339),i=r(31400),l=r(56943),c=r(96413),d=r(84409),u=r(35664),p=r(32766);const h={id:p.rk.FLOW,type:u.yx,attributes:{kind:p.rk.FLOW,namespaced:!0},metadata:{name:p.rk.FLOW}},m="cattle-logging-system/rancher-logging";var g={name:"ListApps",components:{Loading:d.A,ResourceTable:i.A,Banner:l.A,MessageLink:c.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={};this.listSchema=this.$store.getters[`${e}/schemaFor`](u.cm.FLOW),this.clusteroutputSchema=this.$store.getters[`${e}/schemaFor`](u.cm.CLUSTER_OUTPUT),this.listSchema&&(t.output=this.$store.dispatch(`${e}/findAll`,{type:u.cm.OUTPUT}),t.rows=this.$store.dispatch(`${e}/findAll`,{type:u.cm.FLOW})),this.clusteroutputSchema&&(t.clusteroutput=this.$store.dispatch(`${e}/findAll`,{type:u.cm.CLUSTER_OUTPUT})),this.$store.getters[`${e}/schemaFor`](p.rk.ADD_ONS)&&(t.loggingAddon=this.$store.dispatch(`${e}/find`,{type:p.rk.ADD_ONS,id:m}));const r=await(0,n.kR)(t);this.rows=r.rows,this.loggingAddon=r.loggingAddon,this.$store.dispatch("type-map/configureType",{match:p.rk.FLOW,isCreatable:this.listSchema&&this.listSchema?.collectionMethods.find((e=>"post"===e.toLowerCase()))})},data(){return{rows:[],listSchema:null,loggingAddon:null}},computed:{schema(){return h},to(){return`${p.rk.ADD_ONS}/cattle-logging-system/rancher-logging?mode=edit#basic`},loggingEnabled(){return this.loggingAddon?.spec?.enabled}},typeDisplay(){return this.$store.getters["type-map/labelFor"](h,99)}},v=r(47433);const f=(0,v.A)(g,[["render",o]]);var k=f},65391:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var a=r(9274);const s={key:1};function o(e,t,r,o,n,i){const l=(0,a.resolveComponent)("Loading"),c=(0,a.resolveComponent)("MessageLink"),d=(0,a.resolveComponent)("Banner"),u=(0,a.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(l,{key:0})):n.listSchema?((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[!1===i.loggingEnabled?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,color:"info"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{to:i.to,"prefix-label":"harvester.logging.diabledTips.prefix","middle-label":"harvester.logging.diabledTips.middle","suffix-label":"harvester.logging.diabledTips.suffix"},null,8,["to"])])),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(u,{schema:i.schema,rows:n.rows,"ignore-filter":!0,groupable:!1},null,8,["schema","rows"])])):((0,a.openBlock)(),(0,a.createBlock)(d,{key:2,color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("harvester.generic.noSchema",{schema:i.schema.id})),1)])),_:1}))}var n=r(88339),i=r(31400),l=r(56943),c=r(96413),d=r(84409),u=r(35664),p=r(32766);const h={id:p.rk.OUTPUT,type:u.yx,attributes:{kind:p.rk.OUTPUT,namespaced:!0},metadata:{name:p.rk.OUTPUT}},m="cattle-logging-system/rancher-logging";var g={name:"ListApps",components:{Loading:d.A,ResourceTable:i.A,Banner:l.A,MessageLink:c.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={};this.listSchema=this.$store.getters[`${e}/schemaFor`](u.cm.OUTPUT),this.listSchema&&(t.rows=this.$store.dispatch(`${e}/findAll`,{type:u.cm.OUTPUT})),this.$store.getters[`${e}/schemaFor`](p.rk.ADD_ONS)&&(t.loggingAddon=this.$store.dispatch(`${e}/find`,{type:p.rk.ADD_ONS,id:m}));const r=await(0,n.kR)(t);this.rows=r.rows,this.loggingAddon=r.loggingAddon,this.$store.dispatch("type-map/configureType",{match:p.rk.OUTPUT,isCreatable:this.listSchema&&this.listSchema?.collectionMethods.find((e=>"post"===e.toLowerCase()))})},data(){return{rows:[],listSchema:null,loggingAddon:null}},computed:{schema(){return h},to(){return`${p.rk.ADD_ONS}/cattle-logging-system/rancher-logging?mode=edit#basic`},loggingEnabled(){return this.loggingAddon?.spec?.enabled}},typeDisplay(){return this.$store.getters["type-map/labelFor"](h,99)}},v=r(47433);const f=(0,v.A)(g,[["render",o]]);var k=f},49610:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var a=r(9274);const s={key:1};function o(e,t,r,o,n,i){const l=(0,a.resolveComponent)("Loading"),c=(0,a.resolveComponent)("MessageLink"),d=(0,a.resolveComponent)("Banner"),u=(0,a.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(l,{key:0})):((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[!1===i.monitoringEnabled?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,color:"info"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{to:i.to,"prefix-label":"harvester.monitoring.alertmanagerConfig.diabledMonitoringTips.prefix","middle-label":"harvester.monitoring.alertmanagerConfig.diabledMonitoringTips.middle","suffix-label":"harvester.monitoring.alertmanagerConfig.diabledMonitoringTips.suffix"},null,8,["to"])])),_:1})):(0,a.createCommentVNode)("",!0),!1===i.alertingEnabled?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,color:"info"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{to:i.to,"prefix-label":"harvester.monitoring.alertmanagerConfig.diabledAlertingTips.prefix","middle-label":"harvester.monitoring.alertmanagerConfig.diabledAlertingTips.middle","suffix-label":"harvester.monitoring.alertmanagerConfig.diabledAlertingTips.suffix"},null,8,["to"])])),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(d,{color:"info"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("monitoring.alertmanagerConfig.description")),1)])),_:1}),(0,a.createVNode)(u,(0,a.mergeProps)(e.$attrs,{groupable:!0,schema:i.schema,rows:n.rows,"key-field":"_key"}),null,16,["schema","rows"])]))}var n=r(20246),i=r.n(n),l=r(88339),c=r(9980),d=r(96413),u=r(31400),p=r(84409),h=r(35664),m=r(32766);const g={id:m.rk.ALERTMANAGERCONFIG,type:h.yx,attributes:{kind:m.rk.ALERTMANAGERCONFIG,namespaced:!0},metadata:{name:m.rk.ALERTMANAGERCONFIG}},v="cattle-monitoring-system/rancher-monitoring";var f={name:"ListAlertManagerConfigs",components:{Banner:c.l,Loading:p.A,ResourceTable:u.A,MessageLink:d.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={rows:this.$store.dispatch(`${e}/findAll`,{type:h.Rp.ALERTMANAGERCONFIG})};this.$store.getters[`${e}/schemaFor`](m.rk.ADD_ONS)&&(t.monitoring=this.$store.dispatch(`${e}/find`,{type:m.rk.ADD_ONS,id:v}));const r=await(0,l.kR)(t);this.rows=r.rows,this.monitoringAddon=r.monitoring;const a=this.$store.getters[`${e}/schemaFor`](h.Rp.ALERTMANAGERCONFIG);this.$store.dispatch("type-map/configureType",{match:m.rk.ALERTMANAGERCONFIG,isCreatable:a?.collectionMethods.find((e=>"post"===e.toLowerCase()))})},data(){return{rows:null,monitoringAddon:null}},computed:{schema(){return g},to(){return`${m.rk.ADD_ONS}/cattle-monitoring-system/rancher-monitoring?mode=edit#alertmanager`},monitoringEnabled(){return this.monitoringAddon?.spec?.enabled},alertingEnabled(){const e=i().load(this.monitoringAddon?.spec?.valuesContent);return e?.alertmanager?.enabled}},typeDisplay(){return this.$store.getters["type-map/labelFor"](g,99)}},k=(r(14614),r(47433));const y=(0,k.A)(f,[["render",o],["__scopeId","data-v-a0eea6e4"]]);var b=y},42148:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var a=r(9274);const s={key:1},o={key:1};function n(e,t,r,n,i,l){const c=(0,a.resolveComponent)("Loading"),d=(0,a.resolveComponent)("Masthead"),u=(0,a.resolveComponent)("router-link"),p=(0,a.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0})):((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createVNode)(d,{schema:r.schema,resource:i.resource,"type-display":l.typeDisplay,"parent-name-override":"Virtual Machine schedule","create-button-label":e.t("harvester.schedule.createButtonText")},null,8,["schema","resource","type-display","create-button-label"]),(0,a.createVNode)(p,(0,a.mergeProps)(e.$attrs,{headers:l.headers,groupable:!0,rows:l.filteredRows,schema:r.schema,"key-field":"_key","default-sort-by":"age"}),{"col:name":(0,a.withCtx)((({row:e})=>[(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("span",null,[l.getRow(e)?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,to:e.detailLocation},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.nameDisplay),1)])),_:2},1032,["to"])):((0,a.openBlock)(),(0,a.createElementBlock)("span",o,(0,a.toDisplayString)(e.nameDisplay),1))])])])),_:1},16,["headers","rows","schema"])]))}var i=r(84409),l=r(66656),c=r(31400),d=r(32766),u=r(5662),p=r(68774),h=r(1371),m=r(41837),g={name:"HarvesterListSchedule",components:{ResourceTable:c.A,Loading:i.A,Masthead:l.A},props:{schema:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await(0,u.v)({vms:this.$store.dispatch(`${e}/findAll`,{type:d.rk.VM}),rows:this.$store.dispatch(`${e}/findAll`,{type:d.rk.SCHEDULE_VM_BACKUP})});this.rows=t.rows},data(){const e={...this.$route.params},t=e.resource;return{rows:[],settings:[],resource:t,to:`${d.rk.SETTING}/backup-target?mode=edit`}},computed:{headers(){const e=[p.c4,p.o_,p.CU,{name:"sourceVm",labelKey:"harvester.tableHeaders.sourceVm",value:"spec.vmbackup.source.name",sort:"sourceVm",align:"center",formatter:"AttachVMWithName"},h.lA,h.tC,h.KG,h.iu,p.K];return e},filteredRows(){return this.rows.filter((e=>e.spec?.type!==m.aS.SNAPSHOT))},typeDisplay(){return this.t("harvester.schedule.label")}},methods:{getRow(e){return e.spec?.vmbackup?.source?.name}}},v=r(47433);const f=(0,v.A)(g,[["render",n]]);var k=f},60633:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(9274);function s(e,t,r,s,o,n){const i=(0,a.resolveComponent)("Loading"),l=(0,a.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(i,{key:0})):((0,a.openBlock)(),(0,a.createBlock)(l,(0,a.mergeProps)({key:1},e.$attrs,{groupable:!0,schema:n.schema,rows:o.rows,"key-field":"_key"}),null,16,["schema","rows"]))}var o=r(31400),n=r(84409),i=r(35664),l=r(32766);const c={id:l.rk.SECRET,type:i.yx,attributes:{kind:l.rk.SECRET,namespaced:!0},metadata:{name:l.rk.SECRET}};var d={name:"HarvesterSecret",components:{ResourceTable:o.A,Loading:n.A},inheritAttrs:!1,async fetch(){const e=this.$store.getters["currentProduct"].inStore;this.rows=await this.$store.dispatch(`${e}/findAll`,{type:i.bB});const t=this.$store.getters[`${e}/schemaFor`](i.bB);t?.collectionMethods.find((e=>"post"===e.toLowerCase()))||this.$store.dispatch("type-map/configureType",{match:l.rk.SECRET,isCreatable:!1})},data(){return{rows:[]}},computed:{schema(){return c}},typeDisplay(){return this.$store.getters["type-map/labelFor"](c,99)}},u=r(47433);const p=(0,u.A)(d,[["render",s]]);var h=p},36441:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return G}});var a=r(9274);const s={key:1};function o(e,t,r,o,n,i){const l=(0,a.resolveComponent)("Loading"),c=(0,a.resolveComponent)("Banner"),d=(0,a.resolveComponent)("Settings"),u=(0,a.resolveComponent)("Tab"),p=(0,a.resolveComponent)("Tabbed");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(l,{key:0})):((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createVNode)(c,{color:"warning",class:"settings-banner"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",null,(0,a.toDisplayString)(e.t("harvester.setting.modifiedMessage")),1)])),_:1}),(0,a.createVNode)(p,{class:"mt-30"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{name:"advanced",label:e.t("harvester.setting.tabs.advanced"),weight:99},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{settings:i.settings,category:"advanced"},null,8,["settings"])])),_:1},8,["label"]),(0,a.createVNode)(u,{name:"ui",label:e.t("harvester.setting.tabs.ui"),weight:89},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{settings:i.settings,category:"ui"},null,8,["settings"])])),_:1},8,["label"])])),_:1})]))}var n=r(65359),i=r(9980),l=r(84409),c=r(91462),d=r(35664),u=r(88339),p=r(10006),h=r(49584);const m={class:"header"},g={class:"title"},v={key:0,class:"modified"},f={key:1,class:"experimental"},k=["id"],y=["onClick"],b={value:""},C={key:0,class:"settings-value"},w={key:0},S={key:1},N={key:2},E={key:3},V={key:4},A={key:5,class:"text-muted"},$={class:"mt-5"},B=["onClick"],x=["onClick"];function T(e,t,r,s,o,n){const i=(0,a.resolveComponent)("AsyncButton"),l=(0,a.resolveComponent)("Banner"),c=(0,a.resolveDirective)("clean-tooltip"),d=(0,a.resolveDirective)("clean-html");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.categorySettings,((r,s)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:s,class:"advanced-setting mb-20"},[(0,a.createElementVNode)("div",m,[(0,a.createElementVNode)("div",g,[(0,a.createElementVNode)("h1",null,[(0,a.createTextVNode)((0,a.toDisplayString)(r.id)+" ",1),r.customized?((0,a.openBlock)(),(0,a.createElementBlock)("span",v," Modified ")):(0,a.createCommentVNode)("",!0),r.experimental?(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("span",f,t[0]||(t[0]=[(0,a.createTextVNode)(" Experimental ")]))),[[c,e.t("advancedSettings.experimental")]]):(0,a.createCommentVNode)("",!0)]),(0,a.withDirectives)((0,a.createElementVNode)("h2",null,null,512),[[d,e.t(r.description,{},!0)]])]),r.hasActions?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,id:r.id,class:"action"},[(0,a.createElementVNode)("button",{"aria-haspopup":"true","aria-expanded":"false",type:"button",class:"btn btn-sm role-multi-action actions",onClick:e=>n.showActionMenu(e,r)},t[1]||(t[1]=[(0,a.createElementVNode)("i",{class:"icon icon-actions"},null,-1)]),8,y)],8,k)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",b,[r.hide?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",C,["json"===r.kind?((0,a.openBlock)(),(0,a.createElementBlock)("pre",w,(0,a.toDisplayString)(r.json),1)):"multiline"===r.kind?((0,a.openBlock)(),(0,a.createElementBlock)("pre",S,(0,a.toDisplayString)(r.data.value||r.data.default),1)):"enum"===r.kind?((0,a.openBlock)(),(0,a.createElementBlock)("pre",N,(0,a.toDisplayString)(e.t(r.enum)),1)):"custom"===r.kind&&r.custom?((0,a.openBlock)(),(0,a.createElementBlock)("pre",E,(0,a.toDisplayString)(r.custom),1)):r.data.value||r.data.default?((0,a.openBlock)(),(0,a.createElementBlock)("pre",V,(0,a.toDisplayString)(r.data.value||r.data.default),1)):((0,a.openBlock)(),(0,a.createElementBlock)("pre",A,"<"+(0,a.toDisplayString)(e.t("advancedSettings.none"))+">",1))])),(0,a.createElementVNode)("div",$,[r.hide?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:0,class:"btn btn-sm role-primary",onClick:e=>n.toggleHide(r)},(0,a.toDisplayString)(e.t("advancedSettings.show"))+" "+(0,a.toDisplayString)(r.id),9,B)):(0,a.createCommentVNode)("",!0),r.canHide&&!r.hide?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:1,class:"btn btn-sm role-primary",onClick:e=>n.toggleHide(r)},(0,a.toDisplayString)(e.t("advancedSettings.hide"))+" "+(0,a.toDisplayString)(r.id),9,x)):(0,a.createCommentVNode)("",!0),r.id===o.HCI_SETTING.BACKUP_TARGET?((0,a.openBlock)(),(0,a.createBlock)(i,{key:2,class:"backupButton ml-5",mode:"apply",size:"sm",delay:0,"action-label":e.t("harvester.backup.message.testConnect.actionLabel"),"waiting-label":e.t("harvester.backup.message.testConnect.waitingLabel"),"success-label":e.t("harvester.backup.message.testConnect.successLabel"),onClick:e=>n.testConnect(e,r.data.value)},null,8,["action-label","waiting-label","success-label","onClick"])):(0,a.createCommentVNode)("",!0)])]),r.data.errMessage?((0,a.openBlock)(),(0,a.createBlock)(l,{key:0,color:"error mt-5",class:"settings-banner"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(r.data.errMessage),1)])),_:2},1024)):(0,a.createCommentVNode)("",!0)])))),128))])}var _=r(89651),D=r(50889);const L={ui:["branding","ui-source","ui-plugin-index","ui-index"]};var R={name:"SettingLists",components:{AsyncButton:_.A,Banner:i.l},props:{settings:{type:Array,required:!0},category:{type:String,required:!0}},data(){const e=this.filterCategorySettings();return{HCI_SETTING:D.EP,categorySettings:e}},computed:{...(0,n.L8)({t:"i18n/t"})},watch:{settings:{deep:!0,handler(){this["categorySettings"]=this.filterCategorySettings()}}},methods:{filterCategorySettings(){return this.settings.filter((e=>{if(!this.getFeatureEnabled(e.featureFlag))return!1;if("advanced"!==this.category)return(L[this.category]||[]).find((t=>t===e.id));if("advanced"===this.category){const t=Object.keys(L);return!t.some((t=>(L[t]||[]).find((t=>t===e.id))))}}))||[]},getFeatureEnabled(e){return!e||this.$store.getters["harvester-common/getFeatureEnabled"](e)},showActionMenu(e,t){const r=e.srcElement;this.$store.commit("action-menu/show",{resources:t.data,elem:r})},getSettingOption(e){return D.gh.find((t=>t.id===e))},toggleHide(e){this.categorySettings.find((t=>{t.id===e.id&&(t.hide=!t.hide)}))},async testConnect(e,t){try{const r=this.$store.getters["harvester-common/getHarvesterClusterUrl"]("v1/harvester/backuptarget/healthz"),a=await this.$store.dispatch("harvester/request",{url:r}),s=JSON.parse(t);200===a?._status&&this.$store.dispatch("growl/success",{title:this.t("harvester.notification.title.succeed"),message:this.t("harvester.backup.message.testConnect.successMessage",{endpoint:s?.endpoint})},{root:!0}),e(!0)}catch(r){400!==r?._status&&503!==r?._status||this.$store.dispatch("growl/error",{title:this.t("harvester.notification.title.error"),message:r?.errors[0]},{root:!0}),e(!1)}}}},O=(r(88493),r(47433));const M=(0,O.A)(R,[["render",T],["__scopeId","data-v-5b7931f6"]]);var I=M,P=r(32766),U=r(4364),F={components:{Banner:i.l,Loading:l.A,Tabbed:p.A,Tab:h.A,Settings:I},async fetch(){let e;try{e=this.$store.getters["prefs/get"](c.HZ)}catch{e=this.$store.getters["prefs/get"](c.IJ)}const t=!!this.$store.getters["isSingleProduct"],r=this.$store.getters["currentProduct"].inStore,a={harvesterSettings:this.$store.dispatch(`${r}/findAll`,{type:P.rk.SETTING})};t&&(a.settings=this.$store.dispatch("management/findAll",{type:d.Mc.SETTING}));const s=await(0,u.kR)(a);let o=[];o.push(...s.harvesterSettings),t&&(o=[...s.settings,...o]);const n=o.reduce(((e,t)=>(e[t.id]=t,e)),{}),i=[];let l=D.gh;this.isStandaloneHarvester&&(l={...l,...D.LP}),Object.keys(l).forEach((t=>{if(!n[t])return;const r=l[t]?.alias||t,a={...l[t],id:r,data:n[t]};a.hide=a.canHide="json"===a.kind||"multiline"===a.kind||"json"===a.customFormatter||"json"===a.data.customFormatter,a.hasActions=!a.readOnly||e,i.push(a)})),this.initSettings=i.sort(((e,t)=>e.id<t.id?-1:e.id>t.id?1:0))},data(){return{initSettings:[]}},computed:{...(0,n.L8)({t:"i18n/t"}),...(0,n.L8)(["isStandaloneHarvester"]),settings(){return this.initSettings.map((e=>{const t=e,r=t.data?.type?.includes("harvesterhci");if("json"===t.kind)try{t.json=JSON.stringify(JSON.parse(t.data.value||t.data.default||"{}"),null,2)}catch(a){U.error(`${t.data.id}: wrong format`),t.json={}}else if("enum"===t.kind){const e=t.data.value||t.data.default;t.enum=r?`advancedSettings.enum.harv-${t.id}.${e}`:`advancedSettings.enum.${t.id}.${e}`}else"custom"===t.kind&&(t.custom=t.data.customValue);return{...t,description:r?`advancedSettings.descriptions.harv-${t.id}`:`advancedSettings.descriptions.${t.id}`,customized:!t.readOnly&&t.data.value&&t.data.value!==t.data.default||t.data.hasCustomized}}))}}};r(88288);const H=(0,O.A)(F,[["render",o],["__scopeId","data-v-3fea1646"]]);var G=H},51086:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(9274);function s(e,t,r,s,o,n){const i=(0,a.resolveComponent)("Loading"),l=(0,a.resolveComponent)("ResourceTable");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(i,{key:0})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(l,{rows:n.rows,schema:o.schema,headers:n.headers},null,8,["rows","schema","headers"])])}var o=r(84409),n=r(31400),i=r(88339),l=r(35664),c=r(68774),d=r(32766);const u={id:d.rk.STORAGE,type:l.yx,attributes:{kind:d.rk.STORAGE,namespaced:!1},metadata:{name:d.rk.STORAGE}};var p={name:"ListHarvesterStorages",components:{ResourceTable:n.A,Loading:o.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore;await(0,i.kR)({storages:this.$store.dispatch(`${e}/findAll`,{type:l.fJ})});const t=this.$store.getters[`${e}/schemaFor`](l.fJ);t&&!t?.collectionMethods.find((e=>["blocked-post","post"].includes(e.toLowerCase())))&&this.$store.dispatch("type-map/configureType",{match:d.rk.STORAGE,isCreatable:!1})},data(){return{schema:u}},computed:{rows(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](l.fJ);return t.filter((e=>!e.parameters?.backingImage))},headers(){return[c.c4,c.o_,c.wS,c.X,{name:"numberOfReplicas",labelKey:"harvester.storage.numberOfReplicas.label",value:"parameters.numberOfReplicas",sort:["parameters.numberOfReplicas"],align:"center"},c.K]}},typeDisplay(){return this.$store.getters["type-map/labelFor"](u,99)}},h=r(47433);const m=(0,h.A)(p,[["render",s]]);var g=m},69164:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var a=r(9274);const s={key:1},o={key:1},n={key:1};function i(e,t,r,i,l,c){const d=(0,a.resolveComponent)("Loading"),u=(0,a.resolveComponent)("Masthead"),p=(0,a.resolveComponent)("MessageLink"),h=(0,a.resolveComponent)("Banner"),m=(0,a.resolveComponent)("FilterVMSchedule"),g=(0,a.resolveComponent)("router-link"),v=(0,a.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0})):((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createVNode)(u,{schema:r.schema,resource:l.resource,"create-button-label":e.t("harvester.backup.createText")},null,8,["schema","resource","create-button-label"]),(c.errorMessage||c.isEmptyValue)&&c.canUpdate?((0,a.openBlock)(),(0,a.createBlock)(h,{key:0,color:"error"},{default:(0,a.withCtx)((()=>[c.isEmptyValue?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,to:l.to,"prefix-label":"harvester.backup.message.noSetting.prefix","middle-label":"harvester.backup.message.noSetting.middle","suffix-label":"harvester.backup.message.noSetting.suffix"},null,8,["to"])):((0,a.openBlock)(),(0,a.createBlock)(p,{key:1,to:l.to,"prefix-label":"harvester.backup.message.errorTip.prefix","middle-label":"harvester.backup.message.errorTip.middle"},{suffix:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("harvester.backup.message.errorTip.suffix"))+" "+(0,a.toDisplayString)(c.errorMessage),1)])),_:1},8,["to"]))])),_:1})):c.canUpdate?((0,a.openBlock)(),(0,a.createElementBlock)("div",o,[(0,a.createVNode)(h,{color:"info"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{to:l.to,"prefix-label":"harvester.backup.message.viewSetting.prefix","middle-label":"harvester.backup.message.viewSetting.middle","suffix-label":"harvester.backup.message.viewSetting.suffix"},null,8,["to"])])),_:1})])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(v,(0,a.mergeProps)(e.$attrs,{headers:c.headers,groupable:!0,rows:c.filteredRows,"sort-generation-fn":c.sortGenerationFn,schema:r.schema,"key-field":"_key","default-sort-by":"age"}),(0,a.createSlots)({"col:name":(0,a.withCtx)((({row:e})=>[(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("span",null,[c.getRow(e)?((0,a.openBlock)(),(0,a.createBlock)(g,{key:0,to:e.detailLocation},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.nameDisplay),1)])),_:2},1032,["to"])):((0,a.openBlock)(),(0,a.createElementBlock)("span",n,(0,a.toDisplayString)(e.nameDisplay),1))])])])),_:2},[c.schedulingVMBackupFeatureEnabled?{name:"more-header-middle",fn:(0,a.withCtx)((()=>[(0,a.createVNode)(m,{rows:c.getRawRows,onChangeRows:c.changeRows},null,8,["rows","onChangeRows"])])),key:"0"}:void 0]),1040,["headers","rows","sort-generation-fn","schema"])]))}var l=r(9980),c=r(84409),d=r(96413),u=r(66656),p=r(31400),h=r(68774),m=r(55423),g=r(32766),v=r(5662),f=r(41837),k={name:"HarvesterListBackup",components:{ResourceTable:p.A,Banner:l.l,Loading:c.A,Masthead:u.A,MessageLink:d.A,FilterVMSchedule:m.A},props:{schema:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await(0,v.v)({vms:this.$store.dispatch(`${e}/findAll`,{type:g.rk.VM}),settings:this.$store.dispatch(`${e}/findAll`,{type:g.rk.SETTING}),backups:this.$store.dispatch(`${e}/findAll`,{type:g.rk.BACKUP}),scheduleList:this.$store.dispatch(`${e}/findAll`,{type:g.rk.SCHEDULE_VM_BACKUP})});if(this.backups=t.backups,this.rows=t.backups,this.settings=t.settings,this.$store.getters[`${e}/schemaFor`](g.rk.SETTING)){const e=t.settings.find((e=>"backup-target"===e.id)),r=this.getBackupTargetValueIsEmpty(e);e&&!r&&this.testConnect()}},data(){const e={...this.$route.params},t=e.resource;return{rows:[],backups:[],settings:[],resource:t,to:`${g.rk.SETTING}/backup-target?mode=edit`,searchSchedule:""}},methods:{async testConnect(){try{const e=this.$store.getters["harvester-common/getHarvesterClusterUrl"]("v1/harvester/backuptarget/healthz");await this.$store.dispatch("harvester/request",{url:e})}catch(e){400!==e?._status&&503!==e?._status||this.$store.dispatch("growl/error",{title:this.t("harvester.notification.title.error"),message:e.errors[0]},{root:!0})}},getBackupTargetValueIsEmpty(e){let t=!0;if(e?.value)try{const r=JSON.parse(e?.value);t=!r.type}catch(r){}return t},getRow(e){return e.status&&e.status.source},changeRows(e,t){this["searchSchedule"]=t,this["backups"]=e},sortGenerationFn(){let e=(0,p.S)(this.schema,this.$store);return e+=this.searchSchedule,e}},computed:{headers(){const e=[h.c4,h.o_,h.CU,{name:"targetVM",labelKey:"harvester.tableHeaders.targetVm",value:"attachVM",align:"left",formatter:"AttachVMWithName"}];return this.schedulingVMBackupFeatureEnabled&&e.push({name:"backupCreatedFrom",labelKey:"harvester.tableHeaders.vmSchedule",value:"sourceSchedule",formatter:"BackupCreatedFrom"}),e.push({name:"backupTarget",labelKey:"tableHeaders.backupTarget",value:"backupTarget",align:"left",formatter:"HarvesterBackupTargetValidation"},{name:"readyToUse",labelKey:"tableHeaders.readyToUse",value:"status.readyToUse",align:"center",formatter:"Checked"}),this.hasBackupProgresses&&e.push({name:"backupProgress",labelKey:"tableHeaders.progress",value:"backupProgress",align:"left",formatter:"HarvesterBackupProgressBar"}),e.push(h.K),e},schedulingVMBackupFeatureEnabled(){return this.$store.getters["harvester-common/getFeatureEnabled"]("schedulingVMBackup")},hasBackupProgresses(){return!!this.backups.find((e=>void 0!==e.status?.progress))},filteredRows(){return this.backups.filter((e=>e.spec?.type!==f.aS.SNAPSHOT))},getRawRows(){return this.rows.filter((e=>e.spec?.type===f.aS.BACKUP))},backupTargetResource(){return this.settings.find((e=>"backup-target"===e.id))},isEmptyValue(){return this.getBackupTargetValueIsEmpty(this.backupTargetResource)},canUpdate(){return this?.backupTargetResource?.canUpdate},errorMessage(){return this.backupTargetResource?.errMessage}}},y=r(47433);const b=(0,y.A)(k,[["render",i]]);var C=b},95115:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return B}});var a=r(9274);const s={key:0,class:"icon icon-lock"},o={key:1};function n(e,t,r,n,i,l){const c=(0,a.resolveComponent)("Banner"),d=(0,a.resolveComponent)("FilterLabel"),u=(0,a.resolveComponent)("router-link"),p=(0,a.resolveComponent)("ResourceTable");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[l.uploadingImages.length>0?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,color:"warning",label:e.t("harvester.image.warning.uploading",{count:l.uploadingImages.length})},null,8,["label"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,(0,a.mergeProps)(e.$attrs,{rows:i.filterRows,schema:r.schema,"sort-generation-fn":l.sortGenerationFn,"key-field":"_key"}),{"more-header-middle":(0,a.withCtx)((()=>[(0,a.createVNode)(d,{ref:"filterLabel",rows:r.rows,onChangeRows:l.changeRows},null,8,["rows","onChangeRows"])])),"col:name":(0,a.withCtx)((({row:e})=>[(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("span",null,[e?.detailLocation?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,to:e.detailLocation},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.nameDisplay)+" ",1),e.isEncrypted?((0,a.openBlock)(),(0,a.createElementBlock)("i",s)):(0,a.createCommentVNode)("",!0)])),_:2},1032,["to"])):((0,a.openBlock)(),(0,a.createElementBlock)("span",o,(0,a.toDisplayString)(e.nameDisplay),1))])])])),_:1},16,["rows","schema","sort-generation-fn"])])}var i=r(31400),l=r(9980);const c={class:"filter"},d=["onClick"],u={ref:"actionDropDown",class:"btn bg-primary mr-10"},p={class:"filter-popup"},h={class:"box"},m={class:"key"},g={class:"value"},v={class:"key"},f={class:"value"},k=["onClick"];function y(e,t,r,s,o,n){const i=(0,a.resolveComponent)("Select"),l=(0,a.resolveComponent)("LabeledInput"),y=(0,a.resolveComponent)("ArrayList"),b=(0,a.resolveComponent)("v-dropdown");return(0,a.openBlock)(),(0,a.createElementBlock)("div",c,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.searchLabels,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:t},[e.key?((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:`${e.key}${t}`,class:"banner-item bg-warning"},[(0,a.createTextVNode)((0,a.toDisplayString)(e.key)+(0,a.toDisplayString)(e.value?"=":"")+(0,a.toDisplayString)(e.value),1),(0,a.createElementVNode)("i",{class:"icon icon-close",onClick:t=>n.remove(e)},null,8,d)])):(0,a.createCommentVNode)("",!0)],64)))),128)),(0,a.createVNode)(b,{"popper-class":"filter-label",trigger:"click",placement:"bottom-end",distance:20},{popper:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",p,[(0,a.createElementVNode)("div",null,[(0,a.createVNode)(y,{value:o.searchLabels,"onUpdate:value":[t[1]||(t[1]=e=>o.searchLabels=e),n.filterRows],"show-header":!0,"default-add-value":o.defaultAddValue,"initial-empty-row":!0},{"column-headers":(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",h,[(0,a.createElementVNode)("div",m,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("generic.key"))+" ",1),t[2]||(t[2]=(0,a.createElementVNode)("span",{class:"required"},"*",-1))]),(0,a.createElementVNode)("div",g,(0,a.toDisplayString)(e.t("generic.value")),1),t[3]||(t[3]=(0,a.createElementVNode)("div",null,null,-1))])])),columns:(0,a.withCtx)((e=>[(0,a.createElementVNode)("div",v,[(0,a.createVNode)(i,{ref:"select",key:"label",value:e.row.value.key,"onUpdate:value":[t=>e.row.value.key=t,n.filterRows],"append-to-body":!1,searchable:!0,options:n.optionLabels},null,8,["value","onUpdate:value","options"])]),(0,a.createElementVNode)("div",f,[n.calcValueOptions(e.row.value.key).length>0?((0,a.openBlock)(),(0,a.createBlock)(i,{ref:"select",key:"value",value:e.row.value.value,"onUpdate:value":[t=>e.row.value.value=t,n.filterRows],"append-to-body":!1,searchable:!0,options:n.calcValueOptions(e.row.value.key)},null,8,["value","onUpdate:value","options"])):((0,a.openBlock)(),(0,a.createBlock)(l,{key:1,value:e.row.value.value,"onUpdate:value":[t=>e.row.value.value=t,n.filterRows]},null,8,["value","onUpdate:value"]))])])),add:(0,a.withCtx)((({add:r})=>[(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("button",{type:"button",class:"btn role-tertiary add","data-testid":"add-item",onClick:e=>r()},(0,a.toDisplayString)(e.t("generic.add")),9,k),(0,a.createElementVNode)("button",{type:"button",class:"btn role-tertiary add","data-testid":"remove-all-item",onClick:t[0]||(t[0]=e=>n.removeAll())},(0,a.toDisplayString)(e.t("generic.clearAll")),1)])])),_:1},8,["value","default-add-value","onUpdate:value"])])])])),default:(0,a.withCtx)((()=>[(0,a.renderSlot)(e.$slots,"header",{},(()=>[(0,a.createElementVNode)("button",u,[(0,a.renderSlot)(e.$slots,"title",{},(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("harvester.fields.filterLabels")),1)]),!0)],512)]),!0)])),_:3})])}var b=r(39569),C=r(38569),w=r(13238),S={name:"HarvesterFilterLabel",emits:["changeRows"],components:{Select:C.A,ArrayList:b.A,LabeledInput:w.A},props:{rows:{type:Array,required:!0}},data(){return{searchLabels:[],defaultAddValue:{key:"",value:""}}},computed:{optionLabels(){const e=this.rows.map((e=>Object.keys(e.labels)));return Array.from(new Set(e.flat()))}},methods:{calcValueOptions(e){const t=[];return this.rows.map((r=>{const a=t.find((t=>t.label===r.labels[e]));Object.keys(r.labels).includes(e)&&e&&r.labels[e]&&!a&&t.push({value:r.labels[e],label:r.labels[e]})})),t},removeAll(){this["searchLabels"]=[],this.filterRows()},remove(e){this.searchLabels.find(((t,r)=>{if(t.key===e.key&&t.value===e.value)return this.searchLabels.splice(r,1),this.filterRows(),!0}))},filterRows(){const e=this.rows.filter((e=>{const t=this.searchLabels.find((e=>e.key));if(!t)return this.rows;const r=e.labels,a=Object.keys(r);return this.searchLabels.find((e=>!(!e.key||!a.includes(e.key))&&(!e.value||(e.value===r[e.key]||e.value===r[e.key]&&void 0))))}));this.$emit("changeRows",e,this.searchLabels)}},watch:{rows:{deep:!0,immediate:!0,handler(){this.filterRows()}}}},N=(r(15716),r(3286),r(47433));const E=(0,N.A)(S,[["render",y],["__scopeId","data-v-99256476"]]);var V=E,A={name:"ListHarvesterImage",components:{ResourceTable:i.A,Banner:l.l,FilterLabel:V},props:{schema:{type:Object,required:!0},rows:{type:Array,required:!0}},data(){return{searchLabels:[],filterRows:[]}},computed:{uploadingImages(){return this.$store.getters["harvester-common/uploadingImages"]||[]}},methods:{changeRows(e,t){this["filterRows"]=e,this["searchLabels"]=t},sortGenerationFn(){let e=(0,i.S)(this.schema,this.$store);return this.searchLabels.map((t=>{e+=t.key,e+=t.value})),e}}};const $=(0,N.A)(A,[["render",n]]);var B=$},81959:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var a=r(9274);const s={class:"group-bar"},o={class:"group-tab"},n={class:"project-name"},i={class:"right"},l={class:"age"},c=["onClick"],d={key:0},u={key:1};function p(e,t,r,p,h,m){const g=(0,a.resolveComponent)("Loading"),v=(0,a.resolveComponent)("LiveData"),f=(0,a.resolveComponent)("ResourceTable"),k=(0,a.resolveDirective)("clean-html");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(g,{key:0})):((0,a.openBlock)(),(0,a.createBlock)(f,(0,a.mergeProps)({key:1},e.$attrs,{headers:m.headers,"sub-rows":!0,groupable:!0,rows:m.rows,"group-title-by":m.groupTitleBy,"group-by":m.groupBy,schema:r.schema,"group-can-action":!0,"key-field":"_key"}),{"group-by":(0,a.withCtx)((e=>[(0,a.createElementVNode)("div",s,[(0,a.createElementVNode)("div",o,[(0,a.withDirectives)((0,a.createElementVNode)("div",n,null,512),[[k,m.templateLabel(e.group)]])]),(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("div",l,[(0,a.createVNode)(v,{value:m.valueFor(e.group),row:m.templateResource(e.group)},null,8,["value","row"])]),(0,a.createElementVNode)("button",{type:"button",class:"btn btn-sm actions mr-10 role-multi-action",onClick:t=>m.showActions(t,e.group)},t[0]||(t[0]=[(0,a.createElementVNode)("i",{class:"icon icon-actions"},null,-1)]),8,c)])])])),"col:defaultVersion":(0,a.withCtx)((({row:e})=>[e.isDefaultVersion?((0,a.openBlock)(),(0,a.createElementBlock)("td",d,t[1]||(t[1]=[(0,a.createElementVNode)("i",{class:"icon icon-checkmark"},null,-1)]))):((0,a.openBlock)(),(0,a.createElementBlock)("td",u))])),_:1},16,["headers","rows","group-title-by","group-by","schema"]))}var h=r(84409),m=r(45598),g=r(31400),v=r(88339),f=r(68774),k=r(32766),y={name:"HarvesterListTemplate",components:{ResourceTable:g.A,LiveData:m.A,Loading:h.A},inheritAttrs:!1,props:{schema:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await(0,v.kR)({template:this.$store.dispatch(`${e}/findAll`,{type:k.rk.VM_TEMPLATE}),templateVersion:this.$store.dispatch(`${e}/findAll`,{type:k.rk.VM_VERSION})});this.template=t.template,this.templateVersion=t.templateVersion},data(){return{template:[],templateVersion:[]}},computed:{headers(){return[f.c4,f.o_,f.CU,{name:"defaultVersion",value:"id",labelKey:"tableHeaders.defaultVersion"},f.K]},rows(){return[...this.templateVersion]},groupBy(){return"spec.templateId"},groupTitleBy(){return k.rk.VM_TEMPLATE}},methods:{showActions(e,t){const r=t.rows[0].template;this.$store.commit("action-menu/show",{resources:[r],elem:e.target})},valueFor(e){const t=e?.rows?.[0].template;return t?.metadata?.creationTimestamp},templateLabel(e){return e.key},templateResource(e){return e?.rows?.[0].template}}},b=(r(68125),r(47433));const C=(0,b.A)(y,[["render",p],["__scopeId","data-v-a26b23da"]]);var w=C},12523:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=r(9274);const s={class:"state"},o={key:0,class:"icon icon-lock"},n={key:1};function i(e,t,r,i,l,c){const d=(0,a.resolveComponent)("Loading"),u=(0,a.resolveComponent)("HarvesterVolumeState"),p=(0,a.resolveComponent)("router-link"),h=(0,a.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0})):((0,a.openBlock)(),(0,a.createBlock)(h,(0,a.mergeProps)({key:1},e.$attrs,{headers:c.headers,groupable:!0,"default-sort-by":"age",namespaced:!0,rows:c.filterRows,schema:c.schema,"key-field":"_key"}),{"cell:state":(0,a.withCtx)((({row:e})=>[(0,a.createElementVNode)("div",s,[(0,a.createVNode)(u,{class:"vmstate",row:e},null,8,["row"])])])),"cell:AttachedVM":(0,a.withCtx)((({row:e})=>[(0,a.createElementVNode)("div",null,[c.getVMName(e)?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,to:c.goTo(e)},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(c.getVMName(e)),1)])),_:2},1032,["to"])):(0,a.createCommentVNode)("",!0)])])),"col:name":(0,a.withCtx)((({row:e})=>[(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("span",null,[e?.detailLocation?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,to:e.detailLocation},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.nameDisplay)+" ",1),e.isEncrypted?((0,a.openBlock)(),(0,a.createElementBlock)("i",o)):(0,a.createCommentVNode)("",!0)])),_:2},1032,["to"])):((0,a.openBlock)(),(0,a.createElementBlock)("span",n,(0,a.toDisplayString)(e.nameDisplay),1))])])])),_:1},16,["headers","rows","schema"]))}var l=r(84409),c=r(31400),d=r(35664),u=r(68774),p=r(5538),h=r(5662),m=r(32766);const g={id:m.rk.VOLUME,type:d.yx,attributes:{kind:m.rk.VOLUME,namespaced:!0},metadata:{name:m.rk.VOLUME}};var v={name:"HarvesterListVolume",components:{Loading:l.A,ResourceTable:c.A,HarvesterVolumeState:p["default"]},inheritAttrs:!1,async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={pvcs:this.$store.dispatch(`${e}/findAll`,{type:d.YH}),pvs:this.$store.dispatch(`${e}/findAll`,{type:d.PV}),vms:this.$store.dispatch(`${e}/findAll`,{type:m.rk.VM}),scs:this.$store.dispatch(`${e}/findAll`,{type:d.fJ})},r=this.$store.getters[`${e}/schemaFor`](m.qY);r&&(t.snapshots=this.$store.dispatch(`${e}/findAll`,{type:m.qY})),this.$store.getters[`${e}/schemaFor`](d.oe.VOLUMES)&&(t.longhornVolumes=this.$store.dispatch(`${e}/findAll`,{type:d.oe.VOLUMES})),this.$store.getters[`${e}/schemaFor`](d.oe.ENGINES)&&(t.longhornEngines=this.$store.dispatch(`${e}/findAll`,{type:d.oe.ENGINES}));const a=await(0,h.v)(t),s=this.$store.getters[`${e}/schemaFor`](d.YH);s?.collectionMethods.find((e=>"post"===e.toLowerCase()))||this.$store.dispatch("type-map/configureType",{match:m.rk.VOLUME,isCreatable:!1}),this.rows=a.pvcs},data(){return{rows:[]}},computed:{schema(){return g},filterRows(){return this.rows.filter((e=>!e?.isGoldenImageVolume))},headers(){return[u.c4,u.o_,u.CU,{name:"size",labelKey:"tableHeaders.size",value:"spec.resources.requests.storage",sort:"volumeSort",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"storageClass",labelKey:"tableHeaders.storageClass",value:"spec.storageClassName",sort:"spec.storageClassName"},{name:"AttachedVM",labelKey:"tableHeaders.attachedVM",type:"attached",value:"spec.claimRef",sort:"name"},{name:"VolumeSnapshotCounts",labelKey:"harvester.tableHeaders.volumeSnapshotCounts",value:"relatedVolumeSnapshotCounts",formatter:"RelatedVolumeSnapshotCounts",sort:"name",align:"center"},{...u.c4,name:"phase",labelKey:"tableHeaders.phase",formatterOpts:{arbitrary:!0},value:"phaseState"},u.K]}},methods:{goTo(e){return e?.attachVM?.detailLocation},getVMName(e){return e.attachVM?.metadata?.name||""}},typeDisplay(){return this.$store.getters["type-map/labelFor"](g,99)}},f=(r(68390),r(47433));const k=(0,f.A)(v,[["render",i],["__scopeId","data-v-547b6b37"]]);var y=k},32776:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(9274);function s(e,t,r,s,o,n){const i=(0,a.resolveComponent)("Loading"),l=(0,a.resolveComponent)("ResourceTable");return e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(i,{key:0})):((0,a.openBlock)(),(0,a.createBlock)(l,(0,a.mergeProps)({key:1},e.$attrs,{groupable:!0,schema:n.schema,rows:n.filteredRows,"key-field":"_key"}),null,16,["schema","rows"]))}var o=r(31400),n=r(84409),i=r(35664),l=r(88339),c=r(32766);const d={id:c.rk.SNAPSHOT,type:i.yx,attributes:{kind:c.rk.SNAPSHOT,namespaced:!0},metadata:{name:c.rk.SNAPSHOT}};var u={name:"HarvesterListSnapshot",components:{ResourceTable:o.A,Loading:n.A},inheritAttrs:!1,async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={volumes:this.$store.dispatch(`${e}/findAll`,{type:i.YH}),snapshots:this.$store.dispatch(`${e}/findAll`,{type:c.qY})},r=await(0,l.kR)(t);this.rows=r.snapshots;const a=this.$store.getters[`${e}/schemaFor`](c.qY);a?.collectionMethods.find((e=>"post"===e.toLowerCase()))||this.$store.dispatch("type-map/configureType",{match:c.rk.SNAPSHOT,isCreatable:!1})},data(){return{rows:[]}},computed:{filteredRows(){return this.rows.filter((e=>"PersistentVolumeClaim"===e.metadata?.ownerReferences?.[0]?.kind))},schema(){return d}},typeDisplay(){return this.$store.getters["type-map/labelFor"](d,99)}},p=r(47433);const h=(0,p.A)(u,[["render",s]]);var m=h},18144:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(9274);const s={key:1},o={class:"group-bar"},n={class:"group-tab"},i={class:"right"},l=["onClick"],c={class:"empty text-center",colspan:"12"};function d(e,t,r,d,u,p){const h=(0,a.resolveComponent)("Loading"),m=(0,a.resolveComponent)("Masthead"),g=(0,a.resolveComponent)("router-link"),v=(0,a.resolveComponent)("ResourceTable");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[e.$fetchState.pending?((0,a.openBlock)(),(0,a.createBlock)(h,{key:0})):((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createVNode)(m,{schema:p.clusterNetworkSchema,"type-display":e.t("harvester.clusterNetwork.title"),resource:u.HCI.CLUSTER_NETWORK,"create-location":p.createClusterNetworkLocation,"create-button-label":e.t("harvester.clusterNetwork.create.button.label")},null,8,["schema","type-display","resource","create-location","create-button-label"]),(0,a.createVNode)(v,{rows:p.rowsWithFakeClusterNetworks,headers:p.headers,groupable:!0,schema:p.vlanConfigSchema,"group-by":"groupByClusterNetwork"},(0,a.createSlots)({"header-middle":(0,a.withCtx)((()=>[t[0]||(t[0]=(0,a.createElementVNode)("div",null,null,-1))])),"group-by":(0,a.withCtx)((({group:r})=>[(0,a.createElementVNode)("div",o,[(0,a.createElementVNode)("div",n,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(p.groupLabel(r)),1)]),(0,a.createElementVNode)("div",i,[p.isClusterNetworkCreatable&&"mgmt"!==r.key?((0,a.openBlock)(),(0,a.createBlock)(g,{key:0,class:"btn btn-sm role-secondary mr-5",to:p.createVlanConfigLocation(r)},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("harvester.vlanConfig.createNetworkConfig")),1)])),_:2},1032,["to"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("button",{type:"button",class:(0,a.normalizeClass)(["btn btn-sm role-multi-action actions mr-10",{invisible:!p.showClusterNetworkActionButton(r)}]),onClick:e=>p.showClusterNetworkAction(e,r)},t[1]||(t[1]=[(0,a.createElementVNode)("i",{class:"icon icon-actions"},null,-1)]),10,l)])])])),_:2},[(0,a.renderList)(p.clusterNetworkWithoutConfigs,((t,r)=>({name:p.slotName(t.id),fn:(0,a.withCtx)((()=>[(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("tr",{key:t.id,class:"main-row"},[(0,a.createElementVNode)("td",c,(0,a.toDisplayString)("mgmt"===t.id?e.t("harvester.clusterNetwork.mgmt"):e.t("harvester.clusterNetwork.clusterNetwork")),1)])),[[a.vShow,!t.hasChild]])]))})))]),1032,["rows","headers","schema"])]))])}var u=r(84409),p=r(31400),h=r(66656),m=r(88339),g=r(68774),v=r(91462),f=r(35664),k=r(20652);const y="clusterNetwork";var b=r(32766),C={name:"ListHarvesterVLANConfigs",components:{ResourceTable:p.A,Loading:u.A,Masthead:h.A},async fetch(){const e=this.$store.getters["currentProduct"].inStore;await(0,m.kR)({configs:this.$store.dispatch(`${e}/findAll`,{type:b.rk.VLAN_CONFIG}),clusterNetworks:this.$store.dispatch(`${e}/findAll`,{type:b.rk.CLUSTER_NETWORK}),vlanStatuses:this.$store.dispatch(`${e}/findAll`,{type:b.rk.VLAN_STATUS}),nodes:this.$store.dispatch(`${e}/findAll`,{type:f.NW})})},data(){return{HCI:b.rk}},computed:{groupPreference:(0,v.AN)(v.EI),headers(){return[g.c4,{...g.o_,width:300},{name:"type",labelKey:"tableHeaders.type",value:"typeDisplay",getValue:e=>e.typeDisplay,sort:["typeDisplay"]},g.K]},rows(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](b.rk.VLAN_CONFIG);return t},vlanConfigSchema(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[`${e}/schemaFor`](b.rk.VLAN_CONFIG)},clusterNetworkSchema(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[`${e}/schemaFor`](b.rk.CLUSTER_NETWORK)},isClusterNetworkCreatable(){return(this.clusterNetworkSchema?.collectionMethods||[]).includes("POST")},createClusterNetworkLocation(){const e={name:`${k.KR}-c-cluster-resource-create`,params:{product:k.KR,resource:b.rk.CLUSTER_NETWORK}};return e},clusterNetworkWithoutConfigs(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](b.rk.CLUSTER_NETWORK),r=t.map((e=>{const t=!!this.rows.find((t=>t?.spec?.clusterNetwork===e.id));return{...e,hasChild:t}}));return r},rowsWithFakeClusterNetworks(){const e=this.clusterNetworkWithoutConfigs.map((e=>({groupByLabel:e.id,isFake:!0,mainRowKey:e.id,nameDisplay:e.id,groupByClusterNetwork:e.id,availableActions:[]})));return[...this.rows,...e]}},methods:{showClusterNetworkActionButton(e){const t=this.$store.getters["currentProduct"].inStore,r=e.key,a=this.$store.getters[`${t}/byId`](b.rk.CLUSTER_NETWORK,r);return!!a},showClusterNetworkAction(e,t){const r=this.$store.getters["currentProduct"].inStore,a=t.key,s=this.$store.getters[`${r}/byId`](b.rk.CLUSTER_NETWORK,a);this.$store.commit("action-menu/show",{resources:[s],elem:e.target})},createVlanConfigLocation(e){const t=e.key,r={name:`${k.KR}-c-cluster-resource-create`,params:{product:k.KR,resource:b.rk.VLAN_CONFIG}};return r.query={[y]:t},r},slotName(e){return`main-row:${e}`},groupLabel(e){const t=e.rows[0];return t.isFake?`${this.t("harvester.network.clusterNetwork.label")}: ${t.nameDisplay}`:`${this.t("harvester.network.clusterNetwork.label")}: ${e.key}`}}},w=(r(585),r(89247),r(47433));const S=(0,w.A)(C,[["render",d],["__scopeId","data-v-651d7143"]]);var N=S},76868:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".filter[data-v-99256476]{display:inline-block}.filter .banner-item[data-v-99256476]{display:inline-block;font-size:16px;margin-right:10px;padding:6px;border-radius:2px}.filter .banner-item i[data-v-99256476]{cursor:pointer;vertical-align:middle}.filter-popup[data-v-99256476]{width:600px}[data-v-99256476]  .box{display:grid;grid-template-columns:40% 40% 10%;-moz-column-gap:1.75%;column-gap:1.75%;margin-bottom:10px}.required[data-v-99256476]{color:var(--error)}",""]),t["default"]=i},95574:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".filter-label .v-popper__arrow-container{display:none}",""]),t["default"]=i},72834:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".header[data-v-0254dd74]{display:flex;justify-content:space-between;align-items:center}.footer[data-v-0254dd74]{width:100%;display:flex;justify-content:flex-end}.banner-icon[data-v-0254dd74]{display:flex;align-items:center}.banner-content[data-v-0254dd74]{display:flex}.banner-message[data-v-0254dd74]{display:flex;flex-direction:column;justify-content:center;padding:0 15px}.icon[data-v-0254dd74]{font-size:20px;width:20px;line-height:23px}.currentVersion[data-v-0254dd74]{margin-top:10px;display:flex;justify-content:space-between}.currentVersion .version[data-v-0254dd74]{font-size:16px;font-weight:700}",""]),t["default"]=i},83853:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".settings-banner[data-v-5b7931f6]{margin-top:0}.advanced-setting[data-v-5b7931f6]{border:1px solid var(--border);padding:20px;border-radius:var(--border-radius)}.advanced-setting h1[data-v-5b7931f6]{font-size:14px}.advanced-setting h2[data-v-5b7931f6]{font-size:12px;margin-bottom:0;opacity:.8}.settings-value pre[data-v-5b7931f6]{margin:0}.header[data-v-5b7931f6]{display:flex;margin-bottom:20px}.title[data-v-5b7931f6]{flex:1}.modified[data-v-5b7931f6]{border:1px solid var(--primary);border-radius:5px}.experimental[data-v-5b7931f6],.modified[data-v-5b7931f6]{margin-left:10px;padding:2px 10px;font-size:12px}.experimental[data-v-5b7931f6]{border:1px solid var(--error);border-radius:5px}",""]),t["default"]=i},11966:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".state[data-v-e0f7fbca]{display:flex}.state .icon-warning[data-v-e0f7fbca]{margin-top:2px}.warning-message[data-v-e0f7fbca]:first-letter{text-transform:uppercase}",""]),t["default"]=i},28954:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,"[data-v-32e4b7cb]  .sortable-table TD .badge-state{max-width:250px;text-overflow:clip}[data-v-32e4b7cb]  .cell-name{white-space:nowrap}",""]),t["default"]=i},9381:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".cluster-dashboard-glance[data-v-5d37a08e]{border-top:1px solid var(--border);border-bottom:1px solid var(--border);padding:20px 0;display:flex}.cluster-dashboard-glance[data-v-5d37a08e]>*{margin-right:40px}.cluster-dashboard-glance>* SPAN[data-v-5d37a08e]{font-weight:700}.events[data-v-5d37a08e]{margin-top:30px}",""]),t["default"]=i},20562:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".console-button[data-v-9b1f7aae]{display:flex}",""]),t["default"]=i},98198:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".empty[data-v-a0eea6e4]{flex:1;display:flex;align-items:center;justify-content:center;flex-direction:column;margin-top:6em;min-height:100%}i[data-v-a0eea6e4]{font-size:10em;opacity:50%}h2[data-v-a0eea6e4],i[data-v-a0eea6e4]{margin:0}h3[data-v-a0eea6e4]{margin-top:2em}",""]),t["default"]=i},93408:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".settings-banner[data-v-3fea1646]{margin-top:0}",""]),t["default"]=i},43517:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,"[data-v-a26b23da]  .group-name{line-height:30px}[data-v-a26b23da]  .group-bar{display:flex;flex-direction:row;justify-content:space-between}[data-v-a26b23da]  .group-bar .right{display:flex;align-items:center}[data-v-a26b23da]  .group-bar .right .age{width:100px}[data-v-a26b23da]  .group-bar .right .actions{padding-right:7px}[data-v-a26b23da]  .group-bar.has-description .right{margin-top:5px}[data-v-a26b23da]  .group-bar.has-description .group-tab,[data-v-a26b23da]  .group-bar.has-description .group-tab:after{height:50px}[data-v-a26b23da]  .group-bar.has-description .group-tab:after{right:-20px}[data-v-a26b23da]  .group-bar.has-description .group-tab .description{margin-top:-20px}",""]),t["default"]=i},13958:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".state[data-v-547b6b37]{display:flex}.state .vmstate[data-v-547b6b37]{margin-right:6px}",""]),t["default"]=i},83497:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".group-bar[data-v-651d7143]{display:flex;flex-direction:row;justify-content:space-between}.group-bar .right[data-v-651d7143]{margin-top:5px;margin-bottom:3px}.group-bar .group-tab[data-v-651d7143],.group-bar .group-tab[data-v-651d7143]:after{height:50px}.group-bar .group-tab[data-v-651d7143]:after{right:-20px}.group-bar .group-tab SPAN[data-v-651d7143]{color:var(--body-text)!important}",""]),t["default"]=i},64351:function(e,t,r){"use strict";r.r(t);var a=r(36758),s=r.n(a),o=r(40935),n=r.n(o),i=n()(s());i.push([e.id,".col-link-detail{min-width:200px}.group-bar .right{display:flex;margin-left:50px}.group-bar .right a{height:30px}",""]),t["default"]=i},15716:function(e,t,r){var a=r(76868);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("4cc1b774",a,!0,{sourceMap:!1,shadowMode:!1})},3286:function(e,t,r){var a=r(95574);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("5a29acf0",a,!0,{sourceMap:!1,shadowMode:!1})},54434:function(e,t,r){var a=r(72834);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("02588a8c",a,!0,{sourceMap:!1,shadowMode:!1})},88493:function(e,t,r){var a=r(83853);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("11d68e9b",a,!0,{sourceMap:!1,shadowMode:!1})},77726:function(e,t,r){var a=r(11966);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("1c23f151",a,!0,{sourceMap:!1,shadowMode:!1})},12122:function(e,t,r){var a=r(28954);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("667b73de",a,!0,{sourceMap:!1,shadowMode:!1})},46213:function(e,t,r){var a=r(9381);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("4ae78d19",a,!0,{sourceMap:!1,shadowMode:!1})},5061:function(e,t,r){var a=r(20562);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("ec51805c",a,!0,{sourceMap:!1,shadowMode:!1})},14614:function(e,t,r){var a=r(98198);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("43e0813f",a,!0,{sourceMap:!1,shadowMode:!1})},88288:function(e,t,r){var a=r(93408);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("dd1aafac",a,!0,{sourceMap:!1,shadowMode:!1})},68125:function(e,t,r){var a=r(43517);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("828f32ae",a,!0,{sourceMap:!1,shadowMode:!1})},68390:function(e,t,r){var a=r(13958);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("1c04eb00",a,!0,{sourceMap:!1,shadowMode:!1})},585:function(e,t,r){var a=r(83497);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("39e02b71",a,!0,{sourceMap:!1,shadowMode:!1})},89247:function(e,t,r){var a=r(64351);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=r(74825).A;s("231d2e5d",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=harvester-1.5.0.umd.min.list.js.map