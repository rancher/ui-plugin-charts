(("undefined"!==typeof self?self:this)["webpackChunkharvester_1_0_1"]=("undefined"!==typeof self?self:this)["webpackChunkharvester_1_0_1"]||[]).push([[90],{14290:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(9274);const o={class:"precent-data"},s={class:"ml-10 percentage"},n={key:0,class:"mt-10"},c={class:"precent-data"},i={class:"ml-10 percentage"};function u(e,t,r,u,l,d){const m=(0,a.resolveComponent)("ConsumptionGauge");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(m,{capacity:d.cpuTotal,used:d.reserved,units:d.cpuUnits,"resource-name":r.resourceName},{title:(0,a.withCtx)((({amountTemplateValues:t,formattedPercentage:r})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.formatters.hardwareResourceGauge.reserved")),1),(0,a.createElementVNode)("span",o,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",t))+" ",1),(0,a.createElementVNode)("span",s,"/ "+(0,a.toDisplayString)(r),1)])])),_:1},8,["capacity","used","units","resource-name"]),r.showUsed?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createVNode)(m,{capacity:d.cpuTotal,used:d.used,units:d.cpuUnits},{title:(0,a.withCtx)((({amountTemplateValues:t,formattedPercentage:r})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.formatters.hardwareResourceGauge.used")),1),(0,a.createElementVNode)("span",c,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",t))+" ",1),(0,a.createElementVNode)("span",i,"/ "+(0,a.toDisplayString)(r),1)])])),_:1},8,["capacity","used","units"])])):(0,a.createCommentVNode)("",!0)])}var l=r(79516),d=r(21835),m=r(4390),p={name:"HarvesterCpuUsed",components:{ConsumptionGauge:l.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},showUsed:{type:Boolean,default:!1}},data(){return{}},computed:{metrics(){return this.$store.getters["harvester/byId"](d.$v.NODE,this.row.id)},cpuTotal(){let e=0;return this.metrics&&(e=this.metrics.cpuCapacity),e},cpuUnits(){return"C"},node(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/byId`](d.NW,this.row.id);return t},reserved(){return this.metrics?this.node.cpuReserved:0},used(){return this.metrics?(0,m.ao)(this.metrics?.usage?.cpu||"0m"):0}}},h=(r(96782),r(47433));const g=(0,h.A)(p,[["render",u],["__scopeId","data-v-6c8e8046"]]);var f=g},24423:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(9274);const o={key:0};function s(e,t,r,s,n,c){const i=(0,a.resolveComponent)("CopyToClipboardText"),u=(0,a.resolveDirective)("clean-tooltip");return c.showIP?((0,a.openBlock)(),(0,a.createElementBlock)("div",o,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(c.ips,(({ip:e,name:t})=>((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:e},[(0,a.withDirectives)((0,a.createVNode)(i,{text:e},null,8,["text"]),[[u,t]])])))),128))])):(0,a.createCommentVNode)("",!0)}var n=r(18872),c=r(71160),i=r(2602),u=r(41129),l=r(32766),d=r(48249),m=r(50784),p={components:{CopyToClipboardText:u.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},col:{type:Object,default:()=>{}}},data(){return{inStore:"harvester"}},created(){const e=this.$store.getters["currentProduct"].inStore;this.inStore=e},computed:{ips(){return[...this.vmiIp,...this.networkAnnotationIP].filter(Boolean).sort(((e,t)=>e.ip<t.ip?-1:1))},networkAnnotationIP(){if("Running"!==this.row.actualState)return[];const e=(0,n.Jt)(this.row,`metadata.annotations."${i.r.NETWORK_IPS}"`)||"[]";try{const t=JSON.parse(e);return t.map((e=>({ip:e.replace(/\/[\d\D]*/,""),name:""})))}catch(t){return[]}},vmiIp(){const e=this.$store.getters[`${this.inStore}/all`](l.rk.VMI),t=e.find((e=>e.id===this.value))||null,r=this.row.networksName||[],a=t?.spec?.networks||[];return(t?.status?.interfaces||[]).filter((e=>(0,c.eH)(e.ipAddress)&&r.includes(e.name))).map((e=>{let t;const r=a.find((t=>t.name===e.name));return r&&r.multus?t=r.multus.networkName:r&&r.pod&&(t=d.PO),{ip:e.ipAddress,name:t}}))},showIP(){return this.row.stateDisplay!==m.OFF}}},h=r(47433);const g=(0,h.A)(p,[["render",s]]);var f=g},44599:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(9274);const o={class:"precent-data"},s={class:"ml-10 percentage"},n={key:0,class:"mt-10"},c={class:"precent-data"},i={class:"ml-10 percentage"};function u(e,t,r,u,l,d){const m=(0,a.resolveComponent)("ConsumptionGauge");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(m,{capacity:d.memoryTotal,used:d.reserved,units:d.memoryUnits,"number-formatter":d.memoryFormatter,"resource-name":r.resourceName},{title:(0,a.withCtx)((({amountTemplateValues:t,formattedPercentage:r})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.formatters.hardwareResourceGauge.reserved")),1),(0,a.createElementVNode)("span",o,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",t))+" ",1),(0,a.createElementVNode)("span",s,"/ "+(0,a.toDisplayString)(r),1)])])),_:1},8,["capacity","used","units","number-formatter","resource-name"]),r.showUsed?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createVNode)(m,{capacity:d.memoryTotal,used:d.used,units:d.memoryUnits,"number-formatter":d.memoryFormatter},{title:(0,a.withCtx)((({amountTemplateValues:t,formattedPercentage:r})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.formatters.hardwareResourceGauge.used")),1),(0,a.createElementVNode)("span",c,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",t))+" ",1),(0,a.createElementVNode)("span",i,"/ "+(0,a.toDisplayString)(r),1)])])),_:1},8,["capacity","used","units","number-formatter"])])):(0,a.createCommentVNode)("",!0)])}var l=r(79516),d=r(21835),m=r(4390),p={name:"HarvesterMemoryUsed",components:{ConsumptionGauge:l.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},showUsed:{type:Boolean,default:!1}},data(){return{}},computed:{metrics(){return this.$store.getters["harvester/byId"](d.$v.NODE,this.row.id)},memoryTotal(){let e=0;return this.metrics&&(e=this.metrics.memoryCapacity),e},memoryUnits(){const e=(0,m.$W)(this.memoryTotal,1024);return`${m.QN[e]}iB`},node(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/byId`](d.NW,this.row.id);return t},reserved(){return this.metrics?this.node.memoryReserved:0},used(){return this.metrics?(0,m.ao)(this.metrics?.usage?.memory||"0m",{increment:1024}):0}},methods:{memoryFormatter(e){const t=(0,m.$W)(this.memoryTotal,1024),r={addSuffix:!1,increment:1024,minExponent:t};return(0,m.Mo)(e,r)}}},h=(r(46444),r(47433));const g=(0,h.A)(p,[["render",u],["__scopeId","data-v-73bad608"]]);var f=g},20297:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(9274);const o={key:0},s={class:"precent-data"},n={class:"ml-10 percentage"},c={class:"precent-data"},i={class:"ml-10 percentage"};function u(e,t,r,u,l,d){const m=(0,a.resolveComponent)("ConsumptionGauge");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[r.showAllocated?((0,a.openBlock)(),(0,a.createElementBlock)("div",o,[(0,a.createVNode)(m,{capacity:d.storageStats.total,used:d.storageStats.scheduled,units:d.units,"number-formatter":d.formatter,"resource-name":r.resourceName},{title:(0,a.withCtx)((({formattedPercentage:t})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.dashboard.hardwareResourceGauge.allocated")),1),(0,a.createElementVNode)("span",s,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",d.allocatedAmountTemplateValues))+" ",1),(0,a.createElementVNode)("span",n," / "+(0,a.toDisplayString)(t),1)])])),_:1},8,["capacity","used","units","number-formatter","resource-name"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(m,{capacity:d.storageStats.maximum,used:d.storageStats.used,units:d.units,"number-formatter":d.formatter,"resource-name":r.showAllocated?"":r.resourceName,class:(0,a.normalizeClass)({"mt-10":r.showAllocated})},{title:(0,a.withCtx)((({formattedPercentage:t})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.used")),1),(0,a.createElementVNode)("span",c,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",d.usedAmountTemplateValues))+" ",1),(0,a.createElementVNode)("span",i," / "+(0,a.toDisplayString)(t),1)])])),_:1},8,["capacity","used","units","number-formatter","resource-name","class"])])}var l=r(79516),d=r(21835),m=r(4390),p={name:"HarvesterStorageUsed",components:{ConsumptionGauge:l.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},showAllocated:{type:Boolean,default:!1}},async fetch(){const e=this.$store.getters["currentProduct"].inStore;this.longhornSettings=await this.$store.dispatch(`${e}/findAll`,{type:d.oe.SETTINGS})},data(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](d.oe.SETTINGS)||[];return{longhornSettings:t}},computed:{storageStats(){const e={used:0,scheduled:0,maximum:0,reserved:0,total:0},t=this.$store.getters["currentProduct"].inStore,r=this.$store.getters[`${t}/byId`](d.oe.NODES,`longhorn-system/${this.row.id}`)||{},a=this.longhornSettings.find((e=>"longhorn-system/storage-over-provisioning-percentage"===e.id)),o=r?.spec?.disks||{},s=r?.status?.diskStatus||{};return e.used+=r?.spec?.allowScheduling?r.used:0,Object.keys(o).map((t=>{e.scheduled+=r?.spec?.allowScheduling&&s[t]?.storageScheduled||0,e.reserved+=o[t]?.storageReserved||0})),Object.values(s).map((t=>{e.maximum+=t?.storageMaximum||0})),e.total=(e.maximum-e.reserved)*Number(a?.value??0)/100,e},units(){const e=(0,m.$W)(this.storageStats.maximum,1024);return`${m.QN[e]}iB`},used(){let e=this.formatter(this.storageStats.used);return!Number.parseFloat(e)>0&&(e=this.formatter(this.storageStats.used,{canRoundToZero:!1})),e},formatAllocated(){let e=this.formatter(this.storageStats.scheduled);return!Number.parseFloat(e)>0&&(e=this.formatter(this.storageStats.scheduled,{canRoundToZero:!1})),e},usedAmountTemplateValues(){return{used:this.used,total:this.formatter(this.storageStats.maximum),unit:this.units}},allocatedAmountTemplateValues(){return{used:this.formatAllocated,total:this.formatter(this.storageStats.total),unit:this.units}}},methods:{formatter(e,t){const r=(0,m.$W)(this.storageStats.maximum,1024),a={addSuffix:!1,increment:1024,minExponent:r};return(0,m.Mo)(e,{...a,...t})}}},h=(r(38833),r(47433));const g=(0,h.A)(p,[["render",u],["__scopeId","data-v-57cad3b3"]]);var f=g},41129:function(e,t,r){"use strict";r.d(t,{A:function(){return l}});var a=r(9274);function o(e,t,r,o,s,n){return r.text?((0,a.openBlock)(),(0,a.createElementBlock)("a",{key:0,class:(0,a.normalizeClass)(["copy-to-clipboard-text",{copied:s.copied,plain:r.plain}]),href:"#",onClick:t[0]||(t[0]=(...e)=>n.clicked&&n.clicked(...e))},[(0,a.createTextVNode)((0,a.toDisplayString)(r.text)+" ",1),(0,a.createElementVNode)("i",{class:(0,a.normalizeClass)(["icon",{"icon-copy":!s.copied,"icon-checkmark":s.copied}])},null,2)],2)):(0,a.createCommentVNode)("",!0)}var s=r(10219),n=r(2787),c={emits:["error"],props:{text:{type:String,required:!0},plain:{type:Boolean,default:!1}},data(){return{copied:!1}},methods:{clicked(e){this.copied||(e.preventDefault(),(0,s.e)(this.text).then((()=>{this.copied=!0;let t=e.target;"I"===t.tagName&&(t=t.parentElement||t),setTimeout((()=>{this.copied=!1}),500)})).catch((e=>{this.$emit("error",(0,n.rz)(e))})))}}},i=(r(11967),r(47433));const u=(0,i.A)(c,[["render",o],["__scopeId","data-v-30005008"]]);var l=u},61678:function(e,t,r){"use strict";r.r(t);var a=r(36758),o=r.n(a),s=r(40935),n=r.n(s),c=n()(o());c.push([e.id,".precent-data[data-v-6c8e8046]{white-space:nowrap}",""]),t["default"]=c},65196:function(e,t,r){"use strict";r.r(t);var a=r(36758),o=r.n(a),s=r(40935),n=r.n(s),c=n()(o());c.push([e.id,".precent-data[data-v-73bad608]{white-space:nowrap}",""]),t["default"]=c},29777:function(e,t,r){"use strict";r.r(t);var a=r(36758),o=r.n(a),s=r(40935),n=r.n(s),c=n()(o());c.push([e.id,".precent-data[data-v-57cad3b3]{white-space:nowrap}",""]),t["default"]=c},40287:function(e,t,r){"use strict";r.r(t);var a=r(36758),o=r.n(a),s=r(40935),n=r.n(s),c=n()(o());c.push([e.id,".copy-to-clipboard-text[data-v-30005008]{white-space:nowrap}.copy-to-clipboard-text.plain[data-v-30005008]{color:var(--body-text)}.copy-to-clipboard-text.plain[data-v-30005008]:hover{text-decoration:none}.copy-to-clipboard-text.copied[data-v-30005008]{pointer-events:none;color:var(--success)}",""]),t["default"]=c},96782:function(e,t,r){var a=r(61678);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=r(74825).A;o("912be7e2",a,!0,{sourceMap:!1,shadowMode:!1})},46444:function(e,t,r){var a=r(65196);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=r(74825).A;o("775e73e2",a,!0,{sourceMap:!1,shadowMode:!1})},38833:function(e,t,r){var a=r(29777);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=r(74825).A;o("79feeabb",a,!0,{sourceMap:!1,shadowMode:!1})},11967:function(e,t,r){var a=r(40287);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=r(74825).A;o("4ddaaef1",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=harvester-1.0.1.umd.min.90.js.map