{"version":3,"file":"virtual-clusters-1.0.1.umd.min.formatters.js","mappings":"sWA8EEA,EAAAA,EAAAA,aAIEC,EAAA,CAHA,iBAAe,WACdC,IAAG,CAAAC,SAAaC,EAAAC,yBAChBC,MAAOF,EAAAG,0B,uCCxCRC,MAAM,c,mGADCC,EAAAH,MAMIF,EAAAM,a,wCADbC,EAAAA,EAAAA,oBAKO,OAAAC,EAAA,E,2CADFH,EAAAH,OAAK,M,aAFmBF,EAAAS,UAASC,UAAaL,EAAAM,uB,kBAInDJ,EAAAA,EAAAA,oBAEO,OAAAK,GAAAC,EAAAA,EAAAA,iBADFR,EAAAH,OAAK,M,kBAbVK,EAAAA,EAAAA,oBAKO,OALPO,EAGC,O,gBAvCH,GACEC,MAAO,CACLjB,IAAK,CACHkB,KAAUC,OACVC,UAAU,GAGZhB,MAAO,CACLc,KAASG,OACTC,QAAS,IAGXC,aAAc,CACZL,KAASG,OACTC,QAAS,IAGXT,iBAAkB,CAChBK,KAASG,OACTC,QAAS,SAIbE,SAAU,CACRb,SAAAA,GACE,OAAOc,EAAAA,EAAAA,IAAIC,KAAK1B,IAAK0B,KAAKH,aAC5B,EAEAf,WAAAA,GACE,QAASkB,KAAKf,WAAae,KAAKtB,QAAUsB,KAAKf,SACjD,I,WC5BJ,MAAMgB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,Q,sBFFA,MAAMC,EAAY,GAElB,OACEC,KAAM,+BAENC,WAAY,CAAEC,UAASA,GAEvBd,MAAO,CACLjB,IAAO,CACLkB,KAASC,OACTG,QAASA,KACA,CAAC,IAKZlB,MAAO,CACLc,KAASG,OACTC,QAAS,KAIbE,SAAU,CACRQ,UAAAA,GACE,OAAON,KAAK1B,KAAKgC,aAAcC,EAAAA,EAAAA,eAAcP,KAAK1B,MAAQ,EAC5D,EAEAG,uBAAAA,GACE,OAAOuB,KAAKQ,sBACd,EAEA7B,wBAAAA,GACE,OAAOqB,KAAKQ,qBAAqBN,EACnC,GAGFO,QAAS,CAEPD,oBAAAA,CAAqBE,GACnB,IAAIC,EAAM,GACV,MAAML,EAAaN,KAAKM,WAExB,IAAK,MAAMM,KAAKN,EAAY,CAC1B,MAAMO,EAAcb,KAAKc,OAAOC,QAAQ,mBAAmBC,EAAAA,GAAWC,QAASL,GACzEM,EAAIZ,EAAWa,QAAQP,GAEvBQ,EAAQP,GAAaQ,aAAeT,EAE1C,GAAIF,GAAaC,EAAIW,OAASF,EAAME,QAAUZ,EAAW,CACvD,GAAU,IAANQ,EAAS,CACX,MAAMK,EAAYH,EAAMI,MAAM,EAAG,IAEjCb,GAAO,GAAIY,MACb,CACAZ,GAAO,IAAKX,KAAKyB,EAAE,+BAAgC,CAAEC,EAAGpB,EAAWgB,OAASJ,MAC5E,KACF,CAEAP,GAAOS,EAEHF,EAAIZ,EAAWgB,OAAS,IAC1BX,GAAO,KAEX,CAEA,OAAOA,CACT,IGlEJ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASgB,KAEpE,O","sources":["webpack://virtual-clusters-1.0.1/./formatters/PolicyAssignment.vue","webpack://virtual-clusters-1.0.1/../../node_modules/@rancher/shell/components/formatter/Shortened.vue","webpack://virtual-clusters-1.0.1/../../node_modules/@rancher/shell/components/formatter/Shortened.vue?22c1","webpack://virtual-clusters-1.0.1/./formatters/PolicyAssignment.vue?27aa"],"sourcesContent":["<script>\nimport Shortened from '@shell/components/formatter/Shortened';\nimport { MANAGEMENT } from '@shell/config/types';\nimport { getProjectIds } from '../models/k3k.io.virtualclusterpolicy';\n\nconst MAX_CHARS = 35; // maximum characters to show before using + n more and a tooltip to show the full list\n\nexport default {\n  name: 'K3KPolicyAssignmentFormatter',\n\n  components: { Shortened },\n\n  props: {\n    row:   {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    // not used, but the component doesn't render if its not defined\n    value: {\n      type:    String,\n      default: ''\n    },\n  },\n\n  computed: {\n    projectIds() {\n      return this.row?.projectIds || getProjectIds(this.row) || [];\n    },\n\n    projectFullDisplayValue() {\n      return this.computeDisplayValues();\n    },\n\n    projectShortDisplayValue() {\n      return this.computeDisplayValues(MAX_CHARS);\n    },\n  },\n\n  methods: {\n    // get projects' human-readable names and make a comma-separated list\n    computeDisplayValues(maxLength) {\n      let out = '';\n      const projectIds = this.projectIds;\n\n      for (const p of projectIds) {\n        const storeObject = this.$store.getters['management/byId'](MANAGEMENT.PROJECT, p);\n        const i = projectIds.indexOf(p);\n\n        const toAdd = storeObject?.nameDisplay || p;\n\n        if (maxLength && out.length + toAdd.length >= maxLength) {\n          if (i === 0) {\n            const shortened = toAdd.slice(0, 34);\n\n            out += `${ shortened }...`;\n          }\n          out += ` ${ this.t('k3k.policy.listView.plusMore', { n: projectIds.length - i }) }`;\n          break;\n        }\n\n        out += toAdd;\n\n        if (i < projectIds.length - 1) {\n          out += ', ';\n        }\n      }\n\n      return out;\n    }\n  },\n\n};\n</script>\n\n<template>\n  <Shortened\n    long-value-key=\"fullList\"\n    :row=\"{fullList: projectFullDisplayValue}\"\n    :value=\"projectShortDisplayValue\"\n  />\n</template>\n","<script>\nimport { get } from '@shell/utils/object';\n\nexport default {\n  props: {\n    row: {\n      type:     Object,\n      required: true,\n    },\n\n    value: {\n      type:    String,\n      default: ''\n    },\n\n    longValueKey: {\n      type:    String,\n      default: '',\n    },\n\n    tooltipPlacement: {\n      type:    String,\n      default: 'auto'\n    },\n  },\n\n  computed: {\n    longValue() {\n      return get(this.row, this.longValueKey);\n    },\n\n    showTooltip() {\n      return !!this.longValue && this.value !== this.longValue;\n    },\n  },\n};\n</script>\n\n<template>\n  <span\n    v-if=\"!value\"\n    class=\"text-muted\"\n  >\n    &mdash;\n  </span>\n  <span\n    v-else-if=\"showTooltip\"\n    v-clean-tooltip=\"{content: longValue, placement: tooltipPlacement}\"\n  >\n    {{ value }}\n  </span>\n  <span v-else>\n    {{ value }}\n  </span>\n</template>\n","import { render } from \"./Shortened.vue?vue&type=template&id=44fee9ee\"\nimport script from \"./Shortened.vue?vue&type=script&lang=js\"\nexport * from \"./Shortened.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PolicyAssignment.vue?vue&type=template&id=598cb1e3\"\nimport script from \"./PolicyAssignment.vue?vue&type=script&lang=js\"\nexport * from \"./PolicyAssignment.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_Shortened","row","fullList","$options","projectFullDisplayValue","value","projectShortDisplayValue","class","$props","showTooltip","_createElementBlock","_hoisted_2","longValue","placement","tooltipPlacement","_hoisted_3","_toDisplayString","_hoisted_1","props","type","Object","required","String","default","longValueKey","computed","get","this","__exports__","MAX_CHARS","name","components","Shortened","projectIds","getProjectIds","computeDisplayValues","methods","maxLength","out","p","storeObject","$store","getters","MANAGEMENT","PROJECT","i","indexOf","toAdd","nameDisplay","length","shortened","slice","t","n","render"],"sourceRoot":""}